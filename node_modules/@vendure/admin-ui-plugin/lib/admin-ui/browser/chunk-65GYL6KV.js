import{Ad as J,Be as ie,Ca as l,Da as w,Dd as q,Ea as h,Ed as K,Ge as re,Ha as _,Ia as M,Ja as P,Lg as ae,Ma as T,O as k,P as U,Pe as b,Q as y,Qa as c,Ra as m,Sa as R,Wd as Q,Z as u,Za as B,Ze as oe,_ as r,aa as d,ca as L,ce as X,da as A,db as z,de as Y,ee as $,ha as C,hd as O,ja as p,jd as V,la as E,lb as N,ld as W,ma as o,n as S,na as a,nd as x,oa as I,qe as ee,rd as D,re as ne,se as te,ta as j,td as F,ua as f,ud as G,wd as H,xd as Z}from"./chunk-KV5QNU55.js";var de=t=>({brand:t});function he(t,v){if(t&1&&(o(0,"p",20),l(1," Photo by "),o(2,"a",21),l(3),a(),l(4," on "),o(5,"a",21),l(6,"Unsplash"),a()()),t&2){let e=f();r(2),p("href",e.imageCreatorUrl,u),r(),w(e.imageCreator),r(2),p("href",e.imageUnsplashUrl,u)}}function ue(t,v){if(t&1&&(o(0,"p",22),l(1),a()),t&2){let e=f();r(),w(e.imageLocation)}}function Ce(t,v){if(t&1&&I(0,"img",23),t&2){let e=f();p("src",e.imageUrl,u)("alt",e.imageUrl)}}function fe(t,v){t&1&&I(0,"img",24)}var ge=(()=>{class t{constructor(e,i,n,s){this.authService=e,this.router=i,this.httpClient=n,this.localizationService=s,this.username="",this.password="",this.rememberMe=!1,this.version=ie,this.brand=x().brand,this.hideVendureBranding=x().hideVendureBranding,this.customImageUrl=x().loginImageUrl,this.imageUrl="",this.imageUnsplashUrl="",this.imageLocation="",this.imageCreator="",this.imageCreatorUrl="",this.customImageUrl?this.imageUrl=this.customImageUrl:this.loadImage()}ngOnInit(){this.direction$=this.localizationService.direction$}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":let i=this.getRedirectRoute();this.router.navigateByUrl(i||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message;break}})}loadImage(){this.httpClient.get("https://login-image.vendure.io").toPromise().then(e=>{this.updateImage(e)})}updateImage(e){let i=e.user,n=e.location;this.imageUrl=e.urls.regular+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageCreator=i.name,this.imageLocation=n.name,this.imageCreatorUrl=i.links.html+"?utm_source=Vendure+Login+Image&utm_medium=referral",this.imageUnsplashUrl=e.links.html}getRedirectRoute(){let e,i=new RegExp(`${oe}=(.*)`);try{let n=window.location.search.match(i);n&&1<n.length&&(e=atob(decodeURIComponent(n[1])))}catch{}return e}static{this.\u0275fac=function(i){return new(i||t)(d(b),d(O),d(N),d(D))}}static{this.\u0275cmp=L({type:t,selectors:[["vdr-login"]],standalone:!1,decls:36,vars:37,consts:[[1,"login-wrapper",3,"dir"],[1,"login-wrapper-inner"],[1,"login-wrapper-image"],[1,"login-wrapper-image-content"],[1,"login-wrapper-image-title"],[1,"login-wrapper-image-copyright"],["class","creator",4,"ngIf"],["class","location",4,"ngIf"],[3,"src","alt",4,"ngIf"],[1,"login-wrapper-form"],[1,"login-title"],[1,"login-form"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModelChange","ngModel","placeholder"],["name","password","type","password","id","login_password",1,"password",3,"ngModelChange","ngModel","placeholder"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModelChange","ngModel"],["type","submit",1,"button","primary","login-button",3,"click","disabled"],["class","login-wrapper-logo","src","assets/logo-login.webp",4,"ngIf"],[1,"creator"],["target","_blank",3,"href"],[1,"location"],[3,"src","alt"],["src","assets/logo-login.webp",1,"login-wrapper-logo"]],template:function(i,n){i&1&&(o(0,"div",0),c(1,"async"),o(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),l(6),c(7,"translate"),a(),o(8,"div",5),C(9,he,7,3,"p",6)(10,ue,2,1,"p",7),a()(),C(11,Ce,1,2,"img",8),a(),o(12,"div",9)(13,"p",10),l(14),c(15,"translate"),a(),o(16,"form",11)(17,"div",12)(18,"input",13),c(19,"translate"),P("ngModelChange",function(g){return M(n.username,g)||(n.username=g),g}),a(),o(20,"input",14),c(21,"translate"),P("ngModelChange",function(g){return M(n.password,g)||(n.password=g),g}),a(),o(22,"clr-alert",15)(23,"clr-alert-item")(24,"span",16),l(25),a()()(),o(26,"clr-checkbox-wrapper")(27,"input",17),P("ngModelChange",function(g){return M(n.rememberMe,g)||(n.rememberMe=g),g}),a(),o(28,"label"),l(29),c(30,"translate"),a()(),o(31,"div")(32,"button",18),j("click",function(){return n.logIn()}),l(33),c(34,"translate"),a()()()()(),C(35,fe,1,0,"img",19),a()()),i&2&&(p("dir",m(1,20,n.direction$)),r(6),h(" ",m(7,22,"common.login-image-title")," "),r(3),p("ngIf",n.imageCreator),r(),p("ngIf",n.imageLocation),r(),p("ngIf",n.imageUrl),r(3),h(" ",R(15,24,"common.login-title",T(35,de,n.hideVendureBranding?n.brand:"Vendure"))," "),r(4),_("ngModel",n.username),p("placeholder",m(19,27,"common.username")),r(2),_("ngModel",n.password),p("placeholder",m(21,29,"common.password")),r(2),E("visible",n.errorMessage),p("clrAlertType","danger")("clrAlertClosable",!1),r(3),h(" ",n.errorMessage," "),r(2),_("ngModel",n.rememberMe),r(2),w(m(30,31,"common.remember-me")),r(3),p("disabled",!n.username||!n.password),r(),h(" ",m(34,33,"common.login")," "),r(2),p("ngIf",!n.hideVendureBranding))},dependencies:[ee,ne,te,X,$,Y,B,K,G,F,H,Z,q,J,Q,re,z,W],styles:[`.login-wrapper[_ngcontent-%COMP%]{background:var(--color-weight-100);background-image:none;height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{background:var(--login-wrapper-inner-bg);width:1120px;height:590px;display:flex;justify-content:flex-start;align-items:stretch;position:relative;border-radius:var(--border-radius);border:1px solid var(--color-weight-150);overflow:hidden}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]{flex-direction:column;height:auto;width:100%}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:100%;flex-grow:1;position:relative}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]{height:300px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover;object-position:center;position:relative;z-index:1}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;left:0;bottom:0;z-index:10;background:#020024;background:linear-gradient(180deg,#02002400,#000000bf);display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-end;padding:30px}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#fff;margin-bottom:20px}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-title[_ngcontent-%COMP%]{font-size:1.2rem}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]{opacity:.8}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6rem;color:#fff;margin:0!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]   .login-wrapper-image-copyright[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:100%;width:400px;padding:40px;display:flex;flex-direction:column;align-items:stretch;justify-content:center;box-shadow:0 20px 25px #0000001a;overflow:hidden;flex-shrink:0}@media (max-width: 992px){.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]{height:auto;width:100%;padding:20px}}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;margin-bottom:20px;color:var(--color-weight-600)}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.username[_ngcontent-%COMP%], .login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   input.password[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px;padding:12px 16px!important;background:#fff;font-size:14px;line-height:22px;color:#52667a;outline:none;-webkit-appearance:none}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-form[_ngcontent-%COMP%]   .login-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%!important;margin-top:20px!important}.login-wrapper[_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-logo[_ngcontent-%COMP%]{width:60px;height:auto;position:absolute;right:20px;top:20px}.login-button[_ngcontent-%COMP%]{width:100%;margin-top:var(--space-unit);justify-content:center}.version[_ngcontent-%COMP%]{flex:1;flex-grow:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-inline-start:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden;display:block}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;animation:_ngcontent-%COMP%_shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;transform:translateZ(0);backface-visibility:hidden;perspective:1000px}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.login-wrapper[dir=rtl][_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-logo[_ngcontent-%COMP%]{right:auto;left:20px}.login-wrapper[dir=rtl][_ngcontent-%COMP%]   .login-wrapper-inner[_ngcontent-%COMP%]   .login-wrapper-image[_ngcontent-%COMP%]   .login-wrapper-image-content[_ngcontent-%COMP%]{left:auto;right:0}
/*# sourceMappingURL=login.component-WIN2MJ3Z.css.map */`]})}}return t})();var le=(()=>{class t{constructor(e,i){this.router=e,this.authService=i}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe(S(i=>(i&&this.router.navigate(["/"]),!i)))}static{this.\u0275fac=function(i){return new(i||t)(y(O),y(b))}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ce=[{path:"",component:ge,pathMatch:"full",canActivate:[le]}];var Be=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=A({type:t})}static{this.\u0275inj=U({imports:[ae,V.forChild(ce)]})}}return t})();export{ge as LoginComponent,le as LoginGuard,Be as LoginModule,ce as loginRoutes};
//# sourceMappingURL=chunk-65GYL6KV.js.map
