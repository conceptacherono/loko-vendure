import{a as Ii}from"./chunk-MZFFGCAS.js";import{$ as Xt,$c as Ir,$e as wt,$f as Ie,$g as Vt,Aa as jt,Ac as Tn,Ae as di,Af as ve,Ag as po,B as Ei,Ba as ie,Bc as Sn,Bd as Vn,Bf as ye,Ca as f,Cc as Dn,Cf as be,Da as x,Dc as In,Dd as $n,Ea as C,Ec as xn,Ed as re,Ef as me,Fa as Lt,Fc as Pn,Fd as Et,Fe as Yn,Ff as Fe,Fg as hi,Gc as Bn,Ge as J,H as Mi,Ha as qi,Hc as kn,He as le,Hg as co,I as ft,Ia as Zi,Ic as Ln,Id as ae,Ie as ci,Ig as Ci,Ja as Ui,Jd as he,Je as Xn,Jf as fi,Jg as $,K as St,Kf as xr,L as Qt,La as q,Ld as se,Le as Ce,Lf as Rt,Lg as uo,M as Yt,Ma as W,Md as _t,Me as Mt,Mf as O,Nd as vt,Ne as Jn,Nf as M,O as wi,Oa as Hi,Od as yt,Oe as Wt,Of as V,P as Ni,Pd as Gn,Pf as w,Pg as ue,Q as xt,Qa as a,Qd as qn,Qf as N,Qg as Je,R as Si,Ra as s,S as Ri,Sa as k,Sg as fo,T as b,Ta as zi,Tf as ro,U as F,Ua as ne,Uc as An,Ud as ce,Uf as ao,Ug as Ae,Va as de,Vc as oi,Vd as Zn,Vf as so,W as Ke,Wa as ji,Wc as ri,Wd as Un,We as eo,Wf as Te,Xc as ai,Xe as bt,Xf as Se,Y as Oi,Ya as U,Yc as En,Z as Vi,Za as E,Zf as De,Zg as Ee,_ as r,_c as Mn,_e as Ge,_f as Re,_g as Ot,a as H,aa as v,ae as j,ah as $t,b as ze,bc as ii,bf as Nt,bh as Pe,ca as T,cc as Ji,cd as wn,cf as gt,ch as Dt,da as $i,db as B,dc as en,dd as G,de as Ye,e as ut,ea as Jt,ec as tn,ed as si,ee as Xe,fb as Wi,fc as nn,ff as ui,fg as xe,g as Ct,ga as A,gc as on,gd as Nn,gf as to,h as ki,ha as u,hc as ni,hd as Rn,i as Li,ia as ei,ic as rn,id as ge,if as qe,ja as o,jb as Ki,jc as an,jd as On,jg as Ze,k as Tt,kc as sn,la as Pt,lc as ln,ld as I,ma as l,mc as mn,n as Z,na as m,nb as D,nc as pn,ng as L,o as tt,oa as c,ob as ti,oc as dn,of as io,p as te,pa as Bt,pb as Qi,pc as cn,qa as kt,qc as un,qe as Hn,rb as Yi,rc as fn,re as zn,sa as S,sc as gn,se as jn,sf as no,t as Ht,ta as _,tc as hn,td as Qe,te as X,ua as g,uc as Cn,ud as Q,ue as Wn,uf as oo,ug as gi,vb as Xi,vc as _n,vd as R,ve as Kn,vg as fe,wb as At,wc as vn,wd as Y,we as Qn,xa as Di,xc as yn,xd as oe,xe as li,y as pe,ya as Gi,yc as bn,ye as mi,yg as lo,z as Ai,za as zt,zb as y,zc as Fn,ze as pi,zf as _e,zg as mo}from"./chunk-KV5QNU55.js";var go=(()=>{class t{constructor(e){this.templateRef=e}static{this.\u0275fac=function(n){return new(n||t)(v(Xt))}}static{this.\u0275dir=Jt({type:t,selectors:[["","vdrZoneMemberControls",""]],standalone:!1})}}return t})();var ho=(()=>{class t{constructor(e){this.templateRef=e}static{this.\u0275fac=function(n){return new(n||t)(v(Xt))}}static{this.\u0275dir=Jt({type:t,selectors:[["","vdrZoneMemberListHeader",""]],standalone:!1})}}return t})();var Pr=t=>["/settings/countries",t];function Br(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function kr(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Lr(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Ar(t,p){if(t&1&&(l(0,"a",9)(1,"span"),f(2),m(),c(3,"clr-icon",10),m()),t&2){let e=p.item;o("routerLink",W(2,Pr,e.id)),r(2),C(" ",e.name,"")}}function Er(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.code," ")}}function Mr(t,p){t&1&&(l(0,"vdr-chip",13),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.enabled")))}function wr(t,p){t&1&&(l(0,"vdr-chip",14),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.disabled")))}function Nr(t,p){if(t&1&&u(0,Mr,3,3,"vdr-chip",11)(1,wr,3,3,"vdr-chip",12),t&2){let e=p.item;o("ngIf",e.enabled),r(),o("ngIf",!e.enabled)}}var qt=(()=>{class t{constructor(e){this.dataService=e,this.selectedMemberIds=[],this.selectionChange=new Ke,this.filterTermControl=new Vn(""),this.currentPage=1,this.itemsPerPage=10,this.selectionManager=new io({multiSelect:!0,itemsAreEqual:(n,i)=>n.id===i.id,additiveMode:!0}),this.membersInput$=new Ct,this.activeZoneInput$=new ki(void 0),this.destroy$=new Ct,this.refresh$=new Ct}ngOnInit(){let e=Ht(this.activeZoneInput$,this.refresh$).pipe(ft(n=>this.activeZone?this.dataService.query(ii,{zoneId:this.activeZone.id}).mapSingle(({zone:i})=>i?.members??[]):Tt([])));this.members$=Ht(e,this.membersInput$),this.members$.pipe(pe(1)).subscribe(n=>{this.selectionManager.setCurrentItems(n?.filter(i=>this.selectedMemberIds.includes(i.id))??[])}),this.selectionManager.selectionChanges$.pipe(St(this.destroy$)).subscribe(n=>{this.selectionChange.emit(n.map(i=>i.id))}),this.filteredMembers$=tt(this.members$,this.filterTermControl.valueChanges.pipe(Mi(""))).pipe(Z(([n,i])=>{if(i){let d=i?.toLocaleLowerCase()??"";return n.filter(h=>h.name.toLocaleLowerCase().includes(d)||h.code.toLocaleLowerCase().includes(d))}else return n})),this.totalItems$=this.filteredMembers$.pipe(Z(n=>n.length))}ngOnChanges(e){"members"in e&&this.membersInput$.next(this.members??[]),"activeZone"in e&&this.activeZoneInput$.next(this.activeZone)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refresh(){this.refresh$.next()}static{this.\u0275fac=function(n){return new(n||t)(v(G))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-zone-member-list"]],contentQueries:function(n,i,d){if(n&1&&(Di(d,ho,5),Di(d,go,5)),n&2){let h;zt(h=jt())&&(i.headerTemplate=h.first),zt(h=jt())&&(i.controlsTemplate=h.first)}},inputs:{locationId:"locationId",members:"members",selectedMemberIds:"selectedMemberIds",activeZone:"activeZone"},outputs:{selectionChange:"selectionChange"},standalone:!1,features:[Ri],decls:24,vars:38,consts:[[3,"itemsPerPageChange","pageChange","id","items","totalItems","itemsPerPage","currentPage"],[3,"locationId","hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault"],["id","updated-at",3,"heading","hiddenByDefault"],["id","name",3,"heading","optional"],["id","code",3,"heading"],["id","enabled",3,"heading"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"]],template:function(n,i){n&1&&(l(0,"vdr-data-table-2",0),a(1,"async"),a(2,"async"),_("itemsPerPageChange",function(h){return i.itemsPerPage=h})("pageChange",function(h){return i.currentPage=h}),c(3,"vdr-bulk-action-menu",1)(4,"vdr-dt2-search",2),a(5,"translate"),l(6,"vdr-dt2-column",3),a(7,"translate"),u(8,Br,1,1,"ng-template"),m(),l(9,"vdr-dt2-column",4),a(10,"translate"),u(11,kr,2,4,"ng-template"),m(),l(12,"vdr-dt2-column",5),a(13,"translate"),u(14,Lr,2,4,"ng-template"),m(),l(15,"vdr-dt2-column",6),a(16,"translate"),u(17,Ar,4,4,"ng-template"),m(),l(18,"vdr-dt2-column",7),a(19,"translate"),u(20,Er,1,1,"ng-template"),m(),l(21,"vdr-dt2-column",8),a(22,"translate"),u(23,Nr,2,2,"ng-template"),m()()),n&2&&(o("id",i.locationId)("items",s(1,20,i.filteredMembers$))("totalItems",s(2,22,i.totalItems$))("itemsPerPage",i.itemsPerPage)("currentPage",i.currentPage),r(3),o("locationId",i.locationId)("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.filterTermControl)("searchTermPlaceholder",s(5,24,"common.search-by-name")),r(2),o("heading",s(7,26,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(10,28,"common.created-at"))("hiddenByDefault",!0),r(3),o("heading",s(13,30,"common.updated-at"))("hiddenByDefault",!0),r(3),o("heading",s(16,32,"common.name"))("optional",!1),r(3),o("heading",s(19,34,"common.code")),r(3),o("heading",s(22,36,"common.enabled")))},dependencies:[j,E,ge,qe,Te,xe,De,Ie,B,I,Ce],styles:[`.members-header[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100);position:sticky;top:0;padding:6px;z-index:5;border-bottom:1px solid var(--color-component-border-200)}.members-header[_ngcontent-%COMP%]   .header-title-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.members-header[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:100%}
/*# sourceMappingURL=zone-member-list.component-LZVI4I6F.css.map */`],changeDetection:0})}}return t})();var _o=t=>({zoneName:t});function Rr(t,p){if(t&1&&(f(0),a(1,"translate")),t&2){let e=g();x(k(1,1,"settings.add-countries-to-zone",W(4,_o,e.zoneName)))}}function Or(t,p){if(t&1){let e=S();l(0,"button",3),_("click",function(){b(e);let i=g();return F(i.cancel())}),f(1),a(2,"translate"),m(),l(3,"button",4),_("click",function(){b(e);let i=g();return F(i.add())}),f(4),a(5,"translate"),m()}if(t&2){let e=g();r(),x(s(2,3,"common.cancel")),r(2),o("disabled",!e.selectedMemberIds.length),r(),C(" ",k(5,5,"settings.add-countries-to-zone",W(8,_o,e.zoneName))," ")}}var Hp=D`
    query GetZoneMembers($zoneId: ID!) {
        zone(id: $zoneId) {
            id
            createdAt
            updatedAt
            name
            members {
                createdAt
                updatedAt
                id
                name
                code
                enabled
            }
        }
    }
`,vo=(()=>{class t{constructor(e){this.dataService=e,this.selectedMemberIds=[]}ngOnInit(){this.currentMembers$=this.dataService.query(ii,{zoneId:this.zoneId}).mapSingle(({zone:e})=>e?.members??[]),this.availableCountries$=this.dataService.query(ni,{options:{take:999}}).mapStream(e=>e.countries.items).pipe(Yt(this.currentMembers$),Z(([e,n])=>e.filter(i=>!n.find(d=>d.id===i.id))))}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedMemberIds)}static{this.\u0275fac=function(n){return new(n||t)(v(G))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-add-country-to-zone-dialog"]],standalone:!1,decls:4,vars:4,consts:[["vdrDialogTitle",""],["locationId","zone-members-list",3,"selectionChange","members","selectedMemberIds"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(u(0,Rr,2,6,"ng-template",0),l(1,"vdr-zone-member-list",1),a(2,"async"),_("selectionChange",function(h){return i.selectedMemberIds=h}),m(),u(3,Or,6,10,"ng-template",2)),n&2&&(r(),o("members",s(2,2,i.availableCountries$))("selectedMemberIds",i.selectedMemberIds))},dependencies:[Wn,Kn,qt,B,I],encapsulation:2,changeDetection:0})}}return t})();var bo=ut(Wt()),Fo=ut(Ir());function Vr(t,p){if(t&1){let e=S();l(0,"button",4),_("click",function(){b(e);let i=g().$implicit,d=g();return F(d.toggleAll(i.permissions))}),f(1),a(2,"translate"),m()}t&2&&(r(),C(" ",s(2,1,"common.toggle-all")," "))}function $r(t,p){if(t&1){let e=S();l(0,"td")(1,"vdr-select-toggle",5),_("selectedChange",function(i){let d=b(e).$implicit,h=g(2);return F(h.setPermission(d.name,i))}),m()()}if(t&2){let e=p.$implicit,n=g().$implicit,i=g();ei("colspan",n.permissions.length===1?4:1),r(),o("title",e.description)("label",e.name)("disabled",i.readonly)("selected",i.activePermissions==null?null:i.activePermissions.includes(e.name))}}function Gr(t,p){if(t&1&&(l(0,"tr")(1,"td",2)(2,"div")(3,"strong"),f(4),a(5,"translate"),m()(),l(6,"small"),f(7),a(8,"translate"),m(),c(9,"br"),u(10,Vr,3,3,"button",3),m(),u(11,$r,2,5,"td",1),m()),t&2){let e=p.$implicit,n=g();r(4),x(s(5,4,e.label)),r(3),x(s(8,6,e.description)),r(3),o("ngIf",1<e.permissions.length&&!n.readonly),r(),o("ngForOf",e.permissions)}}var _i=(()=>{class t{constructor(){this.readonly=!1,this.permissionChange=new Ke}ngOnInit(){this.buildGrid()}setPermission(e,n){this.readonly||this.permissionChange.emit({permission:e,value:n})}toggleAll(e){let n=e.some(i=>!this.activePermissions.includes(i.name));for(let i of e)this.permissionChange.emit({permission:i.name,value:n})}buildGrid(){let e=new Map,n=[],i=/^(Create|Read|Update|Delete)([a-zA-Z]+)$/;for(let d of this.permissionDefinitions)if(i.test(d.name)){let P=d.name.match(i)?.[2];if(P){let Ve=e.get(P);Ve?Ve.push(d):e.set(P,[d])}}else d.assignable&&n.push(d);this.gridData=[...n.map(d=>({label:d.name,description:d.description,permissions:[d]})),...Array.from(e.entries()).map(([d,h])=>({label:d,description:this.extractCrudDescription(h[0]),permissions:h}))]}extractCrudDescription(e){return e.description.replace(/Grants permission to [\w]+/,"Grants permissions on")}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-permission-grid"]],inputs:{permissionDefinitions:"permissionDefinitions",activePermissions:"activePermissions",readonly:"readonly"},outputs:{permissionChange:"permissionChange"},standalone:!1,decls:3,vars:1,consts:[[1,"table"],[4,"ngFor","ngForOf"],[1,"permission-group","left"],["class","button-small",3,"click",4,"ngIf"],[1,"button-small",3,"click"],["size","small",3,"selectedChange","title","label","disabled","selected"]],template:function(n,i){n&1&&(l(0,"table",0)(1,"tbody"),u(2,Gr,12,8,"tr",1),m()()),n&2&&(r(2),o("ngForOf",i.gridData))},dependencies:[U,E,no,I],styles:[`[_nghost-%COMP%]{display:block}td.permission-group[_ngcontent-%COMP%]{max-width:300px;background-color:var(--color-component-bg-200)}
/*# sourceMappingURL=permission-grid.component-HDTX3IWG.css.map */`],changeDetection:0})}}return t})();var vi=()=>["CreateAdministrator","UpdateAdministrator"];function qr(t,p){if(t&1){let e=S();l(0,"button",21),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.create")," ")}}function Zr(t,p){if(t&1){let e=S();l(0,"button",21),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.update")," ")}}function Ur(t,p){t&1&&u(0,Zr,3,4,"button",22),t&2&&o("vdrIfPermissions","UpdateAdministrator")}function Hr(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",23),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function zr(t,p){t&1&&(l(0,"vdr-form-field",24),a(1,"translate"),c(2,"input",25),m()),t&2&&o("label",s(1,1,"settings.password"))}function jr(t,p){t&1&&(l(0,"vdr-form-field",26),a(1,"translate"),c(2,"input",25),m()),t&2&&o("label",s(1,2,"settings.password"))("readOnlyToggle",!0)}function Wr(t,p){if(t&1&&(l(0,"vdr-card",27),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",28),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}function Kr(t,p){if(t&1){let e=S();l(0,"li",29)(1,"button",30),_("click",function(){let i=b(e).$implicit,d=g();return F(d.selectedChannelId=i.channelId)}),f(2),a(3,"channelCodeToLabel"),a(4,"translate"),m()()}if(t&2){let e=p.$implicit,n=g();r(),Pt("active",n.selectedChannelId===e.channelId),o("id",e.channelId),ei("aria-selected",n.selectedChannelId===e.channelId),r(),C(" ",s(4,7,s(3,5,e.channelCode))," ")}}var od=D`
    query GetAdministratorDetail($id: ID!) {
        administrator(id: $id) {
            ...Administrator
        }
    }
    ${Qi}
`,To=(()=>{class t extends ue{getAvailableChannels(){return Object.values(this.selectedRolePermissions)}constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",R.required],firstName:["",R.required],lastName:["",R.required],password:[""],roles:[[]],customFields:this.formBuilder.group(Pe(this.customFields))}),this.selectedRoles=[],this.selectedRolePermissions={},this.selectedChannelId=null}ngOnInit(){this.init(),this.allRoles$=this.dataService.administrator.getRoles(999).mapStream(e=>e.roles.items.filter(n=>n.code!==bo.CUSTOMER_ROLE_CODE)),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(y.CreateAdministrator)&&!e.permissions.includes(y.UpdateAdministrator)){let n=this.detailForm.get("roles");n&&n.disable()}}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnDestroy(){this.destroy()}rolesChanged(e){this.buildPermissionsMap()}getPermissionsForSelectedChannel(){function e(i){return Object.entries(i).filter(([d,h])=>h).map(([d,h])=>d)}if(this.selectedChannelId&&this.selectedRolePermissions[this.selectedChannelId]){let d=this.selectedRolePermissions[this.selectedChannelId].permissions;return e(d)}let n=Object.values(this.selectedRolePermissions);return 0<n.length?(this.selectedChannelId=n[0].channelId,e(n[0].permissions)):[]}create(){let{emailAddress:e,firstName:n,lastName:i,password:d,customFields:h,roles:P}=this.detailForm.value;if(!e||!n||!i||!d)return;let Ve={emailAddress:e,firstName:n,lastName:i,password:d,customFields:h,roleIds:P?.map($e=>$e.id).filter(Fo.notNullOrUndefined)??[]};this.dataService.administrator.createAdministrator(Ve).subscribe($e=>{this.notificationService.success("common.notify-create-success",{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",$e.createAdministrator.id],{relativeTo:this.route})},$e=>{this.notificationService.error("common.notify-create-error",{entity:"Administrator"})})}save(){this.entity$.pipe(pe(1),te(({id:e})=>{let n=this.detailForm.value,i={id:e,emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,password:n.password,customFields:n.customFields,roleIds:n.roles?.map(d=>d.id)};return this.dataService.administrator.updateAdministrator(i)})).subscribe(e=>{this.notificationService.success("common.notify-update-success",{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error("common.notify-update-error",{entity:"Administrator"})})}setFormValues(e,n){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName,roles:e.user.roles}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e);let i=this.detailForm.get("password");i&&(e.id?i.setValidators([]):i.setValidators([R.required])),this.buildPermissionsMap()}buildPermissionsMap(){let e=this.detailForm.get("roles");if(e){let n=e.value,i=new Map,d=new Map;for(let h of n??[])for(let P of h.channels){let $e=i.get(P.id)||new Set;h.permissions.forEach(Ut=>$e.add(Ut)),i.set(P.id,$e),d.set(P.id,P.code)}this.selectedRolePermissions={};for(let h of Array.from(i.keys())){let P=i.get(h),Ve={};for(let $e of this.serverConfigService.getPermissionDefinitions())Ve[$e.name]=P.has($e.name);this.selectedRolePermissions[h]={channelId:h,channelCode:d.get(h),permissions:Ve}}}}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-admin-detail"]],standalone:!1,features:[A],decls:45,vars:53,consts:[["updateButton",""],["locationId","administrator-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","emailAddress",1,"form-grid-span",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress",3,"readonly"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName",3,"readonly"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName",3,"readonly"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle",4,"ngIf"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","administrator-detail",3,"entity$","detailForm"],[3,"title"],["formControlName","roles","bindLabel","description",3,"change","items","multiple","hideSelected"],["role","tablist",1,"nav","mt-2"],["role","presentation","class","nav-item",4,"ngFor","ngForOf"],[3,"activePermissions","permissionDefinitions","readonly"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["for","password",3,"label","readOnlyToggle"],["formGroupName","customFields",3,"title"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"],["role","presentation",1,"nav-item"],["type","button",1,"btn","btn-link","nav-link",3,"click","id"]],template:function(n,i){if(n&1){let d=S();l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,qr,3,4,"button",2),a(6,"async"),u(7,Ur,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,Hr,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),c(20,"input",7),a(21,"hasPermission"),m(),l(22,"vdr-form-field",8),a(23,"translate"),c(24,"input",9),a(25,"hasPermission"),m(),l(26,"vdr-form-field",10),a(27,"translate"),c(28,"input",11),a(29,"hasPermission"),m(),u(30,zr,3,3,"vdr-form-field",12),a(31,"async"),u(32,jr,3,4,"vdr-form-field",13),a(33,"async"),a(34,"hasPermission"),m()(),u(35,Wr,3,5,"vdr-card",14),c(36,"vdr-custom-detail-component-host",15),m()(),l(37,"vdr-page-block")(38,"vdr-card",16),a(39,"translate"),l(40,"ng-select",17),a(41,"async"),_("change",function(P){return b(d),F(i.rolesChanged(P))}),m(),l(42,"ul",18),u(43,Kr,5,9,"li",19),m(),c(44,"vdr-permission-grid",20),m()()()}if(n&2){let d=ie(8);r(5),o("ngIf",s(6,23,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,25,i.entity$)),r(5),o("label",s(19,27,"settings.email-address-or-identifier")),r(2),o("readonly",!s(21,29,q(49,vi))),r(2),o("label",s(23,31,"settings.first-name")),r(2),o("readonly",!s(25,33,q(50,vi))),r(2),o("label",s(27,35,"settings.last-name")),r(2),o("readonly",!s(29,37,q(51,vi))),r(2),o("ngIf",s(31,39,i.isNew$)),r(2),o("ngIf",!s(33,41,i.isNew$)&&s(34,43,q(52,vi))),r(3),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm),r(2),o("title",s(39,45,"settings.roles")),r(2),o("items",s(41,47,i.allRoles$))("multiple",!0)("hideSelected",!0),r(3),o("ngForOf",i.getAvailableChannels()),r(),o("activePermissions",i.getPermissionsForSelectedChannel())("permissionDefinitions",i.permissionDefinitions)("readonly",!0)}},dependencies:[U,E,re,Q,Y,oe,ae,se,he,Yn,N,V,w,$,le,J,O,M,_e,Se,L,ve,ye,be,me,_i,B,I,Fe,bt],styles:[`ul.nav[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden}
/*# sourceMappingURL=admin-detail.component-5O5CQ255.css.map */`],changeDetection:0})}}return t})();var So=Ee({location:"administrator-list",requiresPermission:t=>t.includes(y.DeleteAdministrator),getItemName:t=>t.firstName+" "+t.lastName,bulkDelete:(t,p)=>t.administrator.deleteAdministrators(p).pipe(Z(e=>e.deleteAdministrators))});var Qr=()=>["CreateAdministrator"],Yr=()=>["./","create"],Xr=t=>["./",t];function Jr(t,p){t&1&&(l(0,"a",12),c(1,"clr-icon",13),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Yr)),r(2),C(" ",s(3,2,"admin.create-new-administrator")," "))}function ea(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function ta(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function ia(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function na(t,p){if(t&1&&(l(0,"a",14)(1,"span"),f(2),m(),c(3,"clr-icon",15),m()),t&2){let e=p.item;o("routerLink",W(3,Xr,e.id)),r(2),Lt("",e.firstName," ",e.lastName,"")}}function oa(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.emailAddress," ")}}function ra(t,p){if(t&1&&(l(0,"vdr-chip"),f(1),m()),t&2){let e=p.$implicit;r(),x(e.description)}}function aa(t,p){if(t&1&&u(0,ra,2,1,"vdr-chip",16),t&2){let e=p.item;o("ngForOf",e.user.roles)}}function sa(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",17),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var dd=D`
    query GetAdministratorList($options: AdministratorListOptions) {
        administrators(options: $options) {
            items {
                ...AdministratorListItem
            }
            totalItems
        }
    }
    fragment AdministratorListItem on Administrator {
        id
        createdAt
        updatedAt
        firstName
        lastName
        emailAddress
        user {
            id
            identifier
            lastLogin
            roles {
                id
                createdAt
                updatedAt
                code
                description
            }
        }
    }
`,Do=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="administrator-list",this.customFields=this.getCustomFieldConfig("Administrator"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"firstName",type:{kind:"text"},label:"settings.first-name",filterField:"firstName"}).addFilter({name:"lastName",type:{kind:"text"},label:"settings.last-name",filterField:"lastName"}).addFilter({name:"emailAddress",type:{kind:"text"},label:"settings.email-address",filterField:"emailAddress"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"lastName"}).addSort({name:"emailAddress"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:en,getItems:e=>e.administrators,setVariables:(e,n)=>this.createSearchQuery(e,n,this.searchTermControl.value),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}createSearchQuery(e,n,i){let d={},h=At.AND;return i&&(d={emailAddress:{contains:i},firstName:{contains:i},lastName:{contains:i}},h=At.OR),{options:{skip:e,take:n,filter:H(H({},d??{}),this.filters.createFilterInput()),sort:this.sorts.createSortInput(),filterOperator:h}}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-administrator-list"]],standalone:!1,features:[A],decls:34,vars:49,consts:[["locationId","administrator-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","administrator-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","email-address",3,"heading","sort"],["id","roles",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngFor","ngForOf"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,Jr,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,ea,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,ta,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,ia,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,na,4,5,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,oa,1,1,"ng-template"),m(),l(30,"vdr-dt2-column",10),a(31,"translate"),u(32,aa,1,1,"ng-template"),m(),u(33,sa,1,2,"vdr-dt2-custom-field-column",11),m()),n&2&&(r(5),o("vdrIfPermissions",q(48,Qr)),r(2),o("id",i.dataTableListId)("items",s(8,26,i.items$))("itemsPerPage",s(9,28,i.itemsPerPage$))("totalItems",s(10,30,i.totalItems$))("currentPage",s(11,32,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,34,"catalog.filter-by-name")),r(2),o("heading",s(16,36,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,42,"common.name"))("optional",!1)("sort",i.sorts.get("lastName")),r(3),o("heading",s(28,44,"settings.email-address"))("sort",i.sorts.get("emailAddress")),r(3),o("heading",s(31,46,"settings.roles")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,ge,N,V,w,$,qe,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],styles:[`.search-input[_ngcontent-%COMP%]{min-width:300px}
/*# sourceMappingURL=administrator-list.component-P6IXVVAP.css.map */`]})}}return t})();var Pi=ut(Wt());var pa=()=>["SuperAdmin","UpdateChannel"];function da(t,p){if(t&1){let e=S();l(0,"button",32),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.create")," ")}}function ca(t,p){if(t&1){let e=S();l(0,"button",32),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.update")," ")}}function ua(t,p){t&1&&u(0,ca,3,4,"button",33),t&2&&o("vdrIfPermissions",q(1,pa))}function fa(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",34),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function ga(t,p){if(t&1&&(l(0,"vdr-form-field",35),a(1,"translate"),c(2,"input",36),a(3,"hasPermission"),m()),t&2){let e=g();o("label",s(1,2,"common.code")),r(2),o("readonly",!s(3,4,e.updatePermission))}}function ha(t,p){if(t&1&&(l(0,"vdr-form-item",37),a(1,"translate"),f(2),a(3,"channelCodeToLabel"),a(4,"translate"),m()),t&2){let e=g();o("label",s(1,2,"common.code")),r(2),C(" ",s(4,6,s(3,4,e.entity==null?null:e.entity.code))," ")}}function Ca(t,p){if(t&1&&(l(0,"option",38),f(1),m()),t&2){let e=p.$implicit;o("value",e.id),r(),C(" ",e.name," ")}}function _a(t,p){if(t&1&&(l(0,"option",38),f(1),a(2,"localeLanguageName"),a(3,"uppercase"),m()),t&2){let e=p.$implicit;o("value",e),r(),Lt(" ",s(2,3,e)," (",s(3,5,e),") ")}}function va(t,p){if(t&1&&(l(0,"option",38),f(1),a(2,"localeCurrencyName"),m()),t&2){let e=p.$implicit;o("value",e),r(),C(" ",s(2,2,e)," ")}}function ya(t,p){t&1&&(l(0,"clr-alert",39)(1,"clr-alert-item")(2,"span",40),f(3),a(4,"translate"),m()()()),t&2&&(o("clrAlertClosable",!1),r(3),C(" ",s(4,2,"error.no-default-tax-zone-set")," "))}function ba(t,p){t&1&&(l(0,"clr-alert",39)(1,"clr-alert-item")(2,"span",40),f(3),a(4,"translate"),m()()()),t&2&&(o("clrAlertClosable",!1),r(3),C(" ",s(4,2,"error.no-default-shipping-zone-set")," "))}function Fa(t,p){if(t&1&&(l(0,"vdr-card",41),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",42),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Fd=D`
    query GetChannelDetail($id: ID!) {
        channel(id: $id) {
            ...Channel
        }
    }
    ${ai}
`,Io=(()=>{class t extends ue{constructor(e,n,i,d,h){super(),this.serverConfigService=e,this.changeDetector=n,this.dataService=i,this.formBuilder=d,this.notificationService=h,this.DEFAULT_CHANNEL_CODE=Pi.DEFAULT_CHANNEL_CODE,this.customFields=this.getCustomFieldConfig("Channel"),this.detailForm=this.formBuilder.group({code:["",R.required],token:["",R.required],pricesIncludeTax:[!1],availableLanguageCodes:[[]],availableCurrencyCodes:[[]],defaultCurrencyCode:["",R.required],defaultShippingZoneId:["",R.required],defaultLanguageCode:[void 0,R.required],defaultTaxZoneId:["",R.required],sellerId:["",R.required],customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.SuperAdmin,y.UpdateChannel,y.CreateChannel]}ngOnInit(){this.init(),this.sellers$=this.dataService.settings.getSellerList().mapSingle(e=>e.sellers.items),this.availableLanguageCodes$=this.serverConfigService.getAvailableLanguages(),this.detailForm.controls.availableCurrencyCodes.valueChanges.pipe(St(this.destroy$)).subscribe(e=>{if(e){let n=this.detailForm.controls.defaultCurrencyCode.value;n&&!e.includes(n)&&this.detailForm.controls.defaultCurrencyCode.setValue(e[0])}}),this.detailForm.controls.availableLanguageCodes.valueChanges.pipe(St(this.destroy$)).subscribe(e=>{if(e){let n=this.detailForm.controls.defaultLanguageCode.value;n&&!e.includes(n)&&this.detailForm.controls.defaultLanguageCode.setValue(e[0])}})}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;let{code:e,token:n,defaultLanguageCode:i,pricesIncludeTax:d,defaultCurrencyCode:h,defaultShippingZoneId:P,defaultTaxZoneId:Ve,customFields:$e,sellerId:Ut}=this.detailForm.value;if(!e||!n||!i||!h||!P||!Ve)return;let Kt={code:e,token:n,defaultLanguageCode:i,pricesIncludeTax:!!d,defaultCurrencyCode:h,defaultShippingZoneId:P,defaultTaxZoneId:Ve,customFields:$e,sellerId:Ut};this.dataService.settings.createChannel(Kt).pipe(te(({createChannel:Ft})=>this.dataService.auth.currentUser().single$.pipe(Z(({me:Ti})=>({me:Ti,createChannel:Ft})))),te(({me:Ft,createChannel:Ti})=>this.dataService.client.updateUserChannels(Ft.channels).pipe(Z(()=>Ti)))).subscribe(Ft=>{switch(Ft.__typename){case"Channel":this.notificationService.success("common.notify-create-success",{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",Ft.id],{relativeTo:this.route});break;case"LanguageNotAvailableError":this.notificationService.error(Ft.message);break}})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,code:e.code,token:e.token,pricesIncludeTax:e.pricesIncludeTax,availableLanguageCodes:e.availableLanguageCodes,availableCurrencyCodes:e.availableCurrencyCodes,defaultCurrencyCode:e.defaultCurrencyCode,defaultShippingZoneId:e.defaultShippingZoneId,defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZoneId,customFields:e.customFields,sellerId:e.sellerId};return this.dataService.settings.updateChannel(i)})).subscribe(({updateChannel:n})=>{switch(n.__typename){case"Channel":this.notificationService.success("common.notify-update-success",{entity:"Channel"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck();break;case"LanguageNotAvailableError":this.notificationService.error(n.message)}})}setFormValues(e,n){if(this.detailForm.patchValue({code:e.code,token:e.token||this.generateToken(),pricesIncludeTax:e.pricesIncludeTax,availableLanguageCodes:e.availableLanguageCodes,availableCurrencyCodes:e.availableCurrencyCodes,defaultCurrencyCode:e.defaultCurrencyCode,defaultShippingZoneId:e.defaultShippingZone?.id??"",defaultLanguageCode:e.defaultLanguageCode,defaultTaxZoneId:e.defaultTaxZone?.id??"",sellerId:e.seller?.id??""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e),e.code===Pi.DEFAULT_CHANNEL_CODE){let i=this.detailForm.get("code");i&&i.disable()}}generateToken(){return Array.from(crypto.getRandomValues(new Uint8Array(10))).map(e=>e.toString(16).padStart(2,"0")).join("")}static{this.\u0275fac=function(n){return new(n||t)(v(wn),v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-channel-detail"]],standalone:!1,features:[A],decls:70,vars:74,consts:[["updateButton",""],["locationId","channel-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["class","form-grid-span","for","code",3,"label",4,"ngIf"],["class","form-grid-span",3,"label",4,"ngIf"],["for","token",3,"label"],["id","token","type","text","formControlName","token",3,"readonly"],["for","sellerId",3,"label"],["name","sellerId","formControlName","sellerId",3,"vdrDisabled"],["selected","","value","",2,"display","none"],[3,"value",4,"ngFor","ngForOf"],["for","availableLanguageCodes",3,"label"],["formControlName","availableLanguageCodes",3,"languageCodes"],["for","availableCurrencyCodes",3,"label"],["formControlName","availableCurrencyCodes"],[3,"title"],["for","defaultLanguage",3,"label"],["name","defaultLanguageCode","formControlName","defaultLanguageCode",3,"vdrDisabled"],["for","defaultCurrency",3,"label"],["name","defaultCurrencyCode","formControlName","defaultCurrencyCode",3,"vdrDisabled"],["for","defaultTaxZoneId",3,"label"],["formControlName","defaultTaxZoneId",3,"vdrDisabled"],["clrAlertType","danger",3,"clrAlertClosable",4,"ngIf"],["for","defaultShippingZoneId",3,"label"],["name","defaultShippingZoneId","formControlName","defaultShippingZoneId",3,"vdrDisabled"],["for","pricesIncludeTax",3,"label"],["type","checkbox","clrToggle","","id","pricesIncludeTax","formControlName","pricesIncludeTax",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","channel-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["for","code",1,"form-grid-span",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],[1,"form-grid-span",3,"label"],[3,"value"],["clrAlertType","danger",3,"clrAlertClosable"],[1,"alert-text"],["formGroupName","customFields",3,"title"],["entityName","Channel",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,da,3,4,"button",2),a(6,"async"),u(7,ua,1,2,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,fa,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5),u(18,ga,4,6,"vdr-form-field",6)(19,ha,5,8,"vdr-form-item",7),l(20,"vdr-form-field",8),a(21,"translate"),c(22,"input",9),a(23,"hasPermission"),m(),l(24,"vdr-form-field",10),a(25,"translate"),l(26,"select",11),a(27,"hasPermission"),c(28,"option",12),u(29,Ca,2,2,"option",13),a(30,"async"),m()(),l(31,"vdr-form-field",14),a(32,"translate"),c(33,"vdr-language-code-selector",15),a(34,"async"),m(),l(35,"vdr-form-field",16),a(36,"translate"),c(37,"vdr-currency-code-selector",17),m()()(),l(38,"vdr-card",18),a(39,"translate"),l(40,"div",5)(41,"vdr-form-field",19),a(42,"translate"),l(43,"select",20),a(44,"hasPermission"),u(45,_a,4,7,"option",13),m()(),l(46,"vdr-form-field",21),a(47,"translate"),l(48,"select",22),a(49,"hasPermission"),u(50,va,3,4,"option",13),m()(),l(51,"div")(52,"vdr-form-field",23),a(53,"translate"),c(54,"vdr-zone-selector",24),a(55,"hasPermission"),m(),u(56,ya,5,4,"clr-alert",25),m(),l(57,"div")(58,"vdr-form-field",26),a(59,"translate"),c(60,"vdr-zone-selector",27),a(61,"hasPermission"),m(),u(62,ba,5,4,"clr-alert",25),m(),l(63,"vdr-form-field",28),a(64,"translate"),l(65,"clr-toggle-wrapper"),c(66,"input",29),a(67,"hasPermission"),m()()()(),u(68,Fa,3,5,"vdr-card",30),c(69,"vdr-custom-detail-component-host",31),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,32,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,34,i.entity$)),r(5),o("ngIf",(i.entity==null?null:i.entity.code)!==i.DEFAULT_CHANNEL_CODE),r(),o("ngIf",(i.entity==null?null:i.entity.code)===i.DEFAULT_CHANNEL_CODE),r(),o("label",s(21,36,"settings.channel-token")),r(2),o("readonly",!s(23,38,i.updatePermission)),r(2),o("label",s(25,40,"common.seller")),r(2),o("vdrDisabled",!s(27,42,i.updatePermission)),r(3),o("ngForOf",s(30,44,i.sellers$)),r(2),o("label",s(32,46,"common.available-languages")),r(2),o("languageCodes",s(34,48,i.availableLanguageCodes$)),r(2),o("label",s(36,50,"common.available-currencies")),r(3),o("title",s(39,52,"settings.defaults")),r(3),o("label",s(42,54,"common.default-language")),r(2),o("vdrDisabled",!s(44,56,i.updatePermission)),r(2),o("ngForOf",i.detailForm.value.availableLanguageCodes),r(),o("label",s(47,58,"settings.default-currency")),r(2),o("vdrDisabled",!s(49,60,i.updatePermission)),r(2),o("ngForOf",i.detailForm.value.availableCurrencyCodes),r(2),o("label",s(53,62,"settings.default-tax-zone")),r(2),o("vdrDisabled",!s(55,64,i.updatePermission)),r(2),o("ngIf",i.detailForm.value.code&&!i.detailForm.value.defaultTaxZoneId),r(2),o("label",s(59,66,"settings.default-shipping-zone")),r(2),o("vdrDisabled",!s(61,68,i.updatePermission)),r(2),o("ngIf",i.detailForm.value.code&&!i.detailForm.value.defaultShippingZoneId),r(),o("label",s(64,70,"settings.prices-include-tax")),r(3),o("vdrDisabled",!s(67,72,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[Hn,zn,jn,Xe,Ye,U,E,re,vt,yt,Q,Qe,_t,Y,oe,ae,se,he,N,V,w,$,le,J,ro,O,M,Ge,_e,Se,L,ve,ye,be,me,hi,co,Ci,B,Wi,I,Xn,Fe,bt,Jn],styles:[`clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}
/*# sourceMappingURL=channel-detail.component-ACJEYPAR.css.map */`],changeDetection:0})}}return t})();var xo=Ee({location:"channel-list",requiresPermission:t=>t.includes(y.SuperAdmin)||t.includes(y.DeleteChannel),getItemName:t=>t.code,bulkDelete:(t,p)=>t.settings.deleteChannels(p).pipe(te(({deleteChannels:e})=>t.auth.currentUser().single$.pipe(Z(({me:n})=>({me:n,deleteChannels:e})))),te(({me:e,deleteChannels:n})=>t.client.updateUserChannels(e.channels).pipe(Z(()=>n))))});var Po=ut(Wt());var Ta=()=>["SuperAdmin","CreateChannel"],Sa=()=>["./","create"],Da=t=>["./",t];function Ia(t,p){t&1&&(l(0,"a",11),c(1,"clr-icon",12),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Sa)),r(2),C(" ",s(3,2,"settings.create-new-channel")," "))}function xa(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Pa(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Ba(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function ka(t,p){if(t&1&&(l(0,"a",13)(1,"span"),f(2),a(3,"channelCodeToLabel"),a(4,"translate"),m(),c(5,"clr-icon",14),m()),t&2){let e=p.item;o("routerLink",W(6,Da,e.id)),r(2),x(s(4,4,s(3,2,e.code)))}}function La(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.token," ")}}function Aa(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",15),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var Bd=D`
    query GetChannelList($options: ChannelListOptions) {
        channels(options: $options) {
            items {
                ...Channel
            }
            totalItems
        }
    }
    ${ai}
`,Bo=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="channel-list",this.customFields=this.getCustomFieldConfig("Channel"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"code",type:{kind:"text"},label:"common.code",filterField:"code"}).addFilter({name:"token",type:{kind:"text"},label:"settings.channel-token",filterField:"token"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"code"}).addSort({name:"token"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:nn,getItems:e=>e.channels,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({code:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}isDefaultChannel(e){return e===Po.DEFAULT_CHANNEL_CODE}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-channel-list"]],standalone:!1,features:[A],decls:31,vars:46,consts:[["locationId","channel-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","channel-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","code",3,"heading","optional","sort"],["id","channel-token",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,Ia,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,xa,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,Pa,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,Ba,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,ka,6,8,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,La,1,1,"ng-template"),m(),u(30,Aa,1,2,"vdr-dt2-custom-field-column",10),m()),n&2&&(r(5),o("vdrIfPermissions",q(45,Ta)),r(2),o("id",i.dataTableListId)("items",s(8,25,i.items$))("itemsPerPage",s(9,27,i.itemsPerPage$))("totalItems",s(10,29,i.totalItems$))("currentPage",s(11,31,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,33,"catalog.filter-by-name")),r(2),o("heading",s(16,35,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,37,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,39,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,41,"common.code"))("optional",!1)("sort",i.sorts.get("code")),r(3),o("heading",s(28,43,"settings.channel-token"))("sort",i.sorts.get("token")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,ge,N,V,w,$,O,M,Te,xe,De,Ie,Re,L,B,I,bt,Ce],encapsulation:2,changeDetection:0})}}return t})();function Ea(t,p){if(t&1){let e=S();l(0,"button",15),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.create")," ")}}function Ma(t,p){if(t&1){let e=S();l(0,"button",15),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.update")," ")}}function wa(t,p){if(t&1&&u(0,Ma,3,4,"button",16),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function Na(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",17),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function Ra(t,p){if(t&1&&(l(0,"vdr-card",18),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",19),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Rd=D`
    query GetCountryDetail($id: ID!) {
        country(id: $id) {
            ...Country
        }
    }
    ${An}
`,ko=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Region"),this.detailForm=this.formBuilder.group({code:["",R.required],name:["",R.required],enabled:[!0],customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.UpdateSettings,y.UpdateCountry]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}create(){if(!this.detailForm.dirty)return;let e=this.detailForm.value,n=Dt({translatable:{id:"",createdAt:"",updatedAt:"",code:"",name:"",enabled:!1,translations:[]},updatedFields:e,languageCode:this.languageCode,customFieldConfig:this.customFields,defaultTranslation:{name:e.name??"",languageCode:this.languageCode}});this.dataService.settings.createCountry(n).subscribe(i=>{this.notificationService.success("common.notify-create-success",{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",i.createCountry.id],{relativeTo:this.route})},i=>{this.notificationService.error("common.notify-create-error",{entity:"Country"})})}save(){tt(this.entity$,this.languageCode$).pipe(pe(1),te(([e,n])=>{let i=this.detailForm.value,d=Dt({translatable:e,updatedFields:i,customFieldConfig:this.customFields,languageCode:n,defaultTranslation:{name:i.name??"",languageCode:n}});return this.dataService.settings.updateCountry(d)})).subscribe(e=>{this.notificationService.success("common.notify-update-success",{entity:"Country"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error("common.notify-update-error",{entity:"Country"})})}setFormValues(e,n){let i=$t(e,n);this.detailForm.patchValue({code:e.code,name:i?i.name:"",enabled:e.enabled}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,i)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-country-detail"]],standalone:!1,features:[A],decls:38,vars:38,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","country-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","code",3,"label"],["id","code","type","text","formControlName","code",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","country-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Region",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1){let d=S();l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),a(4,"async"),a(5,"async"),a(6,"async"),_("languageCodeChange",function(P){return b(d),F(i.setLanguage(P))}),m()(),l(7,"vdr-ab-right"),c(8,"vdr-action-bar-items",2),u(9,Ea,3,4,"button",3),a(10,"async"),u(11,wa,1,1,"ng-template",null,0,ne),c(13,"vdr-action-bar-dropdown-menu",2),m()()(),l(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar")(17,"vdr-card")(18,"vdr-form-field",5),a(19,"translate"),l(20,"clr-toggle-wrapper"),c(21,"input",6),a(22,"hasPermission"),m()()(),u(23,Na,2,1,"vdr-card",7),a(24,"async"),m(),l(25,"vdr-page-block")(26,"vdr-card")(27,"div",8)(28,"vdr-form-field",9),a(29,"translate"),c(30,"input",10),a(31,"hasPermission"),m(),l(32,"vdr-form-field",11),a(33,"translate"),c(34,"input",12),a(35,"hasPermission"),m()()(),u(36,Ra,3,5,"vdr-card",13),c(37,"vdr-custom-detail-component-host",14),m()()()}if(n&2){let d=ie(12);r(3),o("disabled",s(4,16,i.isNew$))("availableLanguageCodes",s(5,18,i.availableLanguages$))("currentLanguageCode",s(6,20,i.languageCode$)),r(6),o("ngIf",s(10,22,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(4),o("label",s(19,24,"common.enabled")),r(3),o("vdrDisabled",!s(22,26,i.updatePermission)),r(2),o("ngIf",s(24,28,i.entity$)),r(5),o("label",s(29,30,"common.name")),r(2),o("readonly",!s(31,32,i.updatePermission)),r(2),o("label",s(33,34,"common.code")),r(2),o("readonly",!s(35,36,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[Xe,Ye,E,re,Q,Qe,Y,oe,ae,se,he,N,V,w,$,le,J,Ze,O,M,Ge,_e,Se,L,ve,ye,be,me,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var Lo=Ee({location:"country-list",requiresPermission:t=>t.includes(y.DeleteSettings)||t.includes(y.DeleteCountry),getItemName:t=>t.name,bulkDelete:(t,p)=>t.settings.deleteCountries(p).pipe(Z(e=>e.deleteCountries))});var Oa=()=>["CreateSettings","CreateCountry"],Va=()=>["./","create"],$a=t=>["./",t];function Ga(t,p){t&1&&(l(0,"a",13),c(1,"clr-icon",14),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Va)),r(2),C(" ",s(3,2,"settings.create-new-country")," "))}function qa(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Za(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Ua(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function Ha(t,p){if(t&1&&(l(0,"a",15)(1,"span"),f(2),m(),c(3,"clr-icon",16),m()),t&2){let e=p.item;o("routerLink",W(2,$a,e.id)),r(2),x(e.name)}}function za(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.code," ")}}function ja(t,p){t&1&&(l(0,"vdr-chip",19),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.enabled")))}function Wa(t,p){t&1&&(l(0,"vdr-chip",20),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.disabled")))}function Ka(t,p){if(t&1&&u(0,ja,3,3,"vdr-chip",17)(1,Wa,3,3,"vdr-chip",18),t&2){let e=p.item;o("ngIf",e.enabled),r(),o("ngIf",!e.enabled)}}function Qa(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",21),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var Ud=D`
    query GetCountryList($options: CountryListOptions) {
        countries(options: $options) {
            items {
                ...CountryListItem
            }
            totalItems
        }
    }
    fragment CountryListItem on Country {
        id
        createdAt
        updatedAt
        code
        name
        type
        enabled
    }
`,Ao=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="country-list",this.customFields=this.getCustomFieldConfig("Region"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:"common.code",filterField:"code"}).addFilter({name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("name","ASC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:ni,getItems:e=>e.countries,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-country-list"]],standalone:!1,features:[A],decls:37,vars:55,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","country-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","country-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),a(4,"async"),a(5,"async"),_("languageCodeChange",function(h){return i.setLanguage(h)}),m()(),l(6,"vdr-ab-right"),c(7,"vdr-action-bar-items",1),u(8,Ga,4,5,"a",2),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"vdr-data-table-2",3),a(11,"async"),a(12,"async"),a(13,"async"),a(14,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),a(17,"translate"),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,qa,1,1,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,Za,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,Ua,2,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,Ha,4,4,"ng-template"),m(),l(30,"vdr-dt2-column",10),a(31,"translate"),u(32,za,1,1,"ng-template"),m(),l(33,"vdr-dt2-column",11),a(34,"translate"),u(35,Ka,2,2,"ng-template"),m(),u(36,Qa,1,2,"vdr-dt2-custom-field-column",12),m()),n&2&&(r(3),o("availableLanguageCodes",s(4,28,i.availableLanguages$))("currentLanguageCode",s(5,30,i.contentLanguage$)),r(5),o("vdrIfPermissions",q(54,Oa)),r(2),o("id",i.dataTableListId)("items",s(11,32,i.items$))("itemsPerPage",s(12,34,i.itemsPerPage$))("totalItems",s(13,36,i.totalItems$))("currentPage",s(14,38,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(17,40,"catalog.filter-by-name")),r(2),o("heading",s(19,42,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(22,44,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(25,46,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(28,48,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(31,50,"common.code"))("sort",i.sorts.get("code")),r(3),o("heading",s(34,52,"common.enabled")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,E,ge,N,V,w,$,qe,Ze,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],styles:[`.search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}
/*# sourceMappingURL=country-list.component-5HHLTXTB.css.map */`],changeDetection:0})}}return t})();function Ya(t,p){if(t&1){let e=S();l(0,"button",12),_("click",function(){b(e);let i=g();return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.update")," ")}}function Xa(t,p){if(t&1&&(l(0,"vdr-card",13),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",14),a(3,"hasPermission"),m()),t&2){let e=g();o("title",s(1,4,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!s(3,6,e.updatePermission))}}var Yd=D`
    query GetGlobalSettingsDetail {
        globalSettings {
            ...GlobalSettingsDetail
        }
    }
    fragment GlobalSettingsDetail on GlobalSettings {
        id
        createdAt
        updatedAt
        availableLanguages
        trackInventory
        outOfStockThreshold
    }
`,Eo=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("GlobalSettings"),this.detailForm=this.formBuilder.group({availableLanguages:[[]],trackInventory:!1,outOfStockThreshold:[0,R.required],customFields:this.formBuilder.group(Pe(this.customFields))}),this.languageCodes=Object.values(Xi),this.updatePermission=[y.UpdateSettings,y.UpdateGlobalSettings]}ngOnInit(){this.init(),this.dataService.client.userStatus().single$.subscribe(({userStatus:e})=>{if(!e.permissions.includes(y.UpdateSettings)){let n=this.detailForm.get("availableLanguages");n&&n.disable()}})}ngOnDestroy(){this.destroy()}save(){this.detailForm.dirty&&this.dataService.settings.updateGlobalSettings(this.detailForm.value).pipe(Qt(({updateGlobalSettings:e})=>{switch(e.__typename){case"GlobalSettings":this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.notificationService.success("common.notify-update-success",{entity:"Settings"});break;case"ChannelDefaultLanguageError":this.notificationService.error(e.message)}}),ft(()=>this.serverConfigService.refreshGlobalSettings()),Yt(this.dataService.client.uiState().single$)).subscribe(([{globalSettings:e},{uiState:n}])=>{let i=e.availableLanguages;i.length&&!i.includes(n.contentLanguage)&&this.dataService.client.setContentLanguage(i[0]).subscribe()})}setFormValues(e,n){this.detailForm.patchValue({availableLanguages:e.availableLanguages,trackInventory:e.trackInventory,outOfStockThreshold:e.outOfStockThreshold}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-global-settings"]],standalone:!1,features:[A],decls:27,vars:30,consts:[["locationId","global-setting-detail"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[1,"form",3,"formGroup"],[1,"form-grid"],["for","availableLanguages",3,"label","tooltip"],["formControlName","availableLanguages",3,"languageCodes"],["for","outOfStockThreshold",3,"label","tooltip"],["id","outOfStockThreshold","type","number","formControlName","outOfStockThreshold",3,"readonly"],["for","enabled",3,"label","tooltip"],["type","checkbox","clrToggle","","name","enabled","formControlName","trackInventory",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","global-settings-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["formGroupName","customFields",3,"title"],["entityName","GlobalSettings",3,"customFields","customFieldsFormGroup","readonly"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-right"),c(3,"vdr-action-bar-items",0),u(4,Ya,3,4,"button",1),c(5,"vdr-action-bar-dropdown-menu",0),m()()(),l(6,"form",2)(7,"vdr-page-block")(8,"vdr-card")(9,"div",3)(10,"vdr-form-field",4),a(11,"translate"),a(12,"translate"),c(13,"vdr-language-code-selector",5),m(),l(14,"vdr-form-field",6),a(15,"translate"),a(16,"translate"),c(17,"input",7),a(18,"hasPermission"),m(),l(19,"vdr-form-field",8),a(20,"translate"),a(21,"translate"),l(22,"clr-toggle-wrapper"),c(23,"input",9),a(24,"hasPermission"),m()()()(),u(25,Xa,4,8,"vdr-card",10),c(26,"vdr-custom-detail-component-host",11),m()()),n&2&&(r(4),o("vdrIfPermissions",i.updatePermission),r(2),o("formGroup",i.detailForm),r(4),o("label",s(11,14,"common.available-languages"))("tooltip",s(12,16,"settings.global-available-languages-tooltip")),r(3),o("languageCodes",i.languageCodes),r(),o("label",s(15,18,"settings.global-out-of-stock-threshold"))("tooltip",s(16,20,"settings.global-out-of-stock-threshold-tooltip")),r(3),o("readonly",!s(18,22,i.updatePermission)),r(2),o("label",s(20,24,"settings.track-inventory-default"))("tooltip",s(21,26,"catalog.track-inventory-tooltip")),r(4),o("vdrDisabled",!s(24,28,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm))},dependencies:[Xe,Ye,E,re,Q,Et,Qe,Y,oe,ae,se,he,N,w,$,le,J,O,M,Ge,_e,Se,L,me,Ci,I,Fe],styles:[`ng-select .ng-value>span{margin:0!important}  ng-select .ng-arrow-wrapper .ng-arrow{margin:0!important}  ng-select .ng-select-container>span{margin:0!important}
/*# sourceMappingURL=global-settings.component-IPUNDFEF.css.map */`],changeDetection:0})}}return t})();var wo=ut(Ii());function os(t,p){if(t&1){let e=S();l(0,"button",19),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedHandler),r(),C(" ",s(2,2,"common.create")," ")}}function rs(t,p){if(t&1){let e=S();l(0,"button",19),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedHandler),r(),C(" ",s(2,2,"common.update")," ")}}function as(t,p){if(t&1&&u(0,rs,3,4,"button",20),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function ss(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",21),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function ls(t,p){if(t&1&&(l(0,"vdr-card",22),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",23),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}function ms(t,p){if(t&1){let e=S();l(0,"vdr-configurable-input",24),a(1,"hasPermission"),_("remove",function(){b(e);let i=g();return F(i.removeChecker())}),m()}if(t&2){let e=g();o("operation",e.selectedChecker)("operationDefinition",e.selectedCheckerDefinition)("readonly",!s(1,3,e.updatePermission))}}function ps(t,p){if(t&1){let e=S();l(0,"button",29),_("click",function(){let i=b(e).$implicit,d=g(2);return F(d.selectChecker(i))}),f(1),m()}if(t&2){let e=p.$implicit;r(),C(" ",e.description," ")}}function ds(t,p){if(t&1&&(l(0,"div")(1,"vdr-dropdown")(2,"button",25),c(3,"clr-icon",26),f(4),a(5,"translate"),m(),l(6,"vdr-dropdown-menu",27),u(7,ps,2,1,"button",28),m()()()),t&2){let e=g();r(4),C(" ",s(5,2,"common.select")," "),r(3),o("ngForOf",e.checkers)}}function cs(t,p){if(t&1){let e=S();l(0,"vdr-configurable-input",30),a(1,"hasPermission"),_("remove",function(){b(e);let i=g();return F(i.removeHandler())}),m()}if(t&2){let e=g();o("operation",e.selectedHandler)("operationDefinition",e.selectedHandlerDefinition)("readonly",!s(1,3,e.updatePermission))}}function us(t,p){if(t&1){let e=S();l(0,"button",29),_("click",function(){let i=b(e).$implicit,d=g(2);return F(d.selectHandler(i))}),f(1),m()}if(t&2){let e=p.$implicit;r(),C(" ",e.description," ")}}function fs(t,p){if(t&1&&(l(0,"div")(1,"vdr-dropdown")(2,"button",25),c(3,"clr-icon",26),f(4),a(5,"translate"),m(),l(6,"vdr-dropdown-menu",27),u(7,us,2,1,"button",28),m()()()),t&2){let e=g();r(4),C(" ",s(5,2,"common.select")," "),r(3),o("ngForOf",e.handlers)}}var oc=D`
    query GetPaymentMethodDetail($id: ID!) {
        paymentMethod(id: $id) {
            ...PaymentMethod
        }
    }
    ${En}
`,No=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("PaymentMethod"),this.detailForm=this.formBuilder.group({code:["",R.required],name:["",R.required],description:"",enabled:[!0,R.required],checker:{},handler:{},customFields:this.formBuilder.group(Pe(this.customFields))}),this.checkers=[],this.handlers=[],this.updatePermission=[y.UpdateSettings,y.UpdatePaymentMethod]}ngOnInit(){this.init(),this.dataService.settings.getPaymentMethodOperations().single$.subscribe(e=>{this.checkers=e.paymentMethodEligibilityCheckers,this.handlers=e.paymentMethodHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=e.paymentMethodEligibilityCheckers.find(n=>n.code===this.entity?.checker?.code),this.selectedHandlerDefinition=e.paymentMethodHandlers.find(n=>n.code===this.entity?.handler?.code)})}ngOnDestroy(){this.destroy()}updateCode(e,n){if(!e){let i=this.detailForm.get("code");i&&i.pristine&&i.setValue((0,wo.normalizeString)(n,"-"))}}selectChecker(e){this.selectedCheckerDefinition=e,this.selectedChecker=Nt(e);let n=this.detailForm.get("checker");n&&(n.clearValidators(),n.updateValueAndValidity({onlySelf:!0}),n.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectHandler(e){this.selectedHandlerDefinition=e,this.selectedHandler=Nt(e);let n=this.detailForm.get("handler");n&&(n.clearValidators(),n.updateValueAndValidity({onlySelf:!0}),n.patchValue(this.selectedHandler)),this.detailForm.markAsDirty()}removeChecker(){this.selectedChecker=null,this.detailForm.markAsDirty()}removeHandler(){this.selectedHandler=null,this.detailForm.markAsDirty()}create(){let e=this.selectedChecker,n=this.selectedHandler;if(!n)return;let i=this.getUpdatedPaymentMethod({id:"",createdAt:"",updatedAt:"",name:"",code:"",description:"",enabled:!0,checker:void 0,handler:void 0,translations:[]},this.detailForm,this.languageCode,n,e);this.dataService.settings.createPaymentMethod(i).subscribe(d=>{this.notificationService.success("common.notify-create-success",{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",d.createPaymentMethod.id],{relativeTo:this.route})},d=>{this.notificationService.error("common.notify-create-error",{entity:"PaymentMethod"})})}save(){let e=this.selectedChecker,n=this.selectedHandler;n&&tt(this.entity$,this.languageCode$).pipe(pe(1),te(([i,d])=>{let h=this.getUpdatedPaymentMethod(i,this.detailForm,d,n,e);return this.dataService.settings.updatePaymentMethod(h)})).subscribe(i=>{this.notificationService.success("common.notify-update-success",{entity:"PaymentMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},i=>{this.notificationService.error("common.notify-update-error",{entity:"PaymentMethod"})})}getUpdatedPaymentMethod(e,n,i,d,h){let P=Dt({translatable:e,updatedFields:n.value,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:e.name||"",description:e.description||""}});return ze(H({},P),{checker:h?gt(h,n.value.checker):null,handler:gt(d,n.value.handler)})}setFormValues(e,n){let i=$t(e,n);this.detailForm.patchValue({name:i?.name,code:e.code,description:i?.description,enabled:e.enabled,checker:e.checker||{},handler:e.handler||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(d=>ze(H({},d),{value:wt(d.value)}))}),this.selectedHandler||(this.selectedHandler=e.handler&&{code:e.handler.code,args:e.handler.args.map(d=>ze(H({},d),{value:wt(d.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e,i)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-payment-method-detail"]],standalone:!1,features:[A],decls:50,vars:57,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","payment-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","description",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",1,"form-grid-span",3,"readonly","label"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","payment-method-detail",3,"entity$","detailForm"],[3,"title"],["formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["formControlName","handler",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","PaymentMethod",3,"customFields","customFieldsFormGroup"],["formControlName","checker",3,"remove","operation","operationDefinition","readonly"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","handler",3,"remove","operation","operationDefinition","readonly"]],template:function(n,i){if(n&1){let d=S();l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),a(4,"async"),a(5,"async"),a(6,"async"),_("languageCodeChange",function(P){return b(d),F(i.setLanguage(P))}),m()(),l(7,"vdr-ab-right"),c(8,"vdr-action-bar-items",2),u(9,os,3,4,"button",3),a(10,"async"),u(11,as,1,1,"ng-template",null,0,ne),c(13,"vdr-action-bar-dropdown-menu",2),m()()(),l(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar")(17,"vdr-card")(18,"vdr-form-field",5),a(19,"translate"),l(20,"clr-toggle-wrapper"),c(21,"input",6),a(22,"hasPermission"),m()()(),u(23,ss,2,1,"vdr-card",7),a(24,"async"),m(),l(25,"vdr-page-block")(26,"vdr-card")(27,"div",8)(28,"vdr-form-field",9),a(29,"translate"),l(30,"input",10),a(31,"hasPermission"),_("input",function(P){return b(d),F(i.updateCode(i.entity==null?null:i.entity.code,P.target.value))}),m()(),l(32,"vdr-form-field",11),a(33,"translate"),a(34,"hasPermission"),c(35,"input",12),a(36,"hasPermission"),m(),c(37,"vdr-rich-text-editor",13),a(38,"hasPermission"),a(39,"translate"),m()(),u(40,ls,3,5,"vdr-card",14),c(41,"vdr-custom-detail-component-host",15),l(42,"vdr-card",16),a(43,"translate"),u(44,ms,2,5,"vdr-configurable-input",17)(45,ds,8,4,"div",7),m(),l(46,"vdr-card",16),a(47,"translate"),u(48,cs,2,5,"vdr-configurable-input",18)(49,fs,8,4,"div",7),m()()()()}if(n&2){let d=ie(12);r(3),o("disabled",s(4,25,i.isNew$))("availableLanguageCodes",s(5,27,i.availableLanguages$))("currentLanguageCode",s(6,29,i.languageCode$)),r(6),o("ngIf",s(10,31,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(4),o("label",s(19,33,"common.enabled")),r(3),o("vdrDisabled",!s(22,35,i.updatePermission)),r(2),o("ngIf",s(24,37,i.entity$)),r(5),o("label",s(29,39,"common.name")),r(2),o("readonly",!s(31,41,i.updatePermission)),r(2),o("label",s(33,43,"common.code"))("readOnlyToggle",s(34,45,i.updatePermission)),r(3),o("readonly",!s(36,47,i.updatePermission)),r(2),o("readonly",!s(38,49,i.updatePermission))("label",s(39,51,"common.description")),r(3),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm),r(),o("title",s(43,53,"settings.payment-eligibility-checker")),r(2),o("ngIf",i.selectedChecker&&i.selectedCheckerDefinition),r(),o("ngIf",!i.selectedChecker||!i.selectedCheckerDefinition),r(),o("title",s(47,55,"settings.payment-handler")),r(2),o("ngIf",i.selectedHandler&&i.selectedHandlerDefinition),r(),o("ngIf",!i.selectedHandler||!i.selectedHandlerDefinition)}},dependencies:[j,Xe,Ye,U,E,re,Q,Qe,Y,oe,ae,se,he,N,V,w,$,ui,le,J,Ze,Rt,li,mi,pi,di,O,M,Ge,_e,Se,L,ve,ye,be,me,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var Ro=Ee({location:"payment-method-list",requiresPermission:t=>t.includes(y.DeletePaymentMethod)||t.includes(y.DeleteSettings),getItemName:t=>t.name,shouldRetryItem:(t,p)=>!!t.message,bulkDelete:(t,p,e)=>t.settings.deletePaymentMethods(p,e).pipe(Z(n=>n.deletePaymentMethods))}),pc=D`
    mutation AssignPaymentMethodsToChannel($input: AssignPaymentMethodsToChannelInput!) {
        assignPaymentMethodsToChannel(input: $input) {
            id
            name
        }
    }
`,dc=D`
    mutation RemovePaymentMethodsFromChannel($input: RemovePaymentMethodsFromChannelInput!) {
        removePaymentMethodsFromChannel(input: $input) {
            id
            name
        }
    }
`,Oo=Ot({location:"payment-method-list",requiresPermission:t=>t.includes(y.UpdatePaymentMethod)||t.includes(y.UpdateSettings),getItemName:t=>t.name,bulkAssignToChannel:(t,p,e)=>e.map(n=>t.mutate(sn,{input:{channelId:n,paymentMethodIds:p}}).pipe(Z(i=>i.assignPaymentMethodsToChannel)))}),Vo=Vt({location:"payment-method-list",requiresPermission:t=>t.includes(y.DeletePaymentMethod)||t.includes(y.DeleteSettings),getItemName:t=>t.name,bulkRemoveFromChannel:(t,p,e)=>t.mutate(ln,{input:{channelId:e,paymentMethodIds:p}}).pipe(Z(n=>n.removePaymentMethodsFromChannel))});var gs=()=>["CreateSettings","CreatePaymentMethod"],hs=()=>["./","create"],Cs=t=>["./",t];function _s(t,p){t&1&&(l(0,"a",13),c(1,"clr-icon",14),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,hs)),r(2),C(" ",s(3,2,"settings.create-new-payment-method")," "))}function vs(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function ys(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function bs(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function Fs(t,p){if(t&1&&(l(0,"a",15)(1,"span"),f(2),m(),c(3,"clr-icon",16),m()),t&2){let e=p.item;o("routerLink",W(2,Cs,e.id)),r(2),x(e.name)}}function Ts(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.code," ")}}function Ss(t,p){t&1&&(l(0,"vdr-chip",19),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.enabled")))}function Ds(t,p){t&1&&(l(0,"vdr-chip",20),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.disabled")))}function Is(t,p){if(t&1&&u(0,Ss,3,3,"vdr-chip",17)(1,Ds,3,3,"vdr-chip",18),t&2){let e=p.item;o("ngIf",e.enabled),r(),o("ngIf",!e.enabled)}}function xs(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",21),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var gc=D`
    query GetPaymentMethodList($options: PaymentMethodListOptions!) {
        paymentMethods(options: $options) {
            items {
                ...PaymentMethodListItem
            }
            totalItems
        }
    }
    fragment PaymentMethodListItem on PaymentMethod {
        id
        createdAt
        updatedAt
        name
        description
        code
        enabled
    }
`,$o=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="payment-method-list",this.customFields=this.getCustomFieldConfig("PaymentMethod"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:"common.code",filterField:"code"}).addFilter({name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"}).addFilter({name:"description",type:{kind:"text"},label:"common.description",filterField:"description"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"id"}).addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addSort({name:"description"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:mn,getItems:e=>e.paymentMethods,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-payment-method-list"]],standalone:!1,features:[A],decls:37,vars:56,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","payment-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","payment-method-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),a(4,"async"),a(5,"async"),_("languageCodeChange",function(h){return i.setLanguage(h)}),m()(),l(6,"vdr-ab-right"),c(7,"vdr-action-bar-items",1),u(8,_s,4,5,"a",2),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"vdr-data-table-2",3),a(11,"async"),a(12,"async"),a(13,"async"),a(14,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),a(17,"translate"),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,vs,1,1,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,ys,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,bs,2,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,Fs,4,4,"ng-template"),m(),l(30,"vdr-dt2-column",10),a(31,"translate"),u(32,Ts,1,1,"ng-template"),m(),l(33,"vdr-dt2-column",11),a(34,"translate"),u(35,Is,2,2,"ng-template"),m(),u(36,xs,1,2,"vdr-dt2-custom-field-column",12),m()),n&2&&(r(3),o("availableLanguageCodes",s(4,29,i.availableLanguages$))("currentLanguageCode",s(5,31,i.contentLanguage$)),r(5),o("vdrIfPermissions",q(55,gs)),r(2),o("id",i.dataTableListId)("items",s(11,33,i.items$))("itemsPerPage",s(12,35,i.itemsPerPage$))("totalItems",s(13,37,i.totalItems$))("currentPage",s(14,39,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(17,41,"catalog.filter-by-name")),r(2),o("heading",s(19,43,"common.id"))("hiddenByDefault",!0)("sort",i.sorts.get("id")),r(3),o("heading",s(22,45,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(25,47,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(28,49,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(31,51,"common.code"))("sort",i.sorts.get("code")),r(3),o("heading",s(34,53,"common.enabled")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,E,ge,N,V,w,$,qe,Ze,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],encapsulation:2,changeDetection:0})}}return t})();function Ps(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",16),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function Bs(t,p){t&1&&(l(0,"vdr-form-field",17),a(1,"translate"),c(2,"input",13),m()),t&2&&o("label",s(1,1,"settings.password"))}function ks(t,p){if(t&1&&(l(0,"vdr-card",18),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",19),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Fc=D`
    query GetProfileDetail {
        activeAdministrator {
            ...ProfileDetail
        }
    }
    fragment ProfileDetail on Administrator {
        id
        createdAt
        updatedAt
        firstName
        lastName
        emailAddress
        user {
            id
            lastLogin
            verified
        }
    }
`,Go=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Administrator"),this.detailForm=this.formBuilder.group({emailAddress:["",R.required],firstName:["",R.required],lastName:["",R.required],password:[""],customFields:this.formBuilder.group(Pe(this.customFields))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}save(){this.entity$.pipe(pe(1),te(({id:e})=>{let n=this.detailForm.value,i={emailAddress:n.emailAddress,firstName:n.firstName,lastName:n.lastName,password:n.password,customFields:n.customFields};return this.dataService.administrator.updateActiveAdministrator(i)})).subscribe(e=>{this.notificationService.success("common.notify-update-success",{entity:"Administrator"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error("common.notify-update-error",{entity:"Administrator"})})}setFormValues(e,n){this.detailForm.patchValue({emailAddress:e.emailAddress,firstName:e.firstName,lastName:e.lastName}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-profile"]],standalone:!1,features:[A],decls:32,vars:27,consts:[["locationId","profile"],[1,"btn","btn-primary",3,"click","disabled"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","emailAddress",3,"label"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","firstName",3,"label"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label"],["id","lastName","type","text","formControlName","lastName"],["for","password",3,"label",4,"ngIf"],["for","password",3,"label","readOnlyToggle"],["id","password","type","password","formControlName","password"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","administrator-profile",3,"entity$","detailForm"],[3,"entity"],["for","password",3,"label"],["formGroupName","customFields",3,"title"],["entityName","Administrator",3,"customFields","customFieldsFormGroup"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),l(5,"button",1),_("click",function(){return i.save()}),f(6),a(7,"translate"),m()()()(),l(8,"form",2)(9,"vdr-page-detail-layout")(10,"vdr-page-detail-sidebar"),u(11,Ps,2,1,"vdr-card",3),a(12,"async"),m(),l(13,"vdr-page-block")(14,"vdr-card")(15,"div",4)(16,"vdr-form-field",5),a(17,"translate"),c(18,"input",6),m(),l(19,"vdr-form-field",7),a(20,"translate"),c(21,"input",8),m(),l(22,"vdr-form-field",9),a(23,"translate"),c(24,"input",10),m(),u(25,Bs,3,3,"vdr-form-field",11),a(26,"async"),l(27,"vdr-form-field",12),a(28,"translate"),c(29,"input",13),m()()(),u(30,ks,3,5,"vdr-card",14),c(31,"vdr-custom-detail-component-host",15),m()()()),n&2&&(r(5),o("disabled",i.detailForm.invalid||i.detailForm.pristine),r(),C(" ",s(7,13,"common.update")," "),r(2),o("formGroup",i.detailForm),r(3),o("ngIf",s(12,15,i.entity$)),r(5),o("label",s(17,17,"settings.email-address")),r(3),o("label",s(20,19,"settings.first-name")),r(3),o("label",s(23,21,"settings.last-name")),r(3),o("ngIf",s(26,23,i.isNew$)),r(2),o("label",s(28,25,"settings.password"))("readOnlyToggle",!0),r(3),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm))},dependencies:[E,re,Q,Y,oe,ae,se,he,N,V,w,le,J,M,_e,Se,L,ve,ye,be,me,B,I],encapsulation:2,changeDetection:0})}}return t})();var qo=ut(Ii()),Zo=ut(xr());function Ls(t,p){if(t&1){let e=S();l(0,"button",15),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.create")," ")}}function As(t,p){if(t&1){let e=S();l(0,"button",15),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.update")," ")}}function Es(t,p){t&1&&u(0,As,3,4,"button",16),t&2&&o("vdrIfPermissions","UpdateAdministrator")}function Ms(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",17),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}var Bc=D`
    query GetRoleDetail($id: ID!) {
        role(id: $id) {
            ...Role
        }
    }
    ${ti}
`,Uo=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.detailForm=this.formBuilder.group({code:["",R.required],description:["",R.required],channelIds:[[]],permissions:[[]]}),this.permissionDefinitions=this.serverConfigService.getPermissionDefinitions()}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}updateCode(e){let n=this.detailForm.get(["code"]);n&&n.pristine&&n.setValue((0,qo.normalizeString)(e,"-"))}setPermission(e){let n=this.detailForm.get("permissions");if(n){let i=n.value,d=e.value===!0?(0,Zo.unique)([...i,e.permission]):i.filter(h=>h!==e.permission);n.setValue(d),n.markAsDirty()}}create(){let{code:e,description:n,permissions:i,channelIds:d}=this.detailForm.value;if(!e||!n)return;let h={code:e,description:n,permissions:i??[],channelIds:d};this.dataService.administrator.createRole(h).subscribe(P=>{this.notificationService.success("common.notify-create-success",{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",P.createRole.id],{relativeTo:this.route})},P=>{this.notificationService.error("common.notify-create-error",{entity:"Role"})})}save(){this.entity$.pipe(pe(1),te(({id:e})=>{let n=this.detailForm.value,i=H({id:e},n);return this.dataService.administrator.updateRole(i)})).subscribe(e=>{this.notificationService.success("common.notify-update-success",{entity:"Role"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error("common.notify-update-error",{entity:"Role"})})}setFormValues(e,n){this.detailForm.patchValue({description:e.description,code:e.code,channelIds:e.channels.map(i=>i.id),permissions:e.permissions}),this.changeDetector.detectChanges()}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-role-detail"]],standalone:!1,features:[A],decls:36,vars:37,consts:[["updateButton",""],["locationId","role-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","description",3,"label"],["id","description","type","text","formControlName","description",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],[1,"mt-2"],[3,"title"],[3,"label"],["formControlName","channelIds",3,"vdrDisabled"],[1,"mt-2",3,"permissionChange","permissionDefinitions","activePermissions","readonly"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"]],template:function(n,i){if(n&1){let d=S();l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,Ls,3,4,"button",2),a(6,"async"),u(7,Es,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,Ms,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),l(20,"input",7),a(21,"hasPermission"),_("input",function(P){return b(d),F(i.updateCode(P.target.value))}),m()(),l(22,"vdr-form-field",8),a(23,"translate"),a(24,"hasPermission"),c(25,"input",9),a(26,"hasPermission"),m()()()()(),l(27,"vdr-page-block",10)(28,"vdr-card",11),a(29,"translate"),l(30,"vdr-form-field",12),a(31,"translate"),c(32,"vdr-channel-assignment-control",13),a(33,"hasPermission"),m(),l(34,"vdr-permission-grid",14),a(35,"hasPermission"),_("permissionChange",function(P){return b(d),F(i.setPermission(P))}),m()()()()}if(n&2){let d,h=ie(8);r(5),o("ngIf",s(6,15,i.isNew$))("ngIfElse",h),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,17,i.entity$)),r(5),o("label",s(19,19,"common.description")),r(2),o("readonly",!s(21,21,"UpdateAdministrator")),r(2),o("label",s(23,23,"common.code"))("readOnlyToggle",s(24,25,"UpdateAdministrator")),r(3),o("readonly",!s(26,27,"UpdateAdministrator")),r(3),o("title",s(29,29,"settings.permissions")),r(2),o("label",s(31,31,"settings.channel")),r(2),o("vdrDisabled",!s(33,33,"UpdateAdministrator")),r(2),o("permissionDefinitions",i.permissionDefinitions)("activePermissions",(d=i.detailForm.get("permissions"))==null?null:d.value)("readonly",!s(35,35,"UpdateAdministrator"))}},dependencies:[E,re,Q,Y,oe,ae,se,N,V,w,$,le,J,O,M,Ge,ao,L,ve,ye,be,me,_i,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var Ho=Ee({location:"role-list",requiresPermission:t=>t.includes(y.DeleteAdministrator),getItemName:t=>t.description,bulkDelete:(t,p)=>t.administrator.deleteRoles(p).pipe(Z(e=>e.deleteRoles))});var yi=ut(Wt());var ws=()=>["CreateAdministrator"],Ns=()=>["./","create"],Rs=t=>["./",t];function Os(t,p){t&1&&(l(0,"a",14),c(1,"clr-icon",15),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Ns)),r(2),C(" ",s(3,2,"settings.create-new-role")," "))}function Vs(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function $s(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Gs(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function qs(t,p){if(t&1&&(l(0,"a",17)(1,"span"),f(2),m(),c(3,"clr-icon",18),m()),t&2){let e=g().item;o("routerLink",W(2,Rs,e.id)),r(2),x(e.description)}}function Zs(t,p){if(t&1&&f(0),t&2){let e=g().item;C(" ",e.description," ")}}function Us(t,p){if(t&1&&u(0,qs,4,4,"a",16)(1,Zs,1,1,"ng-template",null,0,ne),t&2){let e=p.item,n=ie(2),i=g();o("ngIf",!i.isDefaultRole(e))("ngIfElse",n)}}function Hs(t,p){if(t&1&&(l(0,"span"),f(1),m()),t&2){let e=g().item;r(),x(e.code)}}function zs(t,p){if(t&1&&u(0,Hs,2,1,"span",19),t&2){let e=p.item,n=g();o("ngIf",!n.isDefaultRole(e))}}function js(t,p){if(t&1&&(l(0,"vdr-chip"),c(1,"vdr-channel-badge",21),l(2,"div",22),f(3),a(4,"channelCodeToLabel"),a(5,"translate"),m()()),t&2){let e=p.$implicit;r(),o("channelCode",e.code),r(2),x(s(5,4,s(4,2,e.code)))}}function Ws(t,p){if(t&1&&(Bt(0),u(1,js,6,6,"vdr-chip",20),kt()),t&2){let e=g().item;r(),o("ngForOf",e.channels)}}function Ks(t,p){if(t&1&&u(0,Ws,2,1,"ng-container",19),t&2){let e=p.item,n=g();o("ngIf",!n.isDefaultRole(e))}}function Qs(t,p){if(t&1&&(l(0,"vdr-chip"),f(1),m()),t&2){let e=p.$implicit;r(),x(e)}}function Ys(t,p){if(t&1&&(Bt(0),c(1,"clr-icon",15),f(2),kt()),t&2){let e=g(3).item,n=g();r(2),C(" ",e.permissions.length-n.initialLimit," ")}}function Xs(t,p){t&1&&c(0,"clr-icon",27)}function Js(t,p){if(t&1){let e=S();l(0,"button",26),_("click",function(){b(e);let i=g(2).item,d=g();return F(d.toggleDisplayLimit(i))}),u(1,Ys,3,1,"ng-container",23)(2,Xs,1,0,"ng-template",null,1,ne),m()}if(t&2){let e=ie(3),n=g(2).item,i=g();r(),o("ngIf",(i.displayLimit[n.id]||0)<n.permissions.length)("ngIfElse",e)}}function el(t,p){if(t&1&&(Bt(0),l(1,"div",24),u(2,Qs,2,1,"vdr-chip",20),a(3,"slice"),u(4,Js,4,2,"button",25),m(),kt()),t&2){let e=g().item,n=g();r(2),o("ngForOf",zi(3,2,e.permissions,0,n.displayLimit[e.id]||3)),r(2),o("ngIf",e.permissions.length>n.initialLimit)}}function tl(t,p){t&1&&(l(0,"span",28),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"settings.default-role-label")))}function il(t,p){if(t&1&&u(0,el,5,6,"ng-container",23)(1,tl,3,3,"ng-template",null,0,ne),t&2){let e=p.item,n=ie(2),i=g();o("ngIf",!i.isDefaultRole(e))("ngIfElse",n)}}var Oc=D`
    query GetRoleList($options: RoleListOptions) {
        roles(options: $options) {
            items {
                ...Role
            }
            totalItems
        }
    }
    ${ti}
`,zo=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="role-list",this.initialLimit=3,this.displayLimit={},this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"code",type:{kind:"text"},label:"common.code",filterField:"code"}).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"code"}).addSort({name:"description"}).connectToRoute(this.route),super.configure({document:cn,getItems:e=>e.roles,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({code:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}toggleDisplayLimit(e){this.displayLimit[e.id]===e.permissions.length?this.displayLimit[e.id]=this.initialLimit:this.displayLimit[e.id]=e.permissions.length}isDefaultRole(e){return e.code===yi.SUPER_ADMIN_ROLE_CODE||e.code===yi.CUSTOMER_ROLE_CODE}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-role-list"]],standalone:!1,features:[A],decls:36,vars:51,consts:[["defaultRole",""],["collapse",""],["locationId","role-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","role-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","description",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","channel",3,"heading"],["id","permissions",3,"heading"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],["class","button-ghost",3,"routerLink",4,"ngIf","ngIfElse"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"channelCode"],[1,"ml-1"],[4,"ngIf","ngIfElse"],[1,"permissions-list"],["class","button-small",3,"click",4,"ngIf"],[1,"button-small",3,"click"],["shape","minus"],[1,"default-role-label"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",2),u(5,Os,4,5,"a",3),c(6,"vdr-action-bar-dropdown-menu",2),m()()(),l(7,"vdr-data-table-2",4),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",5)(13,"vdr-dt2-search",6),a(14,"translate"),l(15,"vdr-dt2-column",7),a(16,"translate"),u(17,Vs,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",8),a(19,"translate"),u(20,$s,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",9),a(22,"translate"),u(23,Gs,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",10),a(25,"translate"),u(26,Us,3,2,"ng-template"),m(),l(27,"vdr-dt2-column",11),a(28,"translate"),u(29,zs,1,1,"ng-template"),m(),l(30,"vdr-dt2-column",12),a(31,"translate"),u(32,Ks,1,1,"ng-template"),m(),l(33,"vdr-dt2-column",13),a(34,"translate"),u(35,il,3,2,"ng-template"),m()()),n&2&&(r(5),o("vdrIfPermissions",q(50,ws)),r(2),o("id",i.dataTableListId)("items",s(8,26,i.items$))("itemsPerPage",s(9,28,i.itemsPerPage$))("totalItems",s(10,30,i.totalItems$))("currentPage",s(11,32,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,34,"catalog.filter-by-name")),r(2),o("heading",s(16,36,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,42,"common.description"))("optional",!1)("sort",i.sorts.get("description")),r(3),o("heading",s(28,44,"common.code"))("sort",i.sorts.get("code")),r(3),o("heading",s(31,46,"settings.channel")),r(3),o("heading",s(34,48,"settings.permissions")))},dependencies:[j,U,E,ge,N,V,w,$,qe,O,M,eo,Te,xe,De,Ie,L,B,Ki,I,bt,Ce],styles:[`.default-role-label[_ngcontent-%COMP%]{color:var(--color-grey-400)}.permissions-list[_ngcontent-%COMP%]{max-width:500px;display:flex;flex-wrap:wrap;align-items:center;gap:4px}
/*# sourceMappingURL=role-list.component-QSTM4EB7.css.map */`],changeDetection:0})}}return t})();var nl=()=>["SuperAdmin","UpdateSeller"];function ol(t,p){if(t&1){let e=S();l(0,"button",10),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.create")," ")}}function rl(t,p){if(t&1){let e=S();l(0,"button",10),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.update")," ")}}function al(t,p){t&1&&u(0,rl,3,4,"button",11),t&2&&o("vdrIfPermissions",q(1,nl))}function sl(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",12),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function ll(t,p){if(t&1&&(l(0,"vdr-card",13),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",14),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Hc=D`
    query GetSellerDetail($id: ID!) {
        seller(id: $id) {
            ...SellerDetail
        }
    }
    fragment SellerDetail on Seller {
        id
        createdAt
        updatedAt
        name
    }
`,jo=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Seller"),this.detailForm=this.formBuilder.group({name:["",R.required],customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.SuperAdmin,y.UpdateSeller,y.CreateSeller]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;if(!e.name)return;let n={name:e.name,customFields:e.customFields};this.dataService.settings.createSeller(n).subscribe(i=>{switch(i.createSeller.__typename){case"Seller":this.notificationService.success("common.notify-create-success",{entity:"Seller"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",i.createSeller.id],{relativeTo:this.route});break}})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,name:e.name,customFields:e.customFields};return this.dataService.settings.updateSeller(i)})).subscribe(({updateSeller:n})=>{switch(n.__typename){case"Seller":this.notificationService.success("common.notify-update-success",{entity:"Seller"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck();break}})}setFormValues(e,n){this.detailForm.patchValue({name:e.name}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-seller-detail"]],standalone:!1,features:[A],decls:24,vars:17,consts:[["updateButton",""],["locationId","seller-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","seller-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Seller",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,ol,3,4,"button",2),a(6,"async"),u(7,al,1,2,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,sl,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),c(20,"input",7),a(21,"hasPermission"),m()()(),u(22,ll,3,5,"vdr-card",8),c(23,"vdr-custom-detail-component-host",9),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,9,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,11,i.entity$)),r(5),o("label",s(19,13,"common.name")),r(2),o("readonly",!s(21,15,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[E,re,Q,Y,oe,ae,se,he,N,V,w,$,le,J,O,M,_e,Se,L,ve,ye,be,me,B,I,Fe],styles:[`clr-alert[_ngcontent-%COMP%]{max-width:30rem;margin-bottom:12px}
/*# sourceMappingURL=seller-detail.component-27EQPYDL.css.map */`],changeDetection:0})}}return t})();var Wo=Ee({location:"seller-list",requiresPermission:t=>t.includes(y.DeleteSeller),getItemName:t=>t.name,bulkDelete:(t,p)=>t.settings.deleteSellers(p).pipe(Z(e=>e.deleteSellers))});var ml=()=>["SuperAdmin","CreateSeller"],pl=()=>["./","create"],dl=t=>["./",t];function cl(t,p){t&1&&(l(0,"a",10),c(1,"clr-icon",11),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,pl)),r(2),C(" ",s(3,2,"settings.create-new-seller")," "))}function ul(t,p){if(t&1&&f(0),t&2){let e=p.item;x(e.id)}}function fl(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function gl(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function hl(t,p){if(t&1&&(l(0,"a",12)(1,"span"),f(2),m(),c(3,"clr-icon",13),m()),t&2){let e=p.item;o("routerLink",W(2,dl,e.id)),r(2),x(e.name)}}function Cl(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",14),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var Xc=D`
    query GetSellerList($options: SellerListOptions) {
        sellers(options: $options) {
            items {
                ...SellerListItem
            }
            totalItems
        }
    }
    fragment SellerListItem on Seller {
        id
        createdAt
        updatedAt
        name
    }
`,Ko=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="seller-list",this.customFields=this.getCustomFieldConfig("Seller"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:fn,getItems:e=>e.sellers,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-seller-list"]],standalone:!1,features:[A],decls:28,vars:42,consts:[["locationId","seller-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","seller-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,cl,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,ul,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,fl,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,gl,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,hl,4,4,"ng-template"),m(),u(27,Cl,1,2,"vdr-dt2-custom-field-column",9),m()),n&2&&(r(5),o("vdrIfPermissions",q(41,ml)),r(2),o("id",i.dataTableListId)("items",s(8,23,i.items$))("itemsPerPage",s(9,25,i.itemsPerPage$))("totalItems",s(10,27,i.totalItems$))("currentPage",s(11,29,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,31,"catalog.filter-by-name")),r(2),o("heading",s(16,33,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,35,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,37,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,39,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,ge,N,V,w,$,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],encapsulation:2,changeDetection:0})}}return t})();function yl(t,p){if(t&1&&c(0,"vdr-object-tree",10),t&2){let e=g().$implicit;o("value",e.metadata)}}function bl(t,p){if(t&1&&(l(0,"div",5)(1,"div",6)(2,"vdr-labeled-data",7),a(3,"translate"),f(4),m(),l(5,"div",8)(6,"vdr-labeled-data",7),a(7,"translate"),f(8),a(9,"localeCurrency"),m(),l(10,"vdr-labeled-data",7),a(11,"translate"),f(12),a(13,"localeCurrency"),m()(),u(14,yl,1,1,"vdr-object-tree",9),m()()),t&2){let e=p.$implicit,n=g();r(),Pt("stale",n.testDataUpdated),r(),o("label",s(3,9,"settings.shipping-method")),r(2),C(" ",e.name," "),r(2),o("label",s(7,11,"common.price")),r(2),C(" ",k(9,13,e.price,n.currencyCode)," "),r(2),o("label",s(11,16,"common.price-with-tax")),r(2),C(" ",k(13,18,e.priceWithTax,n.currencyCode)," "),r(2),o("ngIf",e.metadata)}}function Fl(t,p){t&1&&(l(0,"div",5),c(1,"clr-icon",11),f(2),a(3,"translate"),m()),t&2&&(r(2),C(" ",s(3,1,"settings.no-eligible-shipping-methods")," "))}var Yo=(()=>{class t{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new Ke}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-shipping-eligibility-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},standalone:!1,decls:8,vars:9,consts:[[1,"test-result",3,"title"],["class","card-span",4,"ngFor","ngForOf"],["class","card-span",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"card-span"],[1,"result-details"],[3,"label"],[1,"price-row"],[3,"value",4,"ngIf"],[3,"value"],["shape","ban",1,"is-solid","error"]],template:function(n,i){n&1&&(l(0,"vdr-card",0),a(1,"translate"),u(2,bl,15,21,"div",1)(3,Fl,4,3,"div",2),l(4,"div",3)(5,"button",4),_("click",function(){return i.runTest.emit()}),f(6),a(7,"translate"),m()()()),n&2&&(o("title",s(1,5,"settings.test-result")),r(2),o("ngForOf",i.testResult),r(),o("ngIf",(i.testResult==null?null:i.testResult.length)===0),r(2),o("disabled",!i.okToRun),r(),C(" ",s(7,7,"settings.test-shipping-methods")," "))},dependencies:[j,U,E,ci,fi,me,I,Mt],styles:[`[_nghost-%COMP%]{display:block}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-inline-start:24px}clr-icon.error[_ngcontent-%COMP%]{color:var(--color-error-500)}
/*# sourceMappingURL=shipping-eligibility-test-result.component-OMFG3SOO.css.map */`],changeDetection:0})}}return t})();var tr=ut(Ii());function Sl(t,p){if(t&1){let e=S();l(0,"tr",8)(1,"td",9),c(2,"img",10),m(),l(3,"td",11),f(4),m(),l(5,"td",12),f(6),m(),l(7,"td",13),f(8),a(9,"localeCurrency"),m(),l(10,"td",14)(11,"input",15),Ui("ngModelChange",function(i){let d=b(e).$implicit;return Zi(d.quantity,i)||(d.quantity=i),F(i)}),_("change",function(){b(e);let i=g(2);return F(i.updateQuantity())}),m(),l(12,"button",16),_("click",function(){let i=b(e).$implicit,d=g(2);return F(d.removeLine(i))}),c(13,"clr-icon",17),m()(),l(14,"td",18),f(15),a(16,"localeCurrency"),m()()}if(t&2){let e=p.$implicit,n=g(2);r(2),o("src",e.preview+"?preset=tiny",Vi),r(2),x(e.name),r(2),x(e.sku),r(2),C(" ",k(9,6,e.unitPriceWithTax,n.currencyCode)," "),r(3),qi("ngModel",e.quantity),r(4),C(" ",k(16,9,e.unitPriceWithTax*e.quantity,n.currencyCode)," ")}}function Dl(t,p){if(t&1&&(l(0,"table",4)(1,"thead")(2,"tr"),c(3,"th"),l(4,"th"),f(5),a(6,"translate"),m(),l(7,"th"),f(8),a(9,"translate"),m(),l(10,"th"),f(11),a(12,"translate"),m(),l(13,"th"),f(14),a(15,"translate"),m(),l(16,"th"),f(17),a(18,"translate"),m()()(),u(19,Sl,17,12,"tr",5),l(20,"tr",6)(21,"td",7),f(22),a(23,"translate"),m(),c(24,"td")(25,"td")(26,"td")(27,"td"),l(28,"td"),f(29),a(30,"localeCurrency"),m()()()),t&2){let e=g();r(5),x(s(6,8,"order.product-name")),r(3),x(s(9,10,"order.product-sku")),r(3),x(s(12,12,"order.unit-price")),r(3),x(s(15,14,"order.quantity")),r(3),x(s(18,16,"order.total")),r(2),o("ngForOf",e.lines),r(3),x(s(23,18,"order.sub-total")),r(7),x(k(30,20,e.subTotal,e.currencyCode))}}function Il(t,p){t&1&&(l(0,"div",19)(1,"div",20),f(2),a(3,"translate"),m(),c(4,"clr-icon",21),m()),t&2&&(r(2),x(s(3,1,"settings.add-products-to-test-order")))}var bi=(()=>{class t{get subTotal(){return this.lines.reduce((e,n)=>e+n.unitPriceWithTax*n.quantity,0)}constructor(e,n){this.dataService=e,this.localStorageService=n,this.orderLinesChange=new Ke,this.lines=[]}ngOnInit(){this.lines=this.loadFromLocalStorage(),this.lines&&this.orderLinesChange.emit(this.lines),this.dataService.settings.getActiveChannel("cache-first").single$.subscribe(e=>{this.currencyCode=e.activeChannel.defaultCurrencyCode})}selectResult(e){e&&this.addToLines(e)}addToLines(e){this.lines.find(n=>n.id===e.productVariantId)||(this.lines.push({id:e.productVariantId,name:e.productVariantName,preview:e.productAsset?.preview??"",quantity:1,sku:e.sku,unitPriceWithTax:e.priceWithTax.__typename==="SinglePrice"&&e.priceWithTax.value||0}),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines))}updateQuantity(){this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}removeLine(e){this.lines=this.lines.filter(n=>n.id!==e.id),this.persistToLocalStorage(),this.orderLinesChange.emit(this.lines)}persistToLocalStorage(){this.localStorageService.setForCurrentLocation("shippingTestOrder",this.lines)}loadFromLocalStorage(){return this.localStorageService.getForCurrentLocation("shippingTestOrder")||[]}static{this.\u0275fac=function(n){return new(n||t)(v(G),v(si))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-test-order-builder"]],outputs:{orderLinesChange:"orderLinesChange"},standalone:!1,decls:5,vars:2,consts:[["emptyPlaceholder",""],["class","order-table table",4,"ngIf","ngIfElse"],[1,"card-block"],[3,"productSelected"],[1,"order-table","table"],["class","order-line",4,"ngFor","ngForOf"],[1,"sub-total"],[1,"left"],[1,"order-line"],[1,"align-middle","thumb"],[3,"src"],[1,"align-middle","name"],[1,"align-middle","sku"],[1,"align-middle","unit-price"],[1,"align-middle","quantity"],["type","number","max","9999","min","1",3,"ngModelChange","change","ngModel"],[1,"icon-button",3,"click"],["shape","trash"],[1,"align-middle","total"],[1,"card-block","empty-placeholder","card-span"],[1,"empty-text"],["shape","arrow","dir","down","size","96"]],template:function(n,i){if(n&1){let d=S();u(0,Dl,31,23,"table",1)(1,Il,5,3,"ng-template",null,0,ne),l(3,"div",2)(4,"vdr-product-variant-selector",3),_("productSelected",function(P){return b(d),F(i.selectResult(P))}),m()()}if(n&2){let d=ie(2);o("ngIf",i.lines.length)("ngIfElse",d)}},dependencies:[j,U,E,Q,Et,Y,qn,Gn,$n,Un,J,oo,I,Mt],styles:[`.empty-placeholder[_ngcontent-%COMP%]{color:var(--color-grey-400);text-align:center}.empty-text[_ngcontent-%COMP%]{font-size:22px}.thumb[_ngcontent-%COMP%]{max-width:50px}
/*# sourceMappingURL=test-order-builder.component-7IPWOQTA.css.map */`],changeDetection:0})}}return t})();function xl(t,p){if(t&1&&(l(0,"option",10),f(1),m()),t&2){let e=p.$implicit;o("value",e.code),r(),C(" ",e.name," ")}}var Fi=(()=>{class t{constructor(e,n,i){this.formBuilder=e,this.dataService=n,this.localStorageService=i,this.addressChange=new Ke}ngOnInit(){this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(i=>i.countries.items);let e=this.localStorageService.getForCurrentLocation("shippingTestAddress"),n=e||{city:"",countryCode:"",postalCode:"",province:""};this.addressChange.emit(n),this.form=this.formBuilder.group(n),this.subscription=this.form.valueChanges.subscribe(i=>{this.localStorageService.setForCurrentLocation("shippingTestAddress",i),this.addressChange.emit(i)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(v(Zn),v(G),v(si))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-test-address-form"]],outputs:{addressChange:"addressChange"},standalone:!1,decls:20,vars:19,consts:[[1,"card"],[1,"card-header"],[1,"card-block"],[1,"form-grid",3,"formGroup"],[3,"label"],["formControlName","city","type","text"],["formControlName","province","type","text"],["formControlName","postalCode","type","text"],["name","countryCode","formControlName","countryCode"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,i){n&1&&(l(0,"div",0)(1,"div",1),f(2),a(3,"translate"),m(),l(4,"div",2)(5,"form",3)(6,"vdr-form-field",4),a(7,"translate"),c(8,"input",5),m(),l(9,"vdr-form-field",4),a(10,"translate"),c(11,"input",6),m(),l(12,"vdr-form-field",4),a(13,"translate"),c(14,"input",7),m(),l(15,"vdr-form-field",4),a(16,"translate"),l(17,"select",8),u(18,xl,2,2,"option",9),a(19,"async"),m()()()()()),n&2&&(r(2),C(" ",s(3,7,"settings.test-address")," "),r(3),o("formGroup",i.form),r(),o("label",s(7,9,"customer.city")),r(3),o("label",s(10,11,"customer.province")),r(3),o("label",s(13,13,"customer.postal-code")),r(3),o("label",s(16,15,"customer.country")),r(3),o("ngForOf",s(19,17,i.availableCountries$)))},dependencies:[U,re,vt,yt,Q,_t,Y,oe,ae,se,le,J,B,I],styles:[`[_nghost-%COMP%]{display:block}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}
/*# sourceMappingURL=test-address-form.component-AFDKKLKE.css.map */`],changeDetection:0})}}return t})();var Pl=(t,p,e)=>({success:t,error:p,unknown:e});function Bl(t,p){t&1&&c(0,"clr-icon",14)}function kl(t,p){t&1&&c(0,"clr-icon",15)}function Ll(t,p){t&1&&c(0,"clr-icon",16)}function Al(t,p){if(t&1&&(l(0,"vdr-labeled-data",4),a(1,"translate"),f(2),a(3,"localeCurrency"),m()),t&2){let e=g();o("label",s(1,2,"common.price")),r(2),C(" ",k(3,4,e.testResult.quote==null?null:e.testResult.quote.price,e.currencyCode)," ")}}function El(t,p){if(t&1&&(l(0,"vdr-labeled-data",4),a(1,"translate"),f(2),a(3,"localeCurrency"),m()),t&2){let e=g();o("label",s(1,2,"common.price-with-tax")),r(2),C(" ",k(3,4,e.testResult.quote==null?null:e.testResult.quote.priceWithTax,e.currencyCode)," ")}}function Ml(t,p){if(t&1&&c(0,"vdr-object-tree",17),t&2){let e=g();o("value",e.testResult==null||e.testResult.quote==null?null:e.testResult.quote.metadata)}}var er=(()=>{class t{constructor(){this.okToRun=!1,this.testDataUpdated=!1,this.runTest=new Ke}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-shipping-method-test-result"]],inputs:{testResult:"testResult",okToRun:"okToRun",testDataUpdated:"testDataUpdated",currencyCode:"currencyCode"},outputs:{runTest:"runTest"},standalone:!1,decls:21,vars:24,consts:[[1,"test-result","card",3,"ngClass"],[1,"card-header"],[1,"card-block"],[1,"result-details"],[3,"label"],[1,"eligible-icon"],["shape","success-standard","class","is-solid success",4,"ngIf"],["shape","ban","class","is-solid error",4,"ngIf"],["shape","unknown-status",4,"ngIf"],[1,"price-row"],[3,"label",4,"ngIf"],[3,"value",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-secondary",3,"click","disabled"],["shape","success-standard",1,"is-solid","success"],["shape","ban",1,"is-solid","error"],["shape","unknown-status"],[3,"value"]],template:function(n,i){n&1&&(l(0,"div",0)(1,"div",1),f(2),a(3,"translate"),m(),l(4,"div",2)(5,"div",3)(6,"vdr-labeled-data",4),a(7,"translate"),l(8,"div",5),u(9,Bl,1,0,"clr-icon",6)(10,kl,1,0,"clr-icon",7)(11,Ll,1,0,"clr-icon",8),m(),f(12),m(),l(13,"div",9),u(14,Al,4,7,"vdr-labeled-data",10)(15,El,4,7,"vdr-labeled-data",10),m(),u(16,Ml,1,1,"vdr-object-tree",11),m()(),l(17,"div",12)(18,"button",13),_("click",function(){return i.runTest.emit()}),f(19),a(20,"translate"),m()()()),n&2&&(o("ngClass",Hi(20,Pl,(i.testResult==null?null:i.testResult.eligible)===!0,(i.testResult==null?null:i.testResult.eligible)===!1,!i.testResult)),r(2),C(" ",s(3,14,"settings.test-result")," "),r(3),Pt("stale",i.testDataUpdated),r(),o("label",s(7,16,"settings.eligible")),r(3),o("ngIf",i.testResult==null?null:i.testResult.eligible),r(),o("ngIf",(i.testResult==null?null:i.testResult.eligible)===!1),r(),o("ngIf",!i.testResult),r(),C(" ",i.testResult==null?null:i.testResult.eligible," "),r(2),o("ngIf",(i.testResult==null||i.testResult.quote==null?null:i.testResult.quote.price)!=null),r(),o("ngIf",(i.testResult==null||i.testResult.quote==null?null:i.testResult.quote.priceWithTax)!=null),r(),o("ngIf",i.testResult==null||i.testResult.quote==null?null:i.testResult.quote.metadata),r(2),o("disabled",!i.okToRun),r(),C(" ",s(20,18,"settings.test-shipping-method")," "))},dependencies:[j,ji,E,ci,fi,I,Mt],styles:[`[_nghost-%COMP%]{display:block}.test-result.success[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-success-100)}.test-result.error[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-error-100)}.test-result.unknown[_ngcontent-%COMP%]   .card-block[_ngcontent-%COMP%]{background-color:var(--color-component-bg-100)}.result-details[_ngcontent-%COMP%]{transition:opacity .2s}.result-details.stale[_ngcontent-%COMP%]{opacity:.5}.eligible-icon[_ngcontent-%COMP%]{display:inline-block}.eligible-icon[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-500)}.eligible-icon[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--color-error-500)}.price-row[_ngcontent-%COMP%]{display:flex}.price-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-inline-start:24px}
/*# sourceMappingURL=shipping-method-test-result.component-TFQXZKYM.css.map */`],changeDetection:0})}}return t})();function Nl(t,p){if(t&1){let e=S();l(0,"button",24),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),r(),C(" ",s(2,2,"common.create")," ")}}function Rl(t,p){if(t&1){let e=S();l(0,"button",24),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.pristine||e.detailForm.invalid||!e.selectedChecker||!e.selectedCalculator),r(),C(" ",s(2,2,"common.update")," ")}}function Ol(t,p){if(t&1&&u(0,Rl,3,4,"button",25),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function Vl(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",26),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function $l(t,p){if(t&1&&(l(0,"option",27),f(1),m()),t&2){let e=p.$implicit;o("value",e.code),r(),Lt(" ",e.code,": ",e.description," ")}}function Gl(t,p){if(t&1&&(l(0,"vdr-card",28),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",29),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}function ql(t,p){if(t&1){let e=S();l(0,"vdr-configurable-input",30),a(1,"hasPermission"),_("remove",function(){b(e);let i=g();return F(i.selectedChecker=null)}),m()}if(t&2){let e=g();o("operation",e.selectedChecker)("operationDefinition",e.selectedCheckerDefinition)("readonly",!s(1,3,e.updatePermission))}}function Zl(t,p){if(t&1){let e=S();l(0,"button",36),_("click",function(){let i=b(e).$implicit,d=g(2);return F(d.selectChecker(i))}),f(1),m()}if(t&2){let e=p.$implicit;r(),C(" ",e.description," ")}}function Ul(t,p){if(t&1&&(l(0,"div",31)(1,"vdr-dropdown")(2,"button",32),c(3,"clr-icon",33),f(4),a(5,"translate"),m(),l(6,"vdr-dropdown-menu",34),u(7,Zl,2,1,"button",35),m()()()),t&2){let e=g();r(4),C(" ",s(5,2,"common.select")," "),r(3),o("ngForOf",e.checkers)}}function Hl(t,p){if(t&1){let e=S();l(0,"vdr-configurable-input",37),a(1,"hasPermission"),_("remove",function(){b(e);let i=g();return F(i.selectedCalculator=null)}),m()}if(t&2){let e=g();o("operation",e.selectedCalculator)("operationDefinition",e.selectedCalculatorDefinition)("readonly",!s(1,3,e.updatePermission))}}function zl(t,p){if(t&1){let e=S();l(0,"button",36),_("click",function(){let i=b(e).$implicit,d=g(2);return F(d.selectCalculator(i))}),f(1),m()}if(t&2){let e=p.$implicit;r(),C(" ",e.description," ")}}function jl(t,p){if(t&1&&(l(0,"div",31)(1,"vdr-dropdown")(2,"button",32),c(3,"clr-icon",33),f(4),a(5,"translate"),m(),l(6,"vdr-dropdown-menu",34),u(7,zl,2,1,"button",35),m()()()),t&2){let e=g();r(4),C(" ",s(5,2,"common.select")," "),r(3),o("ngForOf",e.calculators)}}var I0=D`
    query GetShippingMethodDetail($id: ID!) {
        shippingMethod(id: $id) {
            ...ShippingMethod
        }
    }
    ${Mn}
`,ir=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("ShippingMethod"),this.detailForm=this.formBuilder.group({code:["",R.required],name:["",R.required],description:"",fulfillmentHandler:["",R.required],checker:{},calculator:{},customFields:this.formBuilder.group(Pe(this.customFields))}),this.checkers=[],this.calculators=[],this.fulfillmentHandlers=[],this.testDataUpdated=!1,this.updatePermission=[y.UpdateSettings,y.UpdateShippingMethod],this.fetchTestResult$=new Ct}ngOnInit(){this.init(),this.dataService.shippingMethod.getShippingMethodOperations().single$.subscribe(e=>{this.checkers=e.shippingEligibilityCheckers,this.calculators=e.shippingCalculators,this.fulfillmentHandlers=e.fulfillmentHandlers,this.changeDetector.markForCheck(),this.selectedCheckerDefinition=e.shippingEligibilityCheckers.find(n=>n.code===this.entity?.checker?.code),this.selectedCalculatorDefinition=e.shippingCalculators.find(n=>n.code===this.entity?.calculator?.code)}),this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel),this.testResult$=this.fetchTestResult$.pipe(ft(([e,n])=>{let{checker:i,calculator:d}=this.detailForm.value;if(!this.selectedChecker||!this.selectedCalculator||!i||!d)return Tt(void 0);let h={shippingAddress:ze(H({},e),{streetLine1:"test"}),lines:n.map(P=>({productVariantId:P.id,quantity:P.quantity})),checker:gt(this.selectedChecker,i),calculator:gt(this.selectedCalculator,d)};return this.dataService.shippingMethod.testShippingMethod(h).mapSingle(P=>P.testShippingMethod)})),Ht(this.detailForm.get(["checker"]).valueChanges,this.detailForm.get(["calculator"]).valueChanges).pipe(St(this.destroy$)).subscribe(()=>this.testDataUpdated=!0)}ngOnDestroy(){this.destroy()}updateCode(e,n){if(!e){let i=this.detailForm.get(["code"]);i&&i.pristine&&i.setValue((0,tr.normalizeString)(n,"-"))}}selectChecker(e){this.selectedCheckerDefinition=e,this.selectedChecker=Nt(e);let n=this.detailForm.get("checker");n&&(n.clearValidators(),n.updateValueAndValidity({onlySelf:!0}),n.patchValue(this.selectedChecker)),this.detailForm.markAsDirty()}selectCalculator(e){this.selectedCalculatorDefinition=e,this.selectedCalculator=Nt(e);let n=this.detailForm.get("calculator");n&&(n.clearValidators(),n.updateValueAndValidity({onlySelf:!0}),n.patchValue(this.selectedCalculator)),this.detailForm.markAsDirty()}create(){let e=this.selectedChecker,n=this.selectedCalculator,{checker:i,calculator:d}=this.detailForm.value;if(!e||!n||!i||!d)return;let h=this.detailForm.value,P=ze(H({},this.getUpdatedShippingMethod({createdAt:"",updatedAt:"",id:"",code:"",name:"",description:"",fulfillmentHandlerCode:"",checker:void 0,calculator:void 0,translations:[]},this.detailForm,this.languageCode)),{checker:gt(e,i),calculator:gt(n,d)});this.dataService.shippingMethod.createShippingMethod(P).subscribe(Ve=>{this.notificationService.success("common.notify-create-success",{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",Ve.createShippingMethod.id],{relativeTo:this.route})},Ve=>{this.notificationService.error("common.notify-create-error",{entity:"ShippingMethod"})})}save(){let e=this.selectedChecker,n=this.selectedCalculator,{checker:i,calculator:d}=this.detailForm.value;!e||!n||!i||!d||tt([this.entity$,this.languageCode$]).pipe(pe(1),te(([h,P])=>{let Ve=this.detailForm.value,$e=ze(H({},this.getUpdatedShippingMethod(h,this.detailForm,P)),{checker:gt(e,i),calculator:gt(n,d)});return this.dataService.shippingMethod.updateShippingMethod($e)})).subscribe(h=>{this.notificationService.success("common.notify-update-success",{entity:"ShippingMethod"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},h=>{console.error(h),this.notificationService.error("common.notify-update-error",{entity:"ShippingMethod"})})}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length&&this.selectedChecker&&this.selectedCalculator)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}getUpdatedShippingMethod(e,n,i){let d=n.value,h=Dt({translatable:e,updatedFields:d,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:e.name||"",description:e.description||""}});return ze(H({},h),{fulfillmentHandler:d.fulfillmentHandler})}setFormValues(e,n){let i=$t(e,n);this.detailForm.patchValue({name:i?.name??"",description:i?.description??"",code:e.code,fulfillmentHandler:e.fulfillmentHandlerCode,checker:e.checker||{},calculator:e.calculator||{}}),this.selectedChecker||(this.selectedChecker=e.checker&&{code:e.checker.code,args:e.checker.args.map(d=>ze(H({},d),{value:wt(d.value)}))}),this.selectedCalculator||(this.selectedCalculator=e.calculator&&{code:e.calculator?.code,args:e.calculator?.args.map(d=>ze(H({},d),{value:wt(d.value)}))}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customFields"]),e,i)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-shipping-method-detail"]],standalone:!1,features:[A],decls:56,vars:69,consts:[["updateButton",""],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","shipping-method-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"input","readonly"],["for","code",3,"label","readOnlyToggle"],["id","code","type","text","formControlName","code",3,"readonly"],["formControlName","description",1,"form-grid-span",3,"readonly","label"],["for","fulfillmentHandler",3,"label"],["name","fulfillmentHandler","formControlName","fulfillmentHandler",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","shipping-method-detail",3,"entity$","detailForm"],[3,"title"],["class","card-span","formControlName","checker",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],["class","card-span",4,"ngIf"],["class","card-span","formControlName","calculator",3,"operation","operationDefinition","readonly","remove",4,"ngIf"],[1,"card-span",3,"orderLinesChange"],[1,"mt-2",3,"addressChange"],[1,"mt-2",3,"runTest","currencyCode","okToRun","testDataUpdated","testResult"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],[3,"value"],["formGroupName","customFields",3,"title"],["entityName","ShippingMethod",3,"customFields","customFieldsFormGroup"],["formControlName","checker",1,"card-span",3,"remove","operation","operationDefinition","readonly"],[1,"card-span"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],["formControlName","calculator",1,"card-span",3,"remove","operation","operationDefinition","readonly"]],template:function(n,i){if(n&1){let d=S();l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",1),a(4,"async"),a(5,"async"),a(6,"async"),_("languageCodeChange",function(P){return b(d),F(i.setLanguage(P))}),m()(),l(7,"vdr-ab-right"),c(8,"vdr-action-bar-items",2),u(9,Nl,3,4,"button",3),a(10,"async"),u(11,Ol,1,1,"ng-template",null,0,ne),c(13,"vdr-action-bar-dropdown-menu",2),m()()(),l(14,"form",4)(15,"vdr-page-detail-layout")(16,"vdr-page-detail-sidebar"),u(17,Vl,2,1,"vdr-card",5),a(18,"async"),m(),l(19,"vdr-page-block")(20,"vdr-card")(21,"div",6)(22,"vdr-form-field",7),a(23,"translate"),l(24,"input",8),a(25,"hasPermission"),_("input",function(P){return b(d),F(i.updateCode(i.entity==null?null:i.entity.code,P.target.value))}),m()(),l(26,"vdr-form-field",9),a(27,"translate"),a(28,"hasPermission"),c(29,"input",10),a(30,"hasPermission"),m(),c(31,"vdr-rich-text-editor",11),a(32,"hasPermission"),a(33,"translate"),l(34,"vdr-form-field",12),a(35,"translate"),l(36,"select",13),a(37,"hasPermission"),u(38,$l,2,3,"option",14),m()()()(),u(39,Gl,3,5,"vdr-card",15),c(40,"vdr-custom-detail-component-host",16),l(41,"vdr-card",17),a(42,"translate"),u(43,ql,2,5,"vdr-configurable-input",18)(44,Ul,8,4,"div",19),m(),l(45,"vdr-card",17),a(46,"translate"),u(47,Hl,2,5,"vdr-configurable-input",20)(48,jl,8,4,"div",19),m(),l(49,"vdr-card",17),a(50,"translate"),l(51,"vdr-test-order-builder",21),_("orderLinesChange",function(P){return b(d),F(i.setTestOrderLines(P))}),m(),l(52,"vdr-test-address-form",22),_("addressChange",function(P){return b(d),F(i.setTestAddress(P))}),m(),l(53,"vdr-shipping-method-test-result",23),a(54,"async"),a(55,"async"),_("runTest",function(){return b(d),F(i.runTest())}),m()()()()()}if(n&2){let d,h=ie(12);r(3),o("disabled",s(4,31,i.isNew$))("availableLanguageCodes",s(5,33,i.availableLanguages$))("currentLanguageCode",s(6,35,i.languageCode$)),r(6),o("ngIf",s(10,37,i.isNew$))("ngIfElse",h),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(18,39,i.entity$)),r(5),o("label",s(23,41,"common.name")),r(2),o("readonly",!s(25,43,i.updatePermission)),r(2),o("label",s(27,45,"common.code"))("readOnlyToggle",s(28,47,i.updatePermission)),r(3),o("readonly",!s(30,49,i.updatePermission)),r(2),o("readonly",!s(32,51,i.updatePermission))("label",s(33,53,"common.description")),r(3),o("label",s(35,55,"settings.fulfillment-handler")),r(2),o("vdrDisabled",!s(37,57,i.updatePermission)),r(2),o("ngForOf",i.fulfillmentHandlers),r(),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm),r(),o("title",s(42,59,"settings.shipping-eligibility-checker")),r(2),o("ngIf",i.selectedChecker&&i.selectedCheckerDefinition),r(),o("ngIf",!i.selectedChecker||!i.selectedCheckerDefinition),r(),o("title",s(46,61,"settings.shipping-calculator")),r(2),o("ngIf",i.selectedCalculator&&i.selectedCalculatorDefinition),r(),o("ngIf",!i.selectedCalculator||!i.selectedCalculatorDefinition),r(),o("title",s(50,63,"settings.test-shipping-method")),r(4),o("currencyCode",(d=s(54,65,i.activeChannel$))==null?null:d.currencyCode)("okToRun",i.allTestDataPresent()&&i.testDataUpdated&&i.detailForm.valid)("testDataUpdated",i.testDataUpdated)("testResult",s(55,67,i.testResult$))}},dependencies:[j,U,E,re,vt,yt,Q,_t,Y,oe,ae,se,he,N,V,w,$,ui,le,J,Ze,Rt,li,mi,pi,di,O,M,Ge,_e,Se,L,ve,ye,be,me,bi,Fi,er,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var nr=Ee({location:"shipping-method-list",requiresPermission:t=>t.includes(y.DeleteShippingMethod),getItemName:t=>t.name,bulkDelete:(t,p)=>t.shippingMethod.deleteShippingMethods(p).pipe(Z(e=>e.deleteShippingMethods))}),A0=D`
    mutation AssignShippingMethodsToChannel($input: AssignShippingMethodsToChannelInput!) {
        assignShippingMethodsToChannel(input: $input) {
            id
            name
        }
    }
`,E0=D`
    mutation RemoveShippingMethodsFromChannel($input: RemoveShippingMethodsFromChannelInput!) {
        removeShippingMethodsFromChannel(input: $input) {
            id
            name
        }
    }
`,or=Ot({location:"shipping-method-list",requiresPermission:t=>t.includes(y.UpdateShippingMethod)||t.includes(y.UpdateSettings),getItemName:t=>t.name,bulkAssignToChannel:(t,p,e)=>e.map(n=>t.mutate(hn,{input:{channelId:n,shippingMethodIds:p}}).pipe(Z(i=>i.assignShippingMethodsToChannel)))}),rr=Vt({location:"shipping-method-list",requiresPermission:t=>t.includes(y.DeleteShippingMethod)||t.includes(y.DeleteSettings),getItemName:t=>t.name,bulkRemoveFromChannel:(t,p,e)=>t.mutate(Cn,{input:{channelId:e,shippingMethodIds:p}}).pipe(Z(n=>n.removeShippingMethodsFromChannel))});var Wl=()=>["CreateSettings","CreateShippingMethod"],Kl=()=>["./","create"],Ql=t=>["./",t];function Yl(t,p){t&1&&(l(0,"a",14),c(1,"clr-icon",15),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Kl)),r(2),C(" ",s(3,2,"settings.create-new-shipping-method")," "))}function Xl(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Jl(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function em(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function tm(t,p){if(t&1&&(l(0,"a",16)(1,"span"),f(2),m(),c(3,"clr-icon",17),m()),t&2){let e=p.item;o("routerLink",W(2,Ql,e.id)),r(2),x(e.name)}}function im(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.code," ")}}function nm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.description," ")}}function om(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.fulfillmentHandlerCode," ")}}function rm(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",18),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var R0=D`
    query GetShippingMethodList($options: ShippingMethodListOptions) {
        shippingMethods(options: $options) {
            items {
                ...ShippingMethodListItem
            }
            totalItems
        }
    }
    fragment ShippingMethodListItem on ShippingMethod {
        id
        createdAt
        updatedAt
        code
        name
        description
        fulfillmentHandlerCode
    }
`,ar=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="shipping-method-list",this.customFields=this.getCustomFieldConfig("ShippingMethod"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addFilter({name:"code",type:{kind:"text"},label:"common.code",filterField:"code"}).addFilter({name:"description",type:{kind:"text"},label:"common.description",filterField:"description"}).addFilter({name:"fulfillmentHandler",type:{kind:"text"},label:"settings.fulfillment-handler",filterField:"fulfillmentHandlerCode"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"code"}).addSort({name:"description"}).addSort({name:"fulfillmentHandlerCode"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:_n,getItems:e=>e.shippingMethods,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-shipping-method-list"]],standalone:!1,features:[A],decls:40,vars:61,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","shipping-method-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","shipping-method-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","code",3,"heading","sort"],["id","description",3,"heading","sort","hiddenByDefault"],["id","fulfillment-handler",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),a(4,"async"),a(5,"async"),_("languageCodeChange",function(h){return i.setLanguage(h)}),m()(),l(6,"vdr-ab-right"),c(7,"vdr-action-bar-items",1),u(8,Yl,4,5,"a",2),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"vdr-data-table-2",3),a(11,"async"),a(12,"async"),a(13,"async"),a(14,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),a(17,"translate"),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,Xl,1,1,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,Jl,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,em,2,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,tm,4,4,"ng-template"),m(),l(30,"vdr-dt2-column",10),a(31,"translate"),u(32,im,1,1,"ng-template"),m(),l(33,"vdr-dt2-column",11),a(34,"translate"),u(35,nm,1,1,"ng-template"),m(),l(36,"vdr-dt2-column",12),a(37,"translate"),u(38,om,1,1,"ng-template"),m(),u(39,rm,1,2,"vdr-dt2-custom-field-column",13),m()),n&2&&(r(3),o("availableLanguageCodes",s(4,32,i.availableLanguages$))("currentLanguageCode",s(5,34,i.contentLanguage$)),r(5),o("vdrIfPermissions",q(60,Wl)),r(2),o("id",i.dataTableListId)("items",s(11,36,i.items$))("itemsPerPage",s(12,38,i.itemsPerPage$))("totalItems",s(13,40,i.totalItems$))("currentPage",s(14,42,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(17,44,"catalog.filter-by-name")),r(2),o("heading",s(19,46,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(22,48,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(25,50,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(28,52,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(31,54,"common.code"))("sort",i.sorts.get("code")),r(3),o("heading",s(34,56,"common.description"))("sort",i.sorts.get("description"))("hiddenByDefault",!0),r(3),o("heading",s(37,58,"settings.fulfillment-handler"))("sort",i.sorts.get("fulfillmentHandlerCode")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,ge,N,V,w,$,Ze,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],encapsulation:2,changeDetection:0})}}return t})();var am=t=>({pattern:t});function sm(t,p){if(t&1){let e=S();l(0,"button",12),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.create")," ")}}function lm(t,p){if(t&1){let e=S();l(0,"button",12),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",e.detailForm.invalid||e.detailForm.pristine),r(),C(" ",s(2,2,"common.update")," ")}}function mm(t,p){t&1&&u(0,lm,3,4,"button",13),t&2&&o("vdrIfPermissions","UpdateStockLocation")}function pm(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",14),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function dm(t,p){if(t&1&&(l(0,"vdr-card",15),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",16),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Bi=D`
    fragment StockLocationDetail on StockLocation {
        id
        createdAt
        updatedAt
        name
        description
    }
`,U0=D`
    query GetStockLocationDetail($id: ID!) {
        stockLocation(id: $id) {
            ...StockLocationDetail
        }
    }
    ${Bi}
`,H0=D`
    mutation CreateStockLocation($input: CreateStockLocationInput!) {
        createStockLocation(input: $input) {
            ...StockLocationDetail
        }
    }
    ${Bi}
`,z0=D`
    mutation UpdateStockLocation($input: UpdateStockLocationInput!) {
        updateStockLocation(input: $input) {
            ...StockLocationDetail
        }
    }
    ${Bi}
`,sr=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("StockLocation"),this.detailForm=this.formBuilder.group({name:["",R.required],description:[""],customFields:this.formBuilder.group(Pe(this.customFields))})}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}create(){if(!this.detailForm.dirty)return;let{name:e,description:n,customFields:i}=this.detailForm.value;if(!e)return;let d={name:e,description:n,customFields:i};this.dataService.mutate(yn,{input:d}).subscribe(h=>{this.notificationService.success("common.notify-create-success",{entity:"StockLocation"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",h.createStockLocation.id],{relativeTo:this.route})},h=>{this.notificationService.error("common.notify-create-error",{entity:"StockLocation"})})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,name:e.name,description:e.description,customFields:e.customFields};return this.dataService.mutate(bn,{input:i})})).subscribe(n=>{this.notificationService.success("common.notify-update-success",{entity:"StockLocation"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error("common.notify-update-error",{entity:"StockLocation"})})}setFormValues(e){this.detailForm.patchValue({name:e.name,description:e.description}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-stock-location-detail"]],standalone:!1,features:[A],decls:29,vars:28,consts:[["updateButton",""],["locationId","stock-location-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","slug",1,"form-grid-span",3,"label","errors"],["formControlName","description",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","stock-location-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","StockLocation",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,sm,3,4,"button",2),a(6,"async"),u(7,mm,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,pm,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),c(20,"input",7),a(21,"hasPermission"),m(),l(22,"vdr-form-field",8),a(23,"translate"),a(24,"translate"),c(25,"vdr-rich-text-editor",9),a(26,"hasPermission"),m()()(),u(27,dm,3,5,"vdr-card",10),c(28,"vdr-custom-detail-component-host",11),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,12,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,14,i.entity$)),r(5),o("label",s(19,16,"common.name")),r(2),o("readonly",!s(21,18,"UpdateStockLocation")),r(2),o("label",s(23,20,"common.description"))("errors",W(26,am,s(24,22,"catalog.slug-pattern-error"))),r(3),o("readonly",!s(26,24,"UpdateStockLocation")),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[E,re,Q,Y,oe,ae,se,he,N,V,w,$,le,J,Rt,O,M,_e,Se,L,ve,ye,be,me,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var Y0=D`
    mutation DeleteStockLocations($input: [DeleteStockLocationInput!]!) {
        deleteStockLocations(input: $input) {
            result
            message
        }
    }
`,X0=D`
    mutation AssignStockLocationsToChannel($input: AssignStockLocationsToChannelInput!) {
        assignStockLocationsToChannel(input: $input) {
            id
            name
        }
    }
`,J0=D`
    mutation RemoveStockLocationsFromChannel($input: RemoveStockLocationsFromChannelInput!) {
        removeStockLocationsFromChannel(input: $input) {
            id
            name
        }
    }
`,lr=Ee({location:"stock-location-list",requiresPermission:t=>t.includes(y.DeleteStockLocation)||t.includes(y.DeleteCatalog),getItemName:t=>t.name,bulkDelete:(t,p)=>t.mutate(Fn,{input:p.map(e=>({id:e}))}).pipe(Z(e=>e.deleteStockLocations)),shouldRetryItem:t=>t.result===Yi.NOT_DELETED}),mr=Ot({location:"stock-location-list",requiresPermission:t=>t.includes(y.UpdateCatalog)||t.includes(y.UpdateStockLocation),getItemName:t=>t.name,bulkAssignToChannel:(t,p,e)=>e.map(n=>t.mutate(Tn,{input:{channelId:n,stockLocationIds:p}}).pipe(Z(i=>i.assignStockLocationsToChannel)))}),pr=Vt({location:"stock-location-list",requiresPermission:t=>t.includes(y.DeleteCatalog)||t.includes(y.DeleteStockLocation),getItemName:t=>t.name,bulkRemoveFromChannel:(t,p,e)=>t.mutate(Sn,{input:{channelId:e,stockLocationIds:p}}).pipe(Z(n=>n.removeStockLocationsFromChannel))});var cm=()=>["CreateStockLocation"],um=()=>["./","create"],fm=t=>["./",t];function gm(t,p){t&1&&(l(0,"a",11),c(1,"clr-icon",12),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,um)),r(2),C(" ",s(3,2,"catalog.create-new-stock-location")," "))}function hm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Cm(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function _m(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function vm(t,p){if(t&1&&(l(0,"a",13)(1,"span"),f(2),m(),c(3,"clr-icon",14),m()),t&2){let e=p.item;o("routerLink",W(2,fm,e.id)),r(2),x(e.name)}}function ym(t,p){if(t&1&&c(0,"div",15),t&2){let e=p.item;o("innerHTML",e.description,Oi)}}function bm(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",16),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var nu=D`
    query GetStockLocationList($options: StockLocationListOptions) {
        stockLocations(options: $options) {
            items {
                ...StockLocationListItem
            }
            totalItems
        }
    }
    fragment StockLocationListItem on StockLocation {
        id
        createdAt
        updatedAt
        name
        description
    }
`,dr=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="stock-location-list",this.customFields=this.getCustomFieldConfig("StockLocation"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilters([{name:"enabled",type:{kind:"text"},label:"common.enabled",filterField:"name"},{name:"sku",type:{kind:"text"},label:"catalog.sku",filterField:"description"}]).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().addSorts([{name:"id"},{name:"createdAt"},{name:"updatedAt"},{name:"name"},{name:"description"}]).addCustomFieldSorts(this.customFields).connectToRoute(this.route),this.configure({document:Dn,getItems:e=>e.stockLocations,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.sorts.valueChanges,this.filters.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-stock-location-list"]],standalone:!1,features:[A],decls:31,vars:47,consts:[["locationId","stock-location-list"],["class","button primary",3,"routerLink",4,"vdrIfPermissions"],[1,"mt-2",3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","stock-location-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault","sort"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","description",3,"heading","sort"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"button","primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[1,"description",3,"innerHTML"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,gm,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,hm,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,Cm,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,_m,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,vm,4,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,ym,1,1,"ng-template"),m(),u(30,bm,1,2,"vdr-dt2-custom-field-column",10),m()),n&2&&(r(5),o("vdrIfPermissions",q(46,cm)),r(2),o("id",i.dataTableListId)("items",s(8,26,i.items$))("itemsPerPage",s(9,28,i.itemsPerPage$))("totalItems",s(10,30,i.totalItems$))("currentPage",s(11,32,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,34,"catalog.filter-by-name")),r(2),o("heading",s(16,36,"common.id"))("hiddenByDefault",!0)("sort",i.sorts.get("id")),r(3),o("heading",s(19,38,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,40,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,42,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(28,44,"common.description"))("sort",i.sorts.get("description")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,ge,N,V,w,$,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],styles:[`.description>p{margin-top:0!important}
/*# sourceMappingURL=stock-location-list.component-OEG3AOY3.css.map */`],changeDetection:0})}}return t})();function Fm(t,p){if(t&1){let e=S();l(0,"button",12),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.create")," ")}}function Tm(t,p){if(t&1){let e=S();l(0,"button",12),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.update")," ")}}function Sm(t,p){if(t&1&&u(0,Tm,3,4,"button",13),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function Dm(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",14),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function Im(t,p){if(t&1&&(l(0,"vdr-card",15),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",16),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var pu=D`
    query GetTaxCategoryDetail($id: ID!) {
        taxCategory(id: $id) {
            ...TaxCategory
        }
    }
    ${oi}
`,cr=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("TaxCategory"),this.detailForm=this.formBuilder.group({name:["",R.required],isDefault:!1,customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.UpdateSettings,y.UpdateTaxCategory]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;let e=this.detailForm.value,n={name:e.name,isDefault:e.isDefault,customFields:e.customFields};this.dataService.settings.createTaxCategory(n).subscribe(i=>{this.notificationService.success("common.notify-create-success",{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",i.createTaxCategory.id],{relativeTo:this.route})},i=>{this.notificationService.error("common.notify-create-error",{entity:"TaxCategory"})})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,name:e.name,isDefault:e.isDefault,customFields:e.customFields};return this.dataService.settings.updateTaxCategory(i)})).subscribe(n=>{this.notificationService.success("common.notify-update-success",{entity:"TaxCategory"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error("common.notify-update-error",{entity:"TaxCategory"})})}setFormValues(e,n){this.detailForm.patchValue({name:e.name,isDefault:e.isDefault}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-tax-detail"]],standalone:!1,features:[A],decls:29,vars:23,consts:[["updateButton",""],["locationId","tax-category-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","isDefault",3,"label"],["type","checkbox","clrToggle","","id","isDefault","formControlName","isDefault",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","tax-category-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","TaxCategory",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,Fm,3,4,"button",2),a(6,"async"),u(7,Sm,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,Dm,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),c(20,"input",7),a(21,"hasPermission"),m(),l(22,"vdr-form-field",8),a(23,"translate"),l(24,"clr-toggle-wrapper"),c(25,"input",9),a(26,"hasPermission"),m()()()(),u(27,Im,3,5,"vdr-card",10),c(28,"vdr-custom-detail-component-host",11),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,11,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,13,i.entity$)),r(5),o("label",s(19,15,"common.name")),r(2),o("readonly",!s(21,17,i.updatePermission)),r(2),o("label",s(23,19,"common.default-tax-category")),r(3),o("vdrDisabled",!s(26,21,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[Xe,Ye,E,re,Q,Qe,Y,oe,ae,se,he,N,V,w,$,le,J,O,M,Ge,_e,Se,L,ve,ye,be,me,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var ur=Ee({location:"tax-category-list",requiresPermission:t=>t.includes(y.DeleteSettings)||t.includes(y.DeleteTaxCategory),getItemName:t=>t.name,bulkDelete:(t,p)=>t.settings.deleteTaxCategories(p).pipe(Z(e=>e.deleteTaxCategories))});var xm=()=>["CreateSettings","CreateTaxCategory"],Pm=()=>["./","create"],Bm=t=>["./",t];function km(t,p){t&1&&(l(0,"a",11),c(1,"clr-icon",12),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Pm)),r(2),C(" ",s(3,2,"settings.create-new-tax-category")," "))}function Lm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Am(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Em(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function Mm(t,p){if(t&1&&(l(0,"a",13)(1,"span"),f(2),m(),c(3,"clr-icon",14),m()),t&2){let e=p.item;o("routerLink",W(2,Bm,e.id)),r(2),x(e.name)}}function wm(t,p){t&1&&(l(0,"vdr-chip"),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.default-tax-category")))}function Nm(t,p){if(t&1&&u(0,wm,3,3,"vdr-chip",15),t&2){let e=p.item;o("ngIf",e.isDefault)}}function Rm(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",16),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var Cu=D`
    query GetTaxCategoryList($options: TaxCategoryListOptions) {
        taxCategories(options: $options) {
            items {
                ...TaxCategory
            }
            totalItems
        }
    }
    ${oi}
`,fr=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="tax-category-list",this.customFields=this.serverConfigService.getCustomFieldsFor("TaxCategory"),this.filters=this.createFilterCollection().addIdFilter().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:xn,getItems:e=>e.taxCategories,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-tax-list"]],standalone:!1,features:[A],decls:31,vars:45,consts:[["locationId","tax-category-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","tax-category-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","default-tax-category",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],[4,"ngIf"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,km,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,Lm,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,Am,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,Em,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,Mm,4,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,Nm,1,1,"ng-template"),m(),u(30,Rm,1,2,"vdr-dt2-custom-field-column",10),m()),n&2&&(r(5),o("vdrIfPermissions",q(44,xm)),r(2),o("id",i.dataTableListId)("items",s(8,24,i.items$))("itemsPerPage",s(9,26,i.itemsPerPage$))("totalItems",s(10,28,i.totalItems$))("currentPage",s(11,30,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,32,"catalog.filter-by-name")),r(2),o("heading",s(16,34,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,36,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,38,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,40,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(28,42,"common.default-tax-category")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,E,ge,N,V,w,$,qe,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],encapsulation:2,changeDetection:0})}}return t})();function Om(t,p){if(t&1){let e=S();l(0,"button",20),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.create")," ")}}function Vm(t,p){if(t&1){let e=S();l(0,"button",20),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.update")," ")}}function $m(t,p){if(t&1&&u(0,Vm,3,4,"button",21),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function Gm(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",22),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function qm(t,p){if(t&1&&(l(0,"option",23),f(1),m()),t&2){let e=p.$implicit;o("value",e.id),r(),C(" ",e.name," ")}}function Zm(t,p){if(t&1&&(l(0,"vdr-card",24),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",25),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Du=D`
    query GetTaxRateDetail($id: ID!) {
        taxRate(id: $id) {
            ...TaxRate
        }
    }
    ${ri}
`,gr=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("TaxRate"),this.detailForm=this.formBuilder.group({name:["",R.required],enabled:[!0],value:[0,R.required],taxCategoryId:["",R.required],zoneId:["",R.required],customerGroupId:[""],customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.UpdateSettings,y.UpdateTaxRate]}ngOnInit(){this.init(),this.taxCategories$=this.dataService.settings.getTaxCategories({take:100}).mapSingle(e=>e.taxCategories.items)}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;let{name:e,enabled:n,value:i,taxCategoryId:d,zoneId:h,customerGroupId:P,customFields:Ve}=this.detailForm.value;if(!e||n==null||i==null||!d||!h)return;let $e=this.detailForm.value,Ut={name:e,enabled:n,value:i,categoryId:d,zoneId:h,customerGroupId:$e.customerGroupId,customFields:$e.customFields};this.dataService.settings.createTaxRate(Ut).subscribe(Kt=>{this.notificationService.success("common.notify-create-success",{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",Kt.createTaxRate.id],{relativeTo:this.route})},Kt=>{this.notificationService.error("common.notify-create-error",{entity:"TaxRate"})})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,name:e.name,enabled:e.enabled,value:e.value,categoryId:e.taxCategoryId,zoneId:e.zoneId,customerGroupId:e.customerGroupId,customFields:e.customFields};return this.dataService.settings.updateTaxRate(i)})).subscribe(n=>{this.notificationService.success("common.notify-update-success",{entity:"TaxRate"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error("common.notify-update-error",{entity:"TaxRate"})})}setFormValues(e,n){this.detailForm.patchValue({name:e.name,enabled:e.enabled,value:e.value,taxCategoryId:e.category?e.category.id:"",zoneId:e.zone?e.zone.id:"",customerGroupId:e.customerGroup?e.customerGroup.id:""}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-tax-rate-detail"]],standalone:!1,features:[A],decls:45,vars:44,consts:[["updateButton",""],["locationId","tax-rate-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],["for","enabled",3,"label"],["type","checkbox","clrToggle","","id","enabled","formControlName","enabled",3,"vdrDisabled"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","value",3,"label"],["suffix","%"],["id","value","type","number","step","0.1","formControlName","value",3,"readonly"],["for","taxCategoryId",3,"label"],["name","taxCategoryId","formControlName","taxCategoryId",3,"vdrDisabled"],[3,"value",4,"ngFor","ngForOf"],["for","zoneId",3,"label"],["name","zoneId","formControlName","zoneId",3,"vdrDisabled"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","tax-rate-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],[3,"value"],["formGroupName","customFields",3,"title"],["entityName","TaxRate",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,Om,3,4,"button",2),a(6,"async"),u(7,$m,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar")(13,"vdr-card")(14,"vdr-form-field",4),a(15,"translate"),l(16,"clr-toggle-wrapper"),c(17,"input",5),a(18,"hasPermission"),m()()(),u(19,Gm,2,1,"vdr-card",6),a(20,"async"),m(),l(21,"vdr-page-block")(22,"vdr-card")(23,"div",7)(24,"vdr-form-field",8),a(25,"translate"),c(26,"input",9),a(27,"hasPermission"),m(),l(28,"vdr-form-field",10),a(29,"translate"),l(30,"vdr-affixed-input",11),c(31,"input",12),a(32,"hasPermission"),m()(),l(33,"vdr-form-field",13),a(34,"translate"),l(35,"select",14),a(36,"hasPermission"),u(37,qm,2,2,"option",15),a(38,"async"),m()(),l(39,"vdr-form-field",16),a(40,"translate"),c(41,"vdr-zone-selector",17),a(42,"hasPermission"),m()()(),u(43,Zm,3,5,"vdr-card",18),c(44,"vdr-custom-detail-component-host",19),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,18,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(4),o("label",s(15,20,"common.enabled")),r(3),o("vdrDisabled",!s(18,22,i.updatePermission)),r(2),o("ngIf",s(20,24,i.entity$)),r(5),o("label",s(25,26,"common.name")),r(2),o("readonly",!s(27,28,i.updatePermission)),r(2),o("label",s(29,30,"settings.rate")),r(3),o("readonly",!s(32,32,i.updatePermission)),r(2),o("label",s(34,34,"settings.tax-category")),r(2),o("vdrDisabled",!s(36,36,i.updatePermission)),r(2),o("ngForOf",s(38,38,i.taxCategories$)),r(2),o("label",s(40,40,"settings.zone")),r(2),o("vdrDisabled",!s(42,42,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[Xe,Ye,U,E,re,vt,yt,Q,Et,Qe,_t,Y,oe,ae,se,he,N,V,w,$,to,le,J,O,M,Ge,_e,Se,L,ve,ye,be,me,hi,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var hr=Ee({location:"tax-rate-list",requiresPermission:t=>t.includes(y.DeleteSettings)||t.includes(y.DeleteTaxRate),getItemName:t=>t.name,bulkDelete:(t,p)=>t.settings.deleteTaxRates(p).pipe(Z(e=>e.deleteTaxRates))});var Um=()=>["CreateSettings","CreateTaxRate"],Hm=()=>["./","create"],zm=t=>["./",t];function jm(t,p){t&1&&(l(0,"a",15),c(1,"clr-icon",16),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,Hm)),r(2),C(" ",s(3,2,"settings.create-new-tax-rate")," "))}function Wm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Km(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function Qm(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function Ym(t,p){if(t&1&&(l(0,"a",17)(1,"span"),f(2),m(),c(3,"clr-icon",18),m()),t&2){let e=p.item;o("routerLink",W(2,zm,e.id)),r(2),x(e.name)}}function Xm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.category.name," ")}}function Jm(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.zone.name," ")}}function ep(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.customerGroup==null?null:e.customerGroup.name," ")}}function tp(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.value,"% ")}}function ip(t,p){t&1&&(l(0,"vdr-chip",21),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.enabled")))}function np(t,p){t&1&&(l(0,"vdr-chip",22),f(1),a(2,"translate"),m()),t&2&&(r(),x(s(2,1,"common.disabled")))}function op(t,p){if(t&1&&u(0,ip,3,3,"vdr-chip",19)(1,np,3,3,"vdr-chip",20),t&2){let e=p.item;o("ngIf",e.enabled),r(),o("ngIf",!e.enabled)}}function rp(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",23),t&2){let e=p.$implicit,n=g();o("customField",e)("sorts",n.sorts)}}var Au=D`
    query GetTaxRateList($options: TaxRateListOptions) {
        taxRates(options: $options) {
            items {
                ...TaxRate
            }
            totalItems
        }
    }
    ${ri}
`,Cr=(()=>{class t extends Ae{constructor(){super(),this.dataTableListId="tax-rate-list",this.customFields=this.getCustomFieldConfig("TaxRate"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addFilter({name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"}).addFilter({name:"value",type:{kind:"number"},label:"common.value",filterField:"value"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addSort({name:"value"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:Bn,getItems:e=>e.taxRates,setVariables:(e,n)=>({options:{skip:e,take:n,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-tax-rate-list"]],standalone:!1,features:[A],decls:43,vars:59,consts:[["locationId","tax-rate-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","tax-rate-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","tax-category",3,"heading"],["id","zone",3,"heading"],["id","customer-group",3,"heading","hiddenByDefault"],["id","tax-rate",3,"heading","sort"],["id","enabled",3,"heading"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(n,i){n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",0),u(5,jm,4,5,"a",1),c(6,"vdr-action-bar-dropdown-menu",0),m()()(),l(7,"vdr-data-table-2",2),a(8,"async"),a(9,"async"),a(10,"async"),a(11,"async"),_("pageChange",function(h){return i.setPageNumber(h)})("itemsPerPageChange",function(h){return i.setItemsPerPage(h)})("visibleColumnsChange",function(h){return i.setVisibleColumns(h)}),c(12,"vdr-bulk-action-menu",3)(13,"vdr-dt2-search",4),a(14,"translate"),l(15,"vdr-dt2-column",5),a(16,"translate"),u(17,Wm,1,1,"ng-template"),m(),l(18,"vdr-dt2-column",6),a(19,"translate"),u(20,Km,2,4,"ng-template"),m(),l(21,"vdr-dt2-column",7),a(22,"translate"),u(23,Qm,2,4,"ng-template"),m(),l(24,"vdr-dt2-column",8),a(25,"translate"),u(26,Ym,4,4,"ng-template"),m(),l(27,"vdr-dt2-column",9),a(28,"translate"),u(29,Xm,1,1,"ng-template"),m(),l(30,"vdr-dt2-column",10),a(31,"translate"),u(32,Jm,1,1,"ng-template"),m(),l(33,"vdr-dt2-column",11),a(34,"translate"),u(35,ep,1,1,"ng-template"),m(),l(36,"vdr-dt2-column",12),a(37,"translate"),u(38,tp,1,1,"ng-template"),m(),l(39,"vdr-dt2-column",13),a(40,"translate"),u(41,op,2,2,"ng-template"),m(),u(42,rp,1,2,"vdr-dt2-custom-field-column",14),m()),n&2&&(r(5),o("vdrIfPermissions",q(58,Um)),r(2),o("id",i.dataTableListId)("items",s(8,30,i.items$))("itemsPerPage",s(9,32,i.itemsPerPage$))("totalItems",s(10,34,i.totalItems$))("currentPage",s(11,36,i.currentPage$))("filters",i.filters),r(5),o("hostComponent",i)("selectionManager",i.selectionManager),r(),o("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(14,38,"catalog.filter-by-name")),r(2),o("heading",s(16,40,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(19,42,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),r(3),o("heading",s(22,44,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),r(3),o("heading",s(25,46,"common.name"))("optional",!1)("sort",i.sorts.get("name")),r(3),o("heading",s(28,48,"settings.tax-category")),r(3),o("heading",s(31,50,"settings.zone")),r(3),o("heading",s(34,52,"customer.customer-group"))("hiddenByDefault",!0),r(3),o("heading",s(37,54,"settings.tax-rate"))("sort",i.sorts.get("value")),r(3),o("heading",s(40,56,"common.enabled")),r(3),o("ngForOf",i.customFields))},dependencies:[j,U,E,ge,N,V,w,$,qe,O,M,Te,xe,De,Ie,Re,L,B,I,Ce],encapsulation:2,changeDetection:0})}}return t})();var _r=(()=>{class t{constructor(e){this.dataService=e,this.testDataUpdated=!1,this.fetchTestResult$=new Ct}ngOnInit(){this.activeChannel$=this.dataService.settings.getActiveChannel().mapStream(e=>e.activeChannel),this.testResult$=this.fetchTestResult$.pipe(ft(([e,n])=>{let i={shippingAddress:ze(H({},e),{streetLine1:"test"}),lines:n.map(d=>({productVariantId:d.id,quantity:d.quantity}))};return this.dataService.shippingMethod.testEligibleShippingMethods(i).mapSingle(d=>d.testEligibleShippingMethods)}))}setTestOrderLines(e){this.testOrderLines=e,this.testDataUpdated=!0}setTestAddress(e){this.testAddress=e,this.testDataUpdated=!0}allTestDataPresent(){return!!(this.testAddress&&this.testOrderLines&&this.testOrderLines.length)}runTest(){this.fetchTestResult$.next([this.testAddress,this.testOrderLines]),this.testDataUpdated=!1}static{this.\u0275fac=function(n){return new(n||t)(v(G))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-test-shipping-methods"]],standalone:!1,decls:9,vars:8,consts:[[1,"test-wrapper"],[1,""],[3,"orderLinesChange"],[3,"addressChange"],[1,"mt-1",3,"runTest","currencyCode","okToRun","testDataUpdated","testResult"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"div",0)(2,"div",1)(3,"vdr-test-order-builder",2),_("orderLinesChange",function(h){return i.setTestOrderLines(h)}),m()(),l(4,"div",1)(5,"vdr-test-address-form",3),_("addressChange",function(h){return i.setTestAddress(h)}),m(),l(6,"vdr-shipping-eligibility-test-result",4),a(7,"async"),a(8,"async"),_("runTest",function(){return i.runTest()}),m()()()()),n&2){let d;r(6),o("currencyCode",(d=s(7,4,i.activeChannel$))==null?null:d.currencyCode)("okToRun",i.allTestDataPresent())("testDataUpdated",i.testDataUpdated)("testResult",s(8,6,i.testResult$))}},dependencies:[L,bi,Fi,Yo,B],styles:[`.test-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;gap:var(--space-unit)}.test-wrapper[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1}@media screen and (max-width: 992px){.test-wrapper[_ngcontent-%COMP%]{flex-direction:column}}
/*# sourceMappingURL=test-shipping-methods.component-R36JH2MD.css.map */`],changeDetection:0})}}return t})();function ap(t,p){if(t&1){let e=S();l(0,"button",10),_("click",function(){b(e);let i=g();return F(i.create())}),f(1),a(2,"translate"),m()}if(t&2){let e=g();o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.create")," ")}}function sp(t,p){if(t&1){let e=S();l(0,"button",10),_("click",function(){b(e);let i=g(2);return F(i.save())}),f(1),a(2,"translate"),m()}if(t&2){let e=g(2);o("disabled",!e.saveButtonEnabled()),r(),C(" ",s(2,2,"common.update")," ")}}function lp(t,p){if(t&1&&u(0,sp,3,4,"button",11),t&2){let e=g();o("vdrIfPermissions",e.updatePermission)}}function mp(t,p){if(t&1&&(l(0,"vdr-card"),c(1,"vdr-page-entity-info",12),m()),t&2){let e=p.ngIf;r(),o("entity",e)}}function pp(t,p){if(t&1&&(l(0,"vdr-card",13),a(1,"translate"),c(2,"vdr-tabbed-custom-fields",14),m()),t&2){let e=g();o("title",s(1,3,"common.custom-fields")),r(2),o("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))}}var Zu=D`
    query GetZoneDetail($id: ID!) {
        zone(id: $id) {
            ...ZoneDetail
        }
    }
    fragment ZoneDetail on Zone {
        id
        createdAt
        updatedAt
        name
    }
`,vr=(()=>{class t extends ue{constructor(e,n,i,d){super(),this.changeDetector=e,this.dataService=n,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Zone"),this.detailForm=this.formBuilder.group({name:["",R.required],customFields:this.formBuilder.group(Pe(this.customFields))}),this.updatePermission=[y.UpdateSettings,y.UpdateZone]}ngOnInit(){this.init()}ngOnDestroy(){this.destroy()}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid}create(){if(!this.detailForm.dirty)return;let{name:e,customFields:n}=this.detailForm.value;if(!e)return;let i={name:e,customFields:n};this.dataService.settings.createZone(i).subscribe(d=>{this.notificationService.success("common.notify-create-success",{entity:"Zone"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",d.createZone.id],{relativeTo:this.route})},d=>{this.notificationService.error("common.notify-create-error",{entity:"Zone"})})}save(){if(!this.detailForm.dirty)return;let e=this.detailForm.value;this.entity$.pipe(pe(1),te(n=>{let i={id:n.id,name:e.name,customFields:e.customFields};return this.dataService.settings.updateZone(i)})).subscribe(n=>{this.notificationService.success("common.notify-update-success",{entity:"Zone"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},n=>{this.notificationService.error("common.notify-update-error",{entity:"Zone"})})}setFormValues(e,n){this.detailForm.patchValue({name:e.name}),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e)}static{this.\u0275fac=function(n){return new(n||t)(v(de),v(G),v(ce),v(X))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-zone-detail"]],standalone:!1,features:[A],decls:24,vars:17,consts:[["updateButton",""],["locationId","zone-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","zone-detail",3,"entity$","detailForm"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Zone",3,"customFields","customFieldsFormGroup"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar"),c(2,"vdr-ab-left"),l(3,"vdr-ab-right"),c(4,"vdr-action-bar-items",1),u(5,ap,3,4,"button",2),a(6,"async"),u(7,lp,1,1,"ng-template",null,0,ne),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"form",3)(11,"vdr-page-detail-layout")(12,"vdr-page-detail-sidebar"),u(13,mp,2,1,"vdr-card",4),a(14,"async"),m(),l(15,"vdr-page-block")(16,"vdr-card")(17,"div",5)(18,"vdr-form-field",6),a(19,"translate"),c(20,"input",7),a(21,"hasPermission"),m()()(),u(22,pp,3,5,"vdr-card",8),c(23,"vdr-custom-detail-component-host",9),m()()()),n&2){let d=ie(8);r(5),o("ngIf",s(6,9,i.isNew$))("ngIfElse",d),r(5),o("formGroup",i.detailForm),r(3),o("ngIf",s(14,11,i.entity$)),r(5),o("label",s(19,13,"common.name")),r(2),o("readonly",!s(21,15,i.updatePermission)),r(2),o("ngIf",i.customFields.length),r(),o("entity$",i.entity$)("detailForm",i.detailForm)}},dependencies:[E,re,Q,Y,oe,ae,se,he,N,V,w,$,le,J,O,M,_e,Se,L,ve,ye,be,me,B,I,Fe],encapsulation:2,changeDetection:0})}}return t})();var yr=Ee({location:"zone-list",requiresPermission:t=>t.includes(y.DeleteSettings)||t.includes(y.DeleteZone),getItemName:t=>t.name,bulkDelete:(t,p)=>t.settings.deleteZones(p).pipe(Z(e=>e.deleteZones))});var dp=()=>["CreateSettings","CreateZone"],cp=()=>["./","create"],br=t=>["./",t],up=t=>({contents:t}),fp=t=>({zoneName:t});function gp(t,p){t&1&&(l(0,"a",6),c(1,"clr-icon",7),f(2),a(3,"translate"),m()),t&2&&(o("routerLink",q(4,cp)),r(2),C(" ",s(3,2,"settings.create-new-zone")," "))}function hp(t,p){if(t&1&&f(0),t&2){let e=p.item;C(" ",e.id," ")}}function Cp(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.createdAt,"short")," ")}}function _p(t,p){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=p.item;C(" ",k(1,1,e.updatedAt,"short")," ")}}function vp(t,p){if(t&1&&(l(0,"a",17)(1,"span"),f(2),m(),c(3,"clr-icon",18),m()),t&2){let e=p.item;o("routerLink",W(2,br,e.id)),r(2),x(e.name)}}function yp(t,p){if(t&1&&(l(0,"a",19)(1,"span"),f(2),a(3,"translate"),m(),c(4,"clr-icon",20),m()),t&2){let e=p.item;o("routerLink",W(6,br,W(4,up,e.id))),r(2),x(s(3,2,"settings.view-zone-members"))}}function bp(t,p){if(t&1&&c(0,"vdr-dt2-custom-field-column",21),t&2){let e=p.$implicit,n=g(2);o("customField",e)("sort",n.sorts)}}function Fp(t,p){if(t&1){let e=S();l(0,"vdr-data-table-2",8),a(1,"async"),a(2,"async"),a(3,"async"),a(4,"async"),a(5,"async"),_("pageChange",function(i){b(e);let d=g();return F(d.setPageNumber(i))})("itemsPerPageChange",function(i){b(e);let d=g();return F(d.setItemsPerPage(i))})("visibleColumnsChange",function(i){b(e);let d=g();return F(d.setVisibleColumns(i))}),c(6,"vdr-bulk-action-menu",9)(7,"vdr-dt2-search",10),a(8,"translate"),l(9,"vdr-dt2-column",11),a(10,"translate"),u(11,hp,1,1,"ng-template"),m(),l(12,"vdr-dt2-column",12),a(13,"translate"),u(14,Cp,2,4,"ng-template"),m(),l(15,"vdr-dt2-column",13),a(16,"translate"),u(17,_p,2,4,"ng-template"),m(),l(18,"vdr-dt2-column",14),a(19,"translate"),u(20,vp,4,4,"ng-template"),m(),l(21,"vdr-dt2-column",15),a(22,"translate"),u(23,yp,5,8,"ng-template"),m(),u(24,bp,1,2,"vdr-dt2-custom-field-column",16),m()}if(t&2){let e=g();o("id",e.dataTableListId)("items",s(1,25,e.items$))("itemsPerPage",s(2,27,e.itemsPerPage$))("totalItems",s(3,29,e.totalItems$))("currentPage",s(4,31,e.currentPage$))("filters",e.filters)("activeIndex",s(5,33,e.activeIndex$)),r(6),o("hostComponent",e)("selectionManager",e.selectionManager),r(),o("searchTermControl",e.searchTermControl)("searchTermPlaceholder",s(8,35,"common.search-by-name")),r(2),o("heading",s(10,37,"common.id"))("hiddenByDefault",!0),r(3),o("heading",s(13,39,"common.created-at"))("hiddenByDefault",!0)("sort",e.sorts.get("createdAt")),r(3),o("heading",s(16,41,"common.updated-at"))("hiddenByDefault",!0)("sort",e.sorts.get("updatedAt")),r(3),o("heading",s(19,43,"common.name"))("optional",!1)("sort",e.sorts.get("name")),r(3),o("heading",s(22,45,"common.view-contents"))("optional",!1),r(3),o("ngForOf",e.customFields)}}function Tp(t,p){if(t&1){let e=S();l(0,"vdr-zone-member-list",25),_("selectionChange",function(i){b(e);let d=g(3);return F(d.selectedMemberIds=i)}),m()}if(t&2){let e=p.ngIf,n=g(3);o("selectedMemberIds",n.selectedMemberIds)("activeZone",e)}}function Sp(t,p){if(t&1){let e=S();Bt(0),l(1,"button",23),_("click",function(){let i=b(e).ngIf,d=g(2);return F(d.addToZone(i))}),c(2,"clr-icon",7),l(3,"span"),f(4),a(5,"translate"),m()(),u(6,Tp,1,2,"vdr-zone-member-list",24),a(7,"async"),kt()}if(t&2){let e=p.ngIf,n=g(2);r(4),x(k(5,2,"settings.add-countries-to-zone",W(7,fp,e.name))),r(2),o("ngIf",s(7,5,n.activeZone$))}}function Dp(t,p){if(t&1&&(u(0,Sp,8,9,"ng-container",22),a(1,"async")),t&2){let e=g();o("ngIf",s(1,1,e.activeZone$))}}var nf=D`
    query GetZoneList($options: ZoneListOptions) {
        zones(options: $options) {
            items {
                ...ZoneListItem
            }
            totalItems
        }
    }
    fragment ZoneListItem on Zone {
        id
        createdAt
        updatedAt
        name
    }
`,Fr=(()=>{class t extends Ae{constructor(e,n,i){super(),this.dataService=e,this.notificationService=n,this.modalService=i,this.dataTableListId="zone-list",this.selectedMemberIds=[],this.customFields=this.serverConfigService.getCustomFieldsFor("Zone"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilter({name:"name",type:{kind:"text"},label:"common.name",filterField:"name"}).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSort({name:"createdAt"}).addSort({name:"updatedAt"}).addSort({name:"name"}).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:Ln,getItems:d=>d.zones,setVariables:(d,h)=>({options:{skip:d,take:h,filter:H({name:{contains:this.searchTermControl.value}},this.filters.createFilterInput()),filterOperator:this.searchTermControl.value?At.OR:At.AND,sort:this.sorts.createSortInput()}}),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}ngOnInit(){super.ngOnInit();let e=this.route.paramMap.pipe(Z(n=>n.get("contents")),Ei(),Qt(()=>this.selectedMemberIds=[]));this.activeZone$=tt(this.items$,e).pipe(Z(([n,i])=>{if(i)return n.find(d=>d.id===i)})),this.activeIndex$=tt(this.items$,e).pipe(Z(([n,i])=>i?n.findIndex(d=>d.id===i):-1))}setLanguage(e){this.dataService.client.setContentLanguage(e).subscribe()}closeMembers(){let e=H({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}addToZone(e){this.modalService.fromComponent(vo,{locals:{zoneName:e.name,zoneId:e.id},size:"md"}).pipe(ft(n=>n?this.dataService.settings.addMembersToZone(e.id,n).pipe(Ai(n)):Li)).subscribe({next:n=>{this.notificationService.success("settings.add-countries-to-zone-success",{countryCount:n.length,zoneName:e.name}),this.refreshMemberList()},error:n=>{this.notificationService.error(n)}})}refreshMemberList(){this.zoneMemberList?.refresh()}static{this.\u0275fac=function(n){return new(n||t)(v(G),v(X),v(Qn))}}static{this.\u0275cmp=T({type:t,selectors:[["vdr-zone-list"]],viewQuery:function(n,i){if(n&1&&Gi(qt,5),n&2){let d;zt(d=jt())&&(i.zoneMemberList=d.first)}},standalone:!1,features:[A],decls:15,vars:14,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","zone-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"closeClicked","rightPanelOpen"],["vdrSplitViewLeft",""],["vdrSplitViewRight","",3,"splitViewTitle"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters","activeIndex"],["locationId","zone-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","view-contents",3,"heading","optional"],[3,"customField","sort",4,"ngFor","ngForOf"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["queryParamsHandling","preserve",1,"button-small","bg-weight-150",3,"routerLink"],["shape","file-group"],[3,"customField","sort"],[4,"ngIf"],[1,"button-ghost","ml-4",3,"click"],["locationId","zone-members-list",3,"selectedMemberIds","activeZone","selectionChange",4,"ngIf"],["locationId","zone-members-list",3,"selectionChange","selectedMemberIds","activeZone"]],template:function(n,i){if(n&1&&(l(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),a(4,"async"),a(5,"async"),_("languageCodeChange",function(h){return i.setLanguage(h)}),m()(),l(6,"vdr-ab-right"),c(7,"vdr-action-bar-items",1),u(8,gp,4,5,"a",2),c(9,"vdr-action-bar-dropdown-menu",1),m()()(),l(10,"vdr-split-view",3),a(11,"async"),_("closeClicked",function(){return i.closeMembers()}),u(12,Fp,25,47,"ng-template",4)(13,Dp,2,3,"ng-template",5),a(14,"async"),m()),n&2){let d;r(3),o("availableLanguageCodes",s(4,5,i.availableLanguages$))("currentLanguageCode",s(5,7,i.contentLanguage$)),r(5),o("vdrIfPermissions",q(13,dp)),r(2),o("rightPanelOpen",s(11,9,i.activeZone$)),r(3),o("splitViewTitle",(d=s(14,11,i.activeZone$))==null?null:d.name)}},dependencies:[j,U,E,ge,N,V,w,$,Ze,O,M,Te,xe,De,Ie,Re,po,lo,mo,L,qt,B,I,Ce],styles:[`.zone-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.zone-wrapper[_ngcontent-%COMP%]   .zone-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.zone-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.zone-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-inline-start:12px}.zone-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.zone-members[_ngcontent-%COMP%]     table.table{margin-top:0}.zone-members[_ngcontent-%COMP%]     table.table th{top:0}.zone-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}
/*# sourceMappingURL=zone-list.component-NLFW7OUJ.css.map */`],changeDetection:0})}}return t})();var Tr={location:"zone-members-list",label:"settings.remove-from-zone",icon:"trash",iconClass:"is-danger",requiresPermission:y.UpdateCustomerGroup,onClick:({injector:t,selection:p,hostComponent:e,clearSelection:n})=>{let i=t.get(G),d=t.get(X),h=e.activeZone,P=p.map(Ve=>Ve.id);i.settings.removeMembersFromZone(h.id,P).subscribe({complete:()=>{d.success("settings.remove-countries-from-zone-success",{countryCount:P.length,zoneName:h.name}),e.refresh(),n()}})}};var mf=(()=>{class t extends fo{constructor(e,n){super(e,{__typename:"Administrator",id:"",createdAt:"",updatedAt:"",emailAddress:"",firstName:"",lastName:"",user:{roles:[]}},i=>n.administrator.getActiveAdministrator().mapStream(d=>d.activeAdministrator))}static{this.\u0275fac=function(n){return new(n||t)(xt(Rn),xt(G))}}static{this.\u0275prov=wi({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Dr=ut(Wt());var Sr=t=>[{path:"profile",component:fe,data:{breadcrumb:"breadcrumb.profile"},resolve:{detail:()=>Si(G).query(pn).mapSingle(p=>({entity:Tt(p.activeAdministrator)}))},children:t.getPageTabRoutes("profile")},{path:"administrators",component:fe,data:{locationId:"administrator-list",breadcrumb:"breadcrumb.administrators"},children:t.getPageTabRoutes("administrator-list")},{path:"administrators/:id",component:fe,data:{locationId:"administrator-detail",breadcrumb:{label:"breadcrumb.administrators",link:["../","administrators"]}},children:t.getPageTabRoutes("administrator-detail")},{path:"channels",component:fe,data:{locationId:"channel-list",breadcrumb:"breadcrumb.channels"},children:t.getPageTabRoutes("channel-list")},{path:"channels/:id",component:fe,data:{locationId:"channel-detail",breadcrumb:{label:"breadcrumb.channels",link:["../","channels"]}},children:t.getPageTabRoutes("channel-detail")},{path:"stock-locations",component:fe,data:{locationId:"stock-location-list",breadcrumb:"breadcrumb.stock-locations"},children:t.getPageTabRoutes("stock-location-list")},{path:"stock-locations/:id",component:fe,data:{locationId:"stock-location-detail",breadcrumb:{label:"breadcrumb.stock-locations",link:["../","stock-locations"]}},children:t.getPageTabRoutes("stock-location-detail")},{path:"sellers",component:fe,data:{locationId:"seller-list",breadcrumb:"breadcrumb.sellers"},children:t.getPageTabRoutes("seller-list")},{path:"sellers/:id",component:fe,data:{locationId:"seller-detail",breadcrumb:{label:"breadcrumb.sellers",link:["../","sellers"]}},children:t.getPageTabRoutes("seller-detail")},{path:"roles",component:fe,data:{locationId:"role-list",breadcrumb:"breadcrumb.roles"},children:t.getPageTabRoutes("role-list")},{path:"roles/:id",component:fe,data:{locationId:"role-detail",breadcrumb:{label:"breadcrumb.roles",link:["../","roles"]}},children:t.getPageTabRoutes("role-detail")},{path:"tax-categories",component:fe,data:{locationId:"tax-category-list",breadcrumb:"breadcrumb.tax-categories"},children:t.getPageTabRoutes("tax-category-list")},{path:"tax-categories/:id",component:fe,data:{locationId:"tax-category-detail",breadcrumb:{label:"breadcrumb.tax-categories",link:["../","tax-categories"]}},children:t.getPageTabRoutes("tax-category-detail")},{path:"tax-rates",component:fe,data:{locationId:"tax-rate-list",breadcrumb:"breadcrumb.tax-rates"},children:t.getPageTabRoutes("tax-rate-list")},{path:"tax-rates/:id",component:fe,data:{locationId:"tax-rate-detail",breadcrumb:{label:"breadcrumb.tax-rates",link:["../","tax-rates"]}},children:t.getPageTabRoutes("tax-rate-detail")},{path:"countries",component:fe,data:{locationId:"country-list",breadcrumb:"breadcrumb.countries"},children:t.getPageTabRoutes("country-list")},{path:"countries/:id",component:fe,data:{locationId:"country-detail",breadcrumb:{label:"breadcrumb.countries",link:["../","countries"]}},children:t.getPageTabRoutes("country-detail")},{path:"zones",component:fe,data:{locationId:"zone-list",breadcrumb:"breadcrumb.zones"},children:t.getPageTabRoutes("zone-list")},{path:"zones/:id",component:fe,data:{locationId:"zone-detail",breadcrumb:{label:"breadcrumb.zones",link:["../","zones"]}},children:t.getPageTabRoutes("zone-detail")},{path:"shipping-methods",component:fe,data:{locationId:"shipping-method-list",breadcrumb:"breadcrumb.shipping-methods"},children:t.getPageTabRoutes("shipping-method-list")},{path:"shipping-methods/:id",component:fe,data:{locationId:"shipping-method-detail",breadcrumb:{label:"breadcrumb.shipping-methods",link:["../","shipping-methods"]}},children:t.getPageTabRoutes("shipping-method-detail")},{path:"payment-methods",component:fe,data:{locationId:"payment-method-list",breadcrumb:"breadcrumb.payment-methods"},children:t.getPageTabRoutes("payment-method-list")},{path:"payment-methods/:id",component:fe,data:{locationId:"payment-method-detail",breadcrumb:{label:"breadcrumb.payment-methods",link:["../","payment-methods"]}},children:t.getPageTabRoutes("payment-method-detail")},{path:"global-settings",component:fe,data:{breadcrumb:"breadcrumb.global-settings",locationId:"global-setting-detail"},resolve:{detail:()=>Si(G).query(rn).mapSingle(p=>({entity:Tt(p.globalSettings)}))},children:t.getPageTabRoutes("global-setting-detail")}];var vg=(()=>{class t{static{this.hasRegisteredTabsAndBulkActions=!1}constructor(e,n){t.hasRegisteredTabsAndBulkActions||(e.registerBulkAction(Wo),e.registerBulkAction(xo),e.registerBulkAction(So),e.registerBulkAction(Ho),e.registerBulkAction(or),e.registerBulkAction(rr),e.registerBulkAction(nr),e.registerBulkAction(Oo),e.registerBulkAction(Vo),e.registerBulkAction(Ro),e.registerBulkAction(ur),e.registerBulkAction(hr),e.registerBulkAction(Lo),e.registerBulkAction(yr),e.registerBulkAction(Tr),e.registerBulkAction(mr),e.registerBulkAction(pr),e.registerBulkAction(lr),n.registerPageTab({priority:0,location:"seller-list",tab:"breadcrumb.sellers",route:"",component:Ko}),n.registerPageTab({priority:0,location:"seller-detail",tab:"settings.seller",route:"",component:Je({component:jo,query:un,entityKey:"seller",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-seller",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"channel-list",tab:"breadcrumb.channels",route:"",component:Bo}),n.registerPageTab({priority:0,location:"channel-detail",tab:"settings.channel",route:"",component:Je({component:Io,query:tn,entityKey:"channel",getBreadcrumbs:i=>[{label:i?i.code===Dr.DEFAULT_CHANNEL_CODE?"common.default-channel":i.code:"settings.create-new-channel",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"administrator-list",tab:"breadcrumb.administrators",route:"",component:Do}),n.registerPageTab({priority:0,location:"administrator-detail",tab:"settings.administrator",route:"",component:Je({component:To,query:Ji,entityKey:"administrator",getBreadcrumbs:i=>[{label:i?`${i.firstName} ${i.lastName}`:"admin.create-new-administrator",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"role-list",tab:"breadcrumb.roles",route:"",component:zo}),n.registerPageTab({priority:0,location:"role-detail",tab:"settings.role",route:"",component:Je({component:Uo,query:dn,entityKey:"role",getBreadcrumbs:i=>[{label:i?i.description:"settings.create-new-role",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"shipping-method-list",tab:"breadcrumb.shipping-methods",route:"",component:ar}),n.registerPageTab({priority:0,location:"shipping-method-detail",tab:"settings.shipping-method",route:"",component:Je({component:ir,query:gn,entityKey:"shippingMethod",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-shipping-method",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"shipping-method-list",tab:"settings.test-shipping-methods",route:"test",component:_r}),n.registerPageTab({priority:0,location:"payment-method-list",tab:"breadcrumb.payment-methods",route:"",component:$o}),n.registerPageTab({priority:0,location:"payment-method-detail",tab:"settings.payment-method",route:"",component:Je({component:No,query:an,entityKey:"paymentMethod",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-payment-method",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"tax-category-list",tab:"breadcrumb.tax-categories",route:"",component:fr}),n.registerPageTab({priority:0,location:"tax-category-detail",tab:"settings.tax-category",route:"",component:Je({component:cr,query:In,entityKey:"taxCategory",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-tax-category",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"tax-rate-list",tab:"breadcrumb.tax-rates",route:"",component:Cr}),n.registerPageTab({priority:0,location:"tax-rate-detail",tab:"settings.tax-rate",route:"",component:Je({component:gr,query:Pn,entityKey:"taxRate",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-tax-rate",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"country-list",tab:"breadcrumb.countries",route:"",component:Ao}),n.registerPageTab({priority:0,location:"country-detail",tab:"settings.country",route:"",component:Je({component:ko,query:on,entityKey:"country",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-country",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"zone-list",tab:"breadcrumb.zones",route:"",component:Fr}),n.registerPageTab({priority:0,location:"zone-detail",tab:"settings.zone",route:"",component:Je({component:vr,query:kn,entityKey:"zone",getBreadcrumbs:i=>[{label:i?i.name:"settings.create-new-zone",link:[i?.id]}]})}),n.registerPageTab({priority:0,location:"global-setting-detail",tab:"breadcrumb.global-settings",route:"",component:Eo}),n.registerPageTab({priority:0,location:"profile",tab:"breadcrumb.profile",route:"",component:Go}),n.registerPageTab({priority:0,location:"stock-location-list",tab:"catalog.stock-locations",route:"",component:dr}),n.registerPageTab({priority:0,location:"stock-location-detail",tab:"catalog.stock-location",route:"",component:Je({component:sr,query:vn,entityKey:"stockLocation",getBreadcrumbs:i=>[{label:i?i.name:"catalog.create-new-stock-location",link:[i?.id]}]})}),t.hasRegisteredTabsAndBulkActions=!0)}static{this.\u0275fac=function(n){return new(n||t)(xt(so),xt(gi))}}static{this.\u0275mod=$i({type:t})}static{this.\u0275inj=Ni({providers:[{provide:Nn,useFactory:e=>Sr(e),multi:!0,deps:[gi]}],imports:[uo,On.forChild([])]})}}return t})();export{vo as AddCountryToZoneDialogComponent,To as AdminDetailComponent,Do as AdministratorListComponent,H0 as CREATE_STOCK_LOCATION,Io as ChannelDetailComponent,Bo as ChannelListComponent,ko as CountryDetailComponent,Ao as CountryListComponent,od as GET_ADMINISTRATOR_DETAIL,dd as GET_ADMINISTRATOR_LIST,Fd as GET_CHANNEL_DETAIL,Bd as GET_CHANNEL_LIST,Rd as GET_COUNTRY_DETAIL,Ud as GET_COUNTRY_LIST,Yd as GET_GLOBAL_SETTINGS_DETAIL,oc as GET_PAYMENT_METHOD_DETAIL,gc as GET_PAYMENT_METHOD_LIST,Fc as GET_PROFILE_DETAIL,Bc as GET_ROLE_DETAIL,Oc as GET_ROLE_LIST,Hc as GET_SELLER_DETAIL,I0 as GET_SHIPPING_METHOD_DETAIL,R0 as GET_SHIPPING_METHOD_LIST,U0 as GET_STOCK_LOCATION_DETAIL,nu as GET_STOCK_LOCATION_LIST,pu as GET_TAX_CATEGORY_DETAIL,Cu as GET_TAX_CATEGORY_LIST,Du as GET_TAX_RATE_DETAIL,Au as GET_TAX_RATE_LIST,Zu as GET_ZONE_DETAIL,nf as GET_ZONE_LIST,Hp as GET_ZONE_MEMBERS,Eo as GlobalSettingsComponent,No as PaymentMethodDetailComponent,$o as PaymentMethodListComponent,_i as PermissionGridComponent,Go as ProfileComponent,mf as ProfileResolver,Uo as RoleDetailComponent,zo as RoleListComponent,jo as SellerDetailComponent,Ko as SellerListComponent,vg as SettingsModule,Yo as ShippingEligibilityTestResultComponent,ir as ShippingMethodDetailComponent,ar as ShippingMethodListComponent,er as ShippingMethodTestResultComponent,sr as StockLocationDetailComponent,dr as StockLocationListComponent,cr as TaxCategoryDetailComponent,fr as TaxCategoryListComponent,gr as TaxRateDetailComponent,Cr as TaxRateListComponent,Fi as TestAddressFormComponent,bi as TestOrderBuilderComponent,_r as TestShippingMethodsComponent,z0 as UPDATE_STOCK_LOCATION,vr as ZoneDetailComponent,Fr as ZoneListComponent,go as ZoneMemberControlsDirective,qt as ZoneMemberListComponent,ho as ZoneMemberListHeaderDirective,Oo as assignPaymentMethodsToChannelBulkAction,or as assignShippingMethodsToChannelBulkAction,mr as assignStockLocationsToChannelBulkAction,Sr as createRoutes,So as deleteAdministratorsBulkAction,xo as deleteChannelsBulkAction,Lo as deleteCountriesBulkAction,Ro as deletePaymentMethodsBulkAction,Ho as deleteRolesBulkAction,Wo as deleteSellersBulkAction,nr as deleteShippingMethodsBulkAction,lr as deleteStockLocationsBulkAction,ur as deleteTaxCategoriesBulkAction,hr as deleteTaxRatesBulkAction,yr as deleteZonesBulkAction,Vo as removePaymentMethodsFromChannelBulkAction,rr as removeShippingMethodsFromChannelBulkAction,pr as removeStockLocationsFromChannelBulkAction,Tr as removeZoneMembersBulkAction};
//# sourceMappingURL=chunk-W6ZQH6TM.js.map
