import{$e as Z,$f as st,$g as _t,Ae as Ue,Af as Ye,Ba as ae,Bf as ze,Ca as f,Cf as Ze,Da as F,Ea as C,Ed as Fe,Ef as et,Fd as Be,Ff as tt,Ge,He as qe,Id as De,Jd as ke,Jg as Q,Kd as Te,Kg as lt,La as me,Ld as xe,Le as je,Lf as it,Lg as W,Ma as se,Mf as R,Nf as $,Of as M,P as ne,Pd as Ie,Pf as U,Pg as dt,Q as Y,Qa as a,Qd as Le,Qf as G,Qg as ct,Ra as s,Sa as D,T as b,U as y,Ua as pe,Ub as de,Ud as Se,Ug as ut,Va as le,Vb as ce,Vf as ot,Vg as gt,Wb as ue,Wf as nt,Xb as ge,Xf as rt,Ya as L,Za as S,Zc as O,Zf as at,Zg as ft,_ as n,_f as mt,_g as Ct,a as K,aa as B,ae as V,af as He,ah as ht,b as X,bh as vt,ca as x,ce as Ee,ch as bt,da as re,db as E,dd as fe,de as we,ee as Oe,ef as Qe,ff as We,fg as pt,ga as I,gd as Ce,ha as u,id as _e,if as Je,ja as r,jd as he,jg as q,kf as Ke,ld as N,ma as p,n as T,na as l,nb as A,ng as j,o as te,oa as g,p as ie,sa as P,ta as v,td as ve,te as Ne,ua as _,ud as be,ug as H,vd as ye,vg as ee,wb as z,wd as Pe,we as Ve,xd as Ae,xe as Re,y as oe,ye as $e,zb as w,ze as Me,zf as Xe}from"./chunk-KV5QNU55.js";function $t(t,m){if(t&1){let e=P();p(0,"button",27),v("click",function(){b(e);let i=_();return y(i.create())}),f(1),a(2,"translate"),l()}if(t&2){let e=_();r("disabled",!e.saveButtonEnabled()),n(),C(" ",s(2,2,"common.create")," ")}}function Mt(t,m){if(t&1){let e=P();p(0,"button",27),v("click",function(){b(e);let i=_(2);return y(i.save())}),f(1),a(2,"translate"),l()}if(t&2){let e=_(2);r("disabled",!e.saveButtonEnabled()),n(),C(" ",s(2,2,"common.update")," ")}}function Ut(t,m){t&1&&u(0,Mt,3,4,"button",28),t&2&&r("vdrIfPermissions","UpdatePromotion")}function Gt(t,m){t&1&&(p(0,"vdr-card")(1,"clr-toggle-wrapper"),g(2,"input",29),p(3,"label"),f(4),a(5,"translate"),l()()()),t&2&&(n(4),F(s(5,1,"common.enabled")))}function qt(t,m){if(t&1&&(p(0,"vdr-card"),g(1,"vdr-page-entity-info",30),l()),t&2){let e=m.ngIf;n(),r("entity",e)}}function jt(t,m){if(t&1&&(p(0,"vdr-card",31),a(1,"translate"),g(2,"vdr-tabbed-custom-fields",32),a(3,"hasPermission"),l()),t&2){let e=_();r("title",s(1,4,"common.custom-fields")),n(2),r("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get("customFields"))("readonly",!s(3,6,"UpdatePromotion"))}}function Ht(t,m){if(t&1){let e=P();p(0,"div")(1,"vdr-configurable-input",33),a(2,"hasPermission"),v("remove",function(i){b(e);let d=_();return y(d.removeCondition(i))}),l()()}if(t&2){let e=m.$implicit,o=m.index,i=_();n(),r("position",o)("readonly",!s(2,5,"UpdatePromotion"))("operation",e)("operationDefinition",i.getConditionDefinition(e))("formControlName",o)}}function Qt(t,m){if(t&1){let e=P();p(0,"button",38),v("click",function(){let i=b(e).$implicit,d=_(2);return y(d.addCondition(i))}),f(1),l()}if(t&2){let e=m.$implicit;n(),C(" ",e.description," ")}}function Wt(t,m){if(t&1&&(p(0,"vdr-dropdown")(1,"button",34),g(2,"clr-icon",35),f(3),a(4,"translate"),l(),p(5,"vdr-dropdown-menu",36),u(6,Qt,2,1,"button",37),l()()),t&2){let e=_();n(3),C(" ",s(4,2,"marketing.add-condition")," "),n(3),r("ngForOf",e.getAvailableConditions())}}function Jt(t,m){if(t&1){let e=P();p(0,"div")(1,"vdr-configurable-input",39),a(2,"hasPermission"),v("remove",function(i){b(e);let d=_();return y(d.removeAction(i))}),l()()}if(t&2){let e=m.$implicit,o=m.index,i=_();n(),r("position",o)("operation",e)("readonly",!s(2,5,"UpdatePromotion"))("operationDefinition",i.getActionDefinition(e))("formControlName",o)}}function Kt(t,m){if(t&1){let e=P();p(0,"button",38),v("click",function(){let i=b(e).$implicit,d=_(2);return y(d.addAction(i))}),f(1),l()}if(t&2){let e=m.$implicit;n(),C(" ",e.description," ")}}function Xt(t,m){if(t&1&&(p(0,"vdr-dropdown")(1,"button",34),g(2,"clr-icon",35),f(3),a(4,"translate"),l(),p(5,"vdr-dropdown-menu",36),u(6,Kt,2,1,"button",37),l()()),t&2){let e=_();n(3),C(" ",s(4,2,"marketing.add-action")," "),n(3),r("ngForOf",e.getAvailableActions())}}var Oi=A`
    query GetPromotionDetail($id: ID!) {
        promotion(id: $id) {
            ...Promotion
        }
    }
    ${O}
`,Pt=(()=>{class t extends dt{constructor(e,o,i,d){super(),this.changeDetector=e,this.dataService=o,this.formBuilder=i,this.notificationService=d,this.customFields=this.getCustomFieldConfig("Promotion"),this.detailForm=this.formBuilder.group({name:["",ye.required],description:"",enabled:!0,couponCode:null,perCustomerUsageLimit:null,usageLimit:null,startsAt:null,endsAt:null,conditions:this.formBuilder.array([]),actions:this.formBuilder.array([]),customFields:this.formBuilder.group(vt(this.customFields))}),this.conditions=[],this.actions=[],this.allConditions=[],this.allActions=[],this.customFields=this.getCustomFieldConfig("Promotion")}ngOnInit(){this.init(),this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(e=>{this.allActions=e.promotionActions,this.allConditions=e.promotionConditions,this.changeDetector.markForCheck()})}ngOnDestroy(){this.destroy()}getAvailableConditions(){return this.allConditions.filter(e=>!this.conditions.find(o=>o.code===e.code))}getConditionDefinition(e){return this.allConditions.find(o=>o.code===e.code)}getAvailableActions(){return this.allActions.filter(e=>!this.actions.find(o=>o.code===e.code))}getActionDefinition(e){return this.allActions.find(o=>o.code===e.code)}saveButtonEnabled(){return!!(this.detailForm.dirty&&this.detailForm.valid&&(this.conditions.length!==0||this.detailForm.value.couponCode)&&this.actions.length!==0)}addCondition(e){this.addOperation("conditions",e),this.detailForm.markAsDirty()}addAction(e){this.addOperation("actions",e),this.detailForm.markAsDirty()}removeCondition(e){this.removeOperation("conditions",e),this.detailForm.markAsDirty()}removeAction(e){this.removeOperation("actions",e),this.detailForm.markAsDirty()}formArrayOf(e){return this.detailForm.get(e)}create(){if(!this.detailForm.dirty)return;let e=this.getUpdatedPromotion({id:"",createdAt:"",updatedAt:"",startsAt:"",endsAt:"",name:"",description:"",couponCode:null,perCustomerUsageLimit:null,usageLimit:null,enabled:!1,conditions:[],actions:[],translations:[]},this.detailForm,this.languageCode);this.dataService.promotion.createPromotion(e).subscribe(({createPromotion:o})=>{switch(o.__typename){case"Promotion":this.notificationService.success("common.notify-create-success",{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",o.id],{relativeTo:this.route});break;case"MissingConditionsError":this.notificationService.error(o.message);break}},o=>{this.notificationService.error("common.notify-create-error",{entity:"Promotion"})})}save(){this.detailForm.dirty&&te(this.entity$,this.languageCode$).pipe(oe(1),ie(([e,o])=>{let i=this.getUpdatedPromotion(e,this.detailForm,o);return this.dataService.promotion.updatePromotion(i)})).subscribe(e=>{this.notificationService.success("common.notify-update-success",{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},e=>{this.notificationService.error("common.notify-update-error",{entity:"Promotion"})})}getUpdatedPromotion(e,o,i){let d=o.value,c=bt({translatable:e,updatedFields:d,customFieldConfig:this.customFields,languageCode:i,defaultTranslation:{languageCode:i,name:e.name||"",description:e.description||""}});return X(K({},c),{conditions:this.mapOperationsToInputs(this.conditions,d.conditions),actions:this.mapOperationsToInputs(this.actions,d.actions)})}setFormValues(e,o){let i=ht(e,o);this.detailForm.patchValue({name:i?.name,description:i?.description,enabled:e.enabled,couponCode:e.couponCode,perCustomerUsageLimit:e.perCustomerUsageLimit,usageLimit:e.usageLimit,startsAt:e.startsAt,endsAt:e.endsAt}),e.conditions.forEach(d=>{this.addOperation("conditions",d)}),e.actions.forEach(d=>this.addOperation("actions",d)),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),e,i)}mapOperationsToInputs(e,o){return e.map((i,d)=>({code:i.code,arguments:Object.values(o[d].args).map((c,h)=>({name:i.args[h].name,value:He(c)}))}))}addOperation(e,o){let i=this.formArrayOf(e),d=e==="conditions"?this.conditions:this.actions;if(i.value.findIndex(h=>h.code===o.code)===-1){let h=o.args.reduce((k,J)=>X(K({},k),{[J.name]:Z(J.value)??this.getDefaultArgValue(e,o,J.name)}),{});i.push(this.formBuilder.control({code:o.code,args:h})),d.push({code:o.code,args:o.args.map(k=>({name:k.name,value:Z(k.value)}))})}}getDefaultArgValue(e,o,i){let d=e==="conditions"?this.allConditions.find(c=>c.code===o.code):this.allActions.find(c=>c.code===o.code);if(d){let c=d.args.find(h=>h.name===i);if(c)return Qe(c)}throw new Error('Could not determine default value for "argName"')}removeOperation(e,o){let i=this.formArrayOf(e),d=e==="conditions"?this.conditions:this.actions,c=i.value.findIndex(h=>h.code===o.code);c!==-1&&(i.removeAt(c),d.splice(c,1))}static{this.\u0275fac=function(o){return new(o||t)(B(le),B(fe),B(Se),B(Ne))}}static{this.\u0275cmp=x({type:t,selectors:[["vdr-promotion-detail"]],standalone:!1,features:[I],decls:63,vars:73,consts:[["updateButton",""],[1,"flex","clr-align-items-center"],[3,"languageCodeChange","disabled","availableLanguageCodes","currentLanguageCode"],["locationId","promotion-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],[1,"form",3,"formGroup"],[4,"vdrIfPermissions"],[4,"ngIf"],[1,"form-grid"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formControlName","description",1,"form-grid-span",3,"readonly","label"],["for","startsAt",3,"label"],["formControlName","startsAt"],["for","endsAt",3,"label"],["formControlName","endsAt"],["for","couponCode",3,"label"],["id","couponCode","type","text","formControlName","couponCode",3,"readonly"],["for","perCustomerUsageLimit",3,"label","tooltip"],["id","perCustomerUsageLimit","type","number","min","1","max","999","formControlName","perCustomerUsageLimit",3,"readonly"],["for","usageLimit",3,"label","tooltip"],["id","usageLimit","type","number","min","1","max","9999999","formControlName","usageLimit",3,"readonly"],["formGroupName","customFields",3,"title",4,"ngIf"],["locationId","promotion-detail",3,"entity$","detailForm"],["formArrayName","conditions",3,"title"],[4,"ngFor","ngForOf"],["formArrayName","actions",3,"title"],[1,"btn","btn-primary",3,"click","disabled"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["type","checkbox","clrToggle","","name","enabled","formControlName","enabled"],[3,"entity"],["formGroupName","customFields",3,"title"],["entityName","Promotion",3,"customFields","customFieldsFormGroup","readonly"],[3,"remove","position","readonly","operation","operationDefinition","formControlName"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","","class","item-wrap",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",1,"item-wrap",3,"click"],[3,"remove","position","operation","readonly","operationDefinition","formControlName"]],template:function(o,i){if(o&1){let d=P();p(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"div",1)(4,"vdr-language-selector",2),a(5,"async"),a(6,"async"),a(7,"async"),v("languageCodeChange",function(h){return b(d),y(i.setLanguage(h))}),l()()(),p(8,"vdr-ab-right"),g(9,"vdr-action-bar-items",3),u(10,$t,3,4,"button",4),a(11,"async"),u(12,Ut,1,1,"ng-template",null,0,pe),g(14,"vdr-action-bar-dropdown-menu",3),l()()(),p(15,"form",5)(16,"vdr-page-detail-layout")(17,"vdr-page-detail-sidebar"),u(18,Gt,6,3,"vdr-card",6)(19,qt,2,1,"vdr-card",7),a(20,"async"),l(),p(21,"vdr-page-block")(22,"vdr-card")(23,"div",8)(24,"vdr-form-field",9),a(25,"translate"),g(26,"input",10),a(27,"hasPermission"),l(),g(28,"vdr-rich-text-editor",11),a(29,"hasPermission"),a(30,"translate"),p(31,"vdr-form-field",12),a(32,"translate"),g(33,"vdr-datetime-picker",13),l(),p(34,"vdr-form-field",14),a(35,"translate"),g(36,"vdr-datetime-picker",15),l(),p(37,"vdr-form-field",16),a(38,"translate"),g(39,"input",17),a(40,"hasPermission"),l(),p(41,"vdr-form-field",18),a(42,"translate"),a(43,"translate"),g(44,"input",19),a(45,"hasPermission"),l(),p(46,"vdr-form-field",20),a(47,"translate"),a(48,"translate"),g(49,"input",21),a(50,"hasPermission"),l()()(),u(51,jt,4,8,"vdr-card",22),g(52,"vdr-custom-detail-component-host",23),p(53,"vdr-card",24),a(54,"translate"),u(55,Ht,3,7,"div",25),p(56,"div"),u(57,Wt,7,4,"vdr-dropdown",6),l()(),p(58,"vdr-card",26),a(59,"translate"),u(60,Jt,3,7,"div",25),p(61,"div"),u(62,Xt,7,4,"vdr-dropdown",6),l()()()()()}if(o&2){let d=ae(13);n(4),r("disabled",s(5,31,i.isNew$))("availableLanguageCodes",s(6,33,i.availableLanguages$))("currentLanguageCode",s(7,35,i.languageCode$)),n(6),r("ngIf",s(11,37,i.isNew$))("ngIfElse",d),n(5),r("formGroup",i.detailForm),n(3),r("vdrIfPermissions","UpdatePromotion"),n(),r("ngIf",s(20,39,i.entity$)),n(5),r("label",s(25,41,"common.name")),n(2),r("readonly",!s(27,43,"UpdatePromotion")),n(2),r("readonly",!s(29,45,"UpdatePromotion"))("label",s(30,47,"common.description")),n(3),r("label",s(32,49,"marketing.starts-at")),n(3),r("label",s(35,51,"marketing.ends-at")),n(3),r("label",s(38,53,"marketing.coupon-code")),n(2),r("readonly",!s(40,55,"UpdatePromotion")),n(2),r("label",s(42,57,"marketing.per-customer-limit"))("tooltip",s(43,59,"marketing.per-customer-limit-tooltip")),n(3),r("readonly",!s(45,61,"UpdatePromotion")),n(2),r("label",s(47,63,"marketing.usage-limit"))("tooltip",s(48,65,"marketing.usage-limit-tooltip")),n(3),r("readonly",!s(50,67,"UpdatePromotion")),n(2),r("ngIf",i.customFields.length),n(),r("entity$",i.entity$)("detailForm",i.detailForm),n(),r("title",s(54,69,"marketing.conditions")),n(2),r("ngForOf",i.conditions),n(2),r("vdrIfPermissions","UpdatePromotion"),n(),r("title",s(59,71,"marketing.actions")),n(2),r("ngForOf",i.actions),n(2),r("vdrIfPermissions","UpdatePromotion")}},dependencies:[V,Ee,Oe,we,L,S,Fe,be,Be,ve,Pe,Ae,Le,Ie,De,xe,ke,Te,G,M,U,Q,We,qe,Ge,q,it,Re,$e,Me,Ue,R,$,Ke,Xe,rt,j,Ye,ze,Ze,et,E,N,tt],styles:[`.item-wrap[_ngcontent-%COMP%]{white-space:normal}
/*# sourceMappingURL=promotion-detail.component-N2LAWYTQ.css.map */`],changeDetection:0})}}return t})();var Ui=A`
    mutation AssignPromotionsToChannel($input: AssignPromotionsToChannelInput!) {
        assignPromotionsToChannel(input: $input) {
            id
            name
        }
    }
`,Gi=A`
    mutation RemovePromotionsFromChannel($input: RemovePromotionsFromChannelInput!) {
        removePromotionsFromChannel(input: $input) {
            id
            name
        }
    }
`,At=ft({location:"promotion-list",requiresPermission:w.DeletePromotion,getItemName:t=>t.name,bulkDelete:(t,m)=>t.promotion.deletePromotions(m).pipe(T(e=>e.deletePromotions))}),Ft=Ct({location:"promotion-list",requiresPermission:w.UpdatePromotion,getItemName:t=>t.name,bulkAssignToChannel:(t,m,e)=>e.map(o=>t.mutate(ce,{input:{channelId:o,promotionIds:m}}).pipe(T(i=>i.assignPromotionsToChannel)))}),Bt=_t({location:"promotion-list",requiresPermission:w.DeleteCatalog,getItemName:t=>t.name,bulkRemoveFromChannel:(t,m,e)=>t.mutate(ue,{input:{channelId:e,promotionIds:m}}).pipe(T(o=>o.removePromotionsFromChannel))}),Dt={location:"promotion-list",label:"common.duplicate",icon:"copy",onClick:({injector:t,selection:m,hostComponent:e,clearSelection:o})=>{t.get(Ve).fromComponent(lt,{locals:{entities:m,entityName:"Promotion",title:"marketing.duplicate-promotions",getEntityName:d=>d.name}}).subscribe(d=>{d&&(o(),e.refresh())})}};var Yt=()=>["./create"],zt=t=>["./",t];function Zt(t,m){t&1&&(p(0,"a",17),g(1,"clr-icon",18),f(2),a(3,"translate"),l()),t&2&&(r("routerLink",me(4,Yt)),n(2),C(" ",s(3,2,"marketing.create-new-promotion")," "))}function ei(t,m){if(t&1&&f(0),t&2){let e=m.item;F(e.id)}}function ti(t,m){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=m.item;C(" ",D(1,1,e.createdAt,"short")," ")}}function ii(t,m){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=m.item;C(" ",D(1,1,e.updatedAt,"short")," ")}}function oi(t,m){if(t&1&&(p(0,"a",19)(1,"span"),f(2),l(),g(3,"clr-icon",20),l()),t&2){let e=m.item;r("routerLink",se(2,zt,e.id)),n(2),C(" ",e.name,"")}}function ni(t,m){t&1&&(p(0,"vdr-chip",23),f(1),a(2,"translate"),l()),t&2&&(n(),F(s(2,1,"common.enabled")))}function ri(t,m){t&1&&(p(0,"vdr-chip",24),f(1),a(2,"translate"),l()),t&2&&(n(),F(s(2,1,"common.disabled")))}function ai(t,m){if(t&1&&u(0,ni,3,3,"vdr-chip",21)(1,ri,3,3,"vdr-chip",22),t&2){let e=m.item;r("ngIf",e.enabled),n(),r("ngIf",!e.enabled)}}function mi(t,m){if(t&1&&f(0),t&2){let e=m.item;C(" ",e.couponCode," ")}}function si(t,m){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=m.item;C(" ",D(1,1,e.startsAt,"short")," ")}}function pi(t,m){if(t&1&&(f(0),a(1,"localeDate")),t&2){let e=m.item;C(" ",D(1,1,e.endsAt,"short")," ")}}function li(t,m){if(t&1&&f(0),t&2){let e=m.item;C(" ",e.perCustomerUsageLimit," ")}}function di(t,m){if(t&1&&f(0),t&2){let e=m.item;C(" ",e.usageLimit," ")}}function ci(t,m){if(t&1&&g(0,"vdr-dt2-custom-field-column",25),t&2){let e=m.$implicit,o=_();r("customField",e)("sorts",o.sorts)}}var eo=A`
    query GetPromotionList($options: PromotionListOptions) {
        promotions(options: $options) {
            items {
                ...Promotion
            }
            totalItems
        }
    }
    ${O}
`,kt=(()=>{class t extends ut{constructor(){super(),this.dataTableListId="promotion-list",this.customFields=this.getCustomFieldConfig("Promotion"),this.filters=this.createFilterCollection().addIdFilter().addDateFilters().addFilters([{name:"startsAt",type:{kind:"dateRange"},label:"marketing.starts-at",filterField:"startsAt"},{name:"endsAt",type:{kind:"dateRange"},label:"marketing.ends-at",filterField:"endsAt"},{name:"enabled",type:{kind:"boolean"},label:"common.enabled",filterField:"enabled"},{name:"name",type:{kind:"text"},label:"common.name",filterField:"name"},{name:"couponCode",type:{kind:"text"},label:"marketing.coupon-code",filterField:"couponCode"},{name:"desc",type:{kind:"text"},label:"common.description",filterField:"description"},{name:"perCustomerUsageLimit",type:{kind:"number"},label:"marketing.per-customer-limit",filterField:"perCustomerUsageLimit"},{name:"usageLimit",type:{kind:"number"},label:"marketing.usage-limit",filterField:"usageLimit"}]).addCustomFieldFilters(this.customFields).connectToRoute(this.route),this.sorts=this.createSortCollection().defaultSort("createdAt","DESC").addSorts([{name:"createdAt"},{name:"updatedAt"},{name:"startsAt"},{name:"endsAt"},{name:"name"},{name:"couponCode"},{name:"perCustomerUsageLimit"},{name:"usageLimit"}]).addCustomFieldSorts(this.customFields).connectToRoute(this.route),super.configure({document:ge,getItems:e=>e.promotions,setVariables:(e,o)=>this.createQueryOptions(e,o,this.searchTermControl.value),refreshListOnChanges:[this.filters.valueChanges,this.sorts.valueChanges]})}createQueryOptions(e,o,i){let d=this.filters.createFilterInput(),c=this.sorts.createSortInput(),h=z.AND;return i&&(d.couponCode={contains:i},d.name={contains:i},h=z.OR),{options:{skip:e,take:o,filter:d,filterOperator:h,sort:c}}}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=x({type:t,selectors:[["vdr-promotion-list"]],standalone:!1,features:[I],decls:49,vars:72,consts:[[3,"languageCodeChange","availableLanguageCodes","currentLanguageCode"],["locationId","promotion-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"pageChange","itemsPerPageChange","visibleColumnsChange","id","items","itemsPerPage","totalItems","currentPage","filters"],["locationId","promotion-list",3,"hostComponent","selectionManager"],[3,"searchTermControl","searchTermPlaceholder"],["id","id",3,"heading","hiddenByDefault"],["id","created-at",3,"heading","hiddenByDefault","sort"],["id","updated-at",3,"heading","hiddenByDefault","sort"],["id","name",3,"heading","optional","sort"],["id","enabled",3,"heading"],["id","coupon-code",3,"heading","sort"],["id","starts-at",3,"heading","sort"],["id","ends-at",3,"heading","sort"],["id","per-customer-limit",3,"heading","sort","hiddenByDefault"],["id","usage-limit",3,"heading","sort","hiddenByDefault"],[3,"customField","sorts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"button-ghost",3,"routerLink"],["shape","arrow right"],["colorType","success",4,"ngIf"],["colorType","warning",4,"ngIf"],["colorType","success"],["colorType","warning"],[3,"customField","sorts"]],template:function(o,i){o&1&&(p(0,"vdr-page-block")(1,"vdr-action-bar")(2,"vdr-ab-left")(3,"vdr-language-selector",0),a(4,"async"),a(5,"async"),v("languageCodeChange",function(c){return i.setLanguage(c)}),l()(),p(6,"vdr-ab-right"),g(7,"vdr-action-bar-items",1),u(8,Zt,4,5,"a",2),g(9,"vdr-action-bar-dropdown-menu",1),l()()(),p(10,"vdr-data-table-2",3),a(11,"async"),a(12,"async"),a(13,"async"),a(14,"async"),v("pageChange",function(c){return i.setPageNumber(c)})("itemsPerPageChange",function(c){return i.setItemsPerPage(c)})("visibleColumnsChange",function(c){return i.setVisibleColumns(c)}),g(15,"vdr-bulk-action-menu",4)(16,"vdr-dt2-search",5),a(17,"translate"),p(18,"vdr-dt2-column",6),a(19,"translate"),u(20,ei,1,1,"ng-template"),l(),p(21,"vdr-dt2-column",7),a(22,"translate"),u(23,ti,2,4,"ng-template"),l(),p(24,"vdr-dt2-column",8),a(25,"translate"),u(26,ii,2,4,"ng-template"),l(),p(27,"vdr-dt2-column",9),a(28,"translate"),u(29,oi,4,4,"ng-template"),l(),p(30,"vdr-dt2-column",10),a(31,"translate"),u(32,ai,2,2,"ng-template"),l(),p(33,"vdr-dt2-column",11),a(34,"translate"),u(35,mi,1,1,"ng-template"),l(),p(36,"vdr-dt2-column",12),a(37,"translate"),u(38,si,2,4,"ng-template"),l(),p(39,"vdr-dt2-column",13),a(40,"translate"),u(41,pi,2,4,"ng-template"),l(),p(42,"vdr-dt2-column",14),a(43,"translate"),u(44,li,1,1,"ng-template"),l(),p(45,"vdr-dt2-column",15),a(46,"translate"),u(47,di,1,1,"ng-template"),l(),u(48,ci,1,2,"vdr-dt2-custom-field-column",16),l()),o&2&&(n(3),r("availableLanguageCodes",s(4,38,i.availableLanguages$))("currentLanguageCode",s(5,40,i.contentLanguage$)),n(5),r("vdrIfPermissions","CreatePromotion"),n(2),r("id",i.dataTableListId)("items",s(11,42,i.items$))("itemsPerPage",s(12,44,i.itemsPerPage$))("totalItems",s(13,46,i.totalItems$))("currentPage",s(14,48,i.currentPage$))("filters",i.filters),n(5),r("hostComponent",i)("selectionManager",i.selectionManager),n(),r("searchTermControl",i.searchTermControl)("searchTermPlaceholder",s(17,50,"marketing.search-by-name-or-coupon-code")),n(2),r("heading",s(19,52,"common.id"))("hiddenByDefault",!0),n(3),r("heading",s(22,54,"common.created-at"))("hiddenByDefault",!0)("sort",i.sorts.get("createdAt")),n(3),r("heading",s(25,56,"common.updated-at"))("hiddenByDefault",!0)("sort",i.sorts.get("updatedAt")),n(3),r("heading",s(28,58,"common.name"))("optional",!1)("sort",i.sorts.get("name")),n(3),r("heading",s(31,60,"common.enabled")),n(3),r("heading",s(34,62,"marketing.coupon-code"))("sort",i.sorts.get("couponCode")),n(3),r("heading",s(37,64,"marketing.starts-at"))("sort",i.sorts.get("startsAt")),n(3),r("heading",s(40,66,"marketing.ends-at"))("sort",i.sorts.get("endsAt")),n(3),r("heading",s(43,68,"marketing.per-customer-limit"))("sort",i.sorts.get("perCustomerUsageLimit"))("hiddenByDefault",!0),n(3),r("heading",s(46,70,"marketing.usage-limit"))("sort",i.sorts.get("usageLimit"))("hiddenByDefault",!0),n(3),r("ngForOf",i.customFields))},dependencies:[V,L,S,_e,G,M,U,Q,Je,q,R,$,nt,pt,at,st,mt,j,E,N,je],styles:[`.search-form[_ngcontent-%COMP%]{padding:0}.search-input[_ngcontent-%COMP%]{margin:6px 8px 0 0;min-width:200px}
/*# sourceMappingURL=promotion-list.component-JSB66AXJ.css.map */`],changeDetection:0})}}return t})();var Tt=t=>[{path:"promotions",component:ee,data:{locationId:"promotion-list",breadcrumb:"breadcrumb.promotions"},children:t.getPageTabRoutes("promotion-list")},{path:"promotions/:id",component:ee,data:{locationId:"promotion-detail",breadcrumb:{label:"breadcrumb.promotions",link:["../","promotions"]}},children:t.getPageTabRoutes("promotion-detail")}];function oo(t,m){return gt({entity:t.entity,id:m.id,breadcrumbKey:"breadcrumb.promotions",getName:e=>e.name,route:"promotions"})}var co=(()=>{class t{static{this.hasRegisteredTabsAndBulkActions=!1}constructor(e,o){t.hasRegisteredTabsAndBulkActions||(e.registerBulkAction(Ft),e.registerBulkAction(Dt),e.registerBulkAction(Bt),e.registerBulkAction(At),o.registerPageTab({priority:0,location:"promotion-list",tab:"breadcrumb.promotions",route:"",component:kt}),o.registerPageTab({priority:0,location:"promotion-detail",tab:"marketing.promotion",route:"",component:ct({component:Pt,query:de,entityKey:"promotion",getBreadcrumbs:i=>[{label:i?i.name:"marketing.create-new-promotion",link:[i?.id]}]})}),t.hasRegisteredTabsAndBulkActions=!0)}static{this.\u0275fac=function(o){return new(o||t)(Y(ot),Y(H))}}static{this.\u0275mod=re({type:t})}static{this.\u0275inj=ne({providers:[{provide:Ce,useFactory:e=>Tt(e),multi:!0,deps:[H]}],imports:[W,he.forChild([]),W,W]})}}return t})();export{Oi as GET_PROMOTION_DETAIL,eo as GET_PROMOTION_LIST,co as MarketingModule,Pt as PromotionDetailComponent,kt as PromotionListComponent,Ft as assignPromotionsToChannelBulkAction,Tt as createRoutes,At as deletePromotionsBulkAction,Dt as duplicatePromotionsBulkAction,oo as promotionBreadcrumb,Bt as removePromotionsFromChannelBulkAction};
//# sourceMappingURL=chunk-OD26BEJV.js.map
