import { ADD_ITEM_TO_DRAFT_ORDER, ADD_MANUAL_PAYMENT_TO_ORDER, ADD_NOTE_TO_ORDER, ADJUST_DRAFT_ORDER_LINE, APPLY_COUPON_CODE_TO_DRAFT_ORDER, CANCEL_ORDER, CANCEL_PAYMENT, CREATE_DRAFT_ORDER, CREATE_FULFILLMENT, DELETE_DRAFT_ORDER, DELETE_ORDER_NOTE, DRAFT_ORDER_ELIGIBLE_SHIPPING_METHODS, GET_ORDER, GET_ORDER_HISTORY, GET_ORDERS_LIST, MODIFY_ORDER, REFUND_ORDER, REMOVE_COUPON_CODE_FROM_DRAFT_ORDER, REMOVE_DRAFT_ORDER_LINE, SET_BILLING_ADDRESS_FOR_DRAFT_ORDER, SET_CUSTOMER_FOR_DRAFT_ORDER, SET_DRAFT_ORDER_SHIPPING_METHOD, SET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, SETTLE_PAYMENT, SETTLE_REFUND, TRANSITION_FULFILLMENT_TO_STATE, TRANSITION_ORDER_TO_STATE, TRANSITION_PAYMENT_TO_STATE, UNSET_BILLING_ADDRESS_FOR_DRAFT_ORDER, UNSET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, UPDATE_ORDER_CUSTOM_FIELDS, UPDATE_ORDER_NOTE, } from '../definitions/order-definitions';
export class OrderDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getOrders(options = { take: 10 }) {
        return this.baseDataService.query(GET_ORDERS_LIST, {
            options,
        });
    }
    getOrder(id) {
        return this.baseDataService.query(GET_ORDER, {
            id,
        });
    }
    getOrderHistory(id, options) {
        return this.baseDataService.query(GET_ORDER_HISTORY, {
            id,
            options,
        });
    }
    settlePayment(id) {
        return this.baseDataService.mutate(SETTLE_PAYMENT, {
            id,
        });
    }
    cancelPayment(id) {
        return this.baseDataService.mutate(CANCEL_PAYMENT, {
            id,
        });
    }
    transitionPaymentToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_PAYMENT_TO_STATE, {
            id,
            state,
        });
    }
    createFulfillment(input) {
        return this.baseDataService.mutate(CREATE_FULFILLMENT, {
            input,
        });
    }
    transitionFulfillmentToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_FULFILLMENT_TO_STATE, {
            id,
            state,
        });
    }
    cancelOrder(input) {
        return this.baseDataService.mutate(CANCEL_ORDER, {
            input,
        });
    }
    refundOrder(input) {
        return this.baseDataService.mutate(REFUND_ORDER, {
            input,
        });
    }
    settleRefund(input, orderId) {
        return this.baseDataService.mutate(SETTLE_REFUND, {
            input,
        });
    }
    addNoteToOrder(input) {
        return this.baseDataService.mutate(ADD_NOTE_TO_ORDER, {
            input,
        });
    }
    updateOrderNote(input) {
        return this.baseDataService.mutate(UPDATE_ORDER_NOTE, {
            input,
        });
    }
    deleteOrderNote(id) {
        return this.baseDataService.mutate(DELETE_ORDER_NOTE, {
            id,
        });
    }
    transitionToState(id, state) {
        return this.baseDataService.mutate(TRANSITION_ORDER_TO_STATE, {
            id,
            state,
        });
    }
    updateOrderCustomFields(input) {
        return this.baseDataService.mutate(UPDATE_ORDER_CUSTOM_FIELDS, {
            input,
        });
    }
    modifyOrder(input) {
        return this.baseDataService.mutate(MODIFY_ORDER, {
            input,
        });
    }
    addManualPaymentToOrder(input) {
        return this.baseDataService.mutate(ADD_MANUAL_PAYMENT_TO_ORDER, { input });
    }
    createDraftOrder() {
        return this.baseDataService.mutate(CREATE_DRAFT_ORDER);
    }
    deleteDraftOrder(orderId) {
        return this.baseDataService.mutate(DELETE_DRAFT_ORDER, { orderId });
    }
    addItemToDraftOrder(orderId, input) {
        return this.baseDataService.mutate(ADD_ITEM_TO_DRAFT_ORDER, { orderId, input });
    }
    adjustDraftOrderLine(orderId, input) {
        return this.baseDataService.mutate(ADJUST_DRAFT_ORDER_LINE, { orderId, input });
    }
    removeDraftOrderLine(orderId, orderLineId) {
        return this.baseDataService.mutate(REMOVE_DRAFT_ORDER_LINE, { orderId, orderLineId });
    }
    setCustomerForDraftOrder(orderId, { customerId, input }) {
        return this.baseDataService.mutate(SET_CUSTOMER_FOR_DRAFT_ORDER, { orderId, customerId, input });
    }
    setDraftOrderShippingAddress(orderId, input) {
        return this.baseDataService.mutate(SET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, { orderId, input });
    }
    setDraftOrderBillingAddress(orderId, input) {
        return this.baseDataService.mutate(SET_BILLING_ADDRESS_FOR_DRAFT_ORDER, { orderId, input });
    }
    unsetDraftOrderShippingAddress(orderId) {
        return this.baseDataService.mutate(UNSET_SHIPPING_ADDRESS_FOR_DRAFT_ORDER, { orderId });
    }
    unsetDraftOrderBillingAddress(orderId) {
        return this.baseDataService.mutate(UNSET_BILLING_ADDRESS_FOR_DRAFT_ORDER, { orderId });
    }
    applyCouponCodeToDraftOrder(orderId, couponCode) {
        return this.baseDataService.mutate(APPLY_COUPON_CODE_TO_DRAFT_ORDER, { orderId, couponCode });
    }
    removeCouponCodeFromDraftOrder(orderId, couponCode) {
        return this.baseDataService.mutate(REMOVE_COUPON_CODE_FROM_DRAFT_ORDER, { orderId, couponCode });
    }
    getDraftOrderEligibleShippingMethods(orderId) {
        return this.baseDataService.query(DRAFT_ORDER_ELIGIBLE_SHIPPING_METHODS, { orderId });
    }
    setDraftOrderShippingMethod(orderId, shippingMethodId) {
        return this.baseDataService.mutate(SET_DRAFT_ORDER_SHIPPING_METHOD, { orderId, shippingMethodId });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXItZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9vcmRlci1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUNILHVCQUF1QixFQUN2QiwyQkFBMkIsRUFDM0IsaUJBQWlCLEVBQ2pCLHVCQUF1QixFQUN2QixnQ0FBZ0MsRUFDaEMsWUFBWSxFQUNaLGNBQWMsRUFDZCxrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLGtCQUFrQixFQUNsQixpQkFBaUIsRUFDakIscUNBQXFDLEVBQ3JDLFNBQVMsRUFDVCxpQkFBaUIsRUFDakIsZUFBZSxFQUNmLFlBQVksRUFDWixZQUFZLEVBQ1osbUNBQW1DLEVBQ25DLHVCQUF1QixFQUN2QixtQ0FBbUMsRUFDbkMsNEJBQTRCLEVBQzVCLCtCQUErQixFQUMvQixvQ0FBb0MsRUFDcEMsY0FBYyxFQUNkLGFBQWEsRUFDYiwrQkFBK0IsRUFDL0IseUJBQXlCLEVBQ3pCLDJCQUEyQixFQUMzQixxQ0FBcUMsRUFDckMsc0NBQXNDLEVBQ3RDLDBCQUEwQixFQUMxQixpQkFBaUIsR0FDcEIsTUFBTSxrQ0FBa0MsQ0FBQztBQUkxQyxNQUFNLE9BQU8sZ0JBQWdCO0lBQ3pCLFlBQW9CLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtJQUFHLENBQUM7SUFFeEQsU0FBUyxDQUFDLFVBQW9DLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRTtRQUN0RCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUM3QixlQUFlLEVBQ2Y7WUFDSSxPQUFPO1NBQ1YsQ0FDSixDQUFDO0lBQ04sQ0FBQztJQUVELFFBQVEsQ0FBQyxFQUFVO1FBQ2YsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBd0QsU0FBUyxFQUFFO1lBQ2hHLEVBQUU7U0FDTCxDQUFDLENBQUM7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QUUsQ0FBQyxDQUFDO0lBQ3RFLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENvZGVnZW4gZnJvbSAnLi4vLi4vY29tbW9uL2dlbmVyYXRlZC10eXBlcyc7XHJcbmltcG9ydCB7XHJcbiAgICBBRERfSVRFTV9UT19EUkFGVF9PUkRFUixcclxuICAgIEFERF9NQU5VQUxfUEFZTUVOVF9UT19PUkRFUixcclxuICAgIEFERF9OT1RFX1RPX09SREVSLFxyXG4gICAgQURKVVNUX0RSQUZUX09SREVSX0xJTkUsXHJcbiAgICBBUFBMWV9DT1VQT05fQ09ERV9UT19EUkFGVF9PUkRFUixcclxuICAgIENBTkNFTF9PUkRFUixcclxuICAgIENBTkNFTF9QQVlNRU5ULFxyXG4gICAgQ1JFQVRFX0RSQUZUX09SREVSLFxyXG4gICAgQ1JFQVRFX0ZVTEZJTExNRU5ULFxyXG4gICAgREVMRVRFX0RSQUZUX09SREVSLFxyXG4gICAgREVMRVRFX09SREVSX05PVEUsXHJcbiAgICBEUkFGVF9PUkRFUl9FTElHSUJMRV9TSElQUElOR19NRVRIT0RTLFxyXG4gICAgR0VUX09SREVSLFxyXG4gICAgR0VUX09SREVSX0hJU1RPUlksXHJcbiAgICBHRVRfT1JERVJTX0xJU1QsXHJcbiAgICBNT0RJRllfT1JERVIsXHJcbiAgICBSRUZVTkRfT1JERVIsXHJcbiAgICBSRU1PVkVfQ09VUE9OX0NPREVfRlJPTV9EUkFGVF9PUkRFUixcclxuICAgIFJFTU9WRV9EUkFGVF9PUkRFUl9MSU5FLFxyXG4gICAgU0VUX0JJTExJTkdfQUREUkVTU19GT1JfRFJBRlRfT1JERVIsXHJcbiAgICBTRVRfQ1VTVE9NRVJfRk9SX0RSQUZUX09SREVSLFxyXG4gICAgU0VUX0RSQUZUX09SREVSX1NISVBQSU5HX01FVEhPRCxcclxuICAgIFNFVF9TSElQUElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUixcclxuICAgIFNFVFRMRV9QQVlNRU5ULFxyXG4gICAgU0VUVExFX1JFRlVORCxcclxuICAgIFRSQU5TSVRJT05fRlVMRklMTE1FTlRfVE9fU1RBVEUsXHJcbiAgICBUUkFOU0lUSU9OX09SREVSX1RPX1NUQVRFLFxyXG4gICAgVFJBTlNJVElPTl9QQVlNRU5UX1RPX1NUQVRFLFxyXG4gICAgVU5TRVRfQklMTElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUixcclxuICAgIFVOU0VUX1NISVBQSU5HX0FERFJFU1NfRk9SX0RSQUZUX09SREVSLFxyXG4gICAgVVBEQVRFX09SREVSX0NVU1RPTV9GSUVMRFMsXHJcbiAgICBVUERBVEVfT1JERVJfTk9URSxcclxufSBmcm9tICcuLi9kZWZpbml0aW9ucy9vcmRlci1kZWZpbml0aW9ucyc7XHJcblxyXG5pbXBvcnQgeyBCYXNlRGF0YVNlcnZpY2UgfSBmcm9tICcuL2Jhc2UtZGF0YS5zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBPcmRlckRhdGFTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFzZURhdGFTZXJ2aWNlOiBCYXNlRGF0YVNlcnZpY2UpIHt9XHJcblxyXG4gICAgZ2V0T3JkZXJzKG9wdGlvbnM6IENvZGVnZW4uT3JkZXJMaXN0T3B0aW9ucyA9IHsgdGFrZTogMTAgfSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxDb2RlZ2VuLkdldE9yZGVyTGlzdFF1ZXJ5LCBDb2RlZ2VuLkdldE9yZGVyTGlzdFF1ZXJ5VmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX09SREVSU19MSVNULFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0T3JkZXIoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxDb2RlZ2VuLkdldE9yZGVyUXVlcnksIENvZGVnZW4uR2V0T3JkZXJRdWVyeVZhcmlhYmxlcz4oR0VUX09SREVSLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldE9yZGVySGlzdG9yeShpZDogc3RyaW5nLCBvcHRpb25zPzogQ29kZWdlbi5IaXN0b3J5RW50cnlMaXN0T3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxcclxuICAgICAgICAgICAgQ29kZWdlbi5HZXRPcmRlckhpc3RvcnlRdWVyeSxcclxuICAgICAgICAgICAgQ29kZWdlbi5HZXRPcmRlckhpc3RvcnlRdWVyeVZhcmlhYmxlc1xyXG4gICAgICAgID4oR0VUX09SREVSX0hJU1RPUlksIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0dGxlUGF5bWVudChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXR0bGVQYXltZW50TXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0dGxlUGF5bWVudE11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihTRVRUTEVfUEFZTUVOVCwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxQYXltZW50KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkNhbmNlbFBheW1lbnRNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5DYW5jZWxQYXltZW50TXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KENBTkNFTF9QQVlNRU5ULCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zaXRpb25QYXltZW50VG9TdGF0ZShpZDogc3RyaW5nLCBzdGF0ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5UcmFuc2l0aW9uUGF5bWVudFRvU3RhdGVNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5UcmFuc2l0aW9uUGF5bWVudFRvU3RhdGVNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oVFJBTlNJVElPTl9QQVlNRU5UX1RPX1NUQVRFLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBzdGF0ZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVGdWxmaWxsbWVudChpbnB1dDogQ29kZWdlbi5GdWxmaWxsT3JkZXJJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQ3JlYXRlRnVsZmlsbG1lbnRNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5DcmVhdGVGdWxmaWxsbWVudE11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihDUkVBVEVfRlVMRklMTE1FTlQsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJhbnNpdGlvbkZ1bGZpbGxtZW50VG9TdGF0ZShpZDogc3RyaW5nLCBzdGF0ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5UcmFuc2l0aW9uRnVsZmlsbG1lbnRUb1N0YXRlTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uVHJhbnNpdGlvbkZ1bGZpbGxtZW50VG9TdGF0ZU11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihUUkFOU0lUSU9OX0ZVTEZJTExNRU5UX1RPX1NUQVRFLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBzdGF0ZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjYW5jZWxPcmRlcihpbnB1dDogQ29kZWdlbi5DYW5jZWxPcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDb2RlZ2VuLkNhbmNlbE9yZGVyTXV0YXRpb24sIENvZGVnZW4uQ2FuY2VsT3JkZXJNdXRhdGlvblZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIENBTkNFTF9PUkRFUixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZWZ1bmRPcmRlcihpbnB1dDogQ29kZWdlbi5SZWZ1bmRPcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDb2RlZ2VuLlJlZnVuZE9yZGVyTXV0YXRpb24sIENvZGVnZW4uUmVmdW5kT3JkZXJNdXRhdGlvblZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIFJFRlVORF9PUkRFUixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXR0bGVSZWZ1bmQoaW5wdXQ6IENvZGVnZW4uU2V0dGxlUmVmdW5kSW5wdXQsIG9yZGVySWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0dGxlUmVmdW5kTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uU2V0dGxlUmVmdW5kTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFNFVFRMRV9SRUZVTkQsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTm90ZVRvT3JkZXIoaW5wdXQ6IENvZGVnZW4uQWRkTm90ZVRvT3JkZXJJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQWRkTm90ZVRvT3JkZXJNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGROb3RlVG9PcmRlck11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihBRERfTk9URV9UT19PUkRFUiwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVPcmRlck5vdGUoaW5wdXQ6IENvZGVnZW4uVXBkYXRlT3JkZXJOb3RlSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlVwZGF0ZU9yZGVyTm90ZU11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlVwZGF0ZU9yZGVyTm90ZU11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihVUERBVEVfT1JERVJfTk9URSwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVPcmRlck5vdGUoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uRGVsZXRlT3JkZXJOb3RlTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uRGVsZXRlT3JkZXJOb3RlTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KERFTEVURV9PUkRFUl9OT1RFLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRyYW5zaXRpb25Ub1N0YXRlKGlkOiBzdHJpbmcsIHN0YXRlOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlRyYW5zaXRpb25PcmRlclRvU3RhdGVNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5UcmFuc2l0aW9uT3JkZXJUb1N0YXRlTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFRSQU5TSVRJT05fT1JERVJfVE9fU1RBVEUsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIHN0YXRlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU9yZGVyQ3VzdG9tRmllbGRzKGlucHV0OiBDb2RlZ2VuLlVwZGF0ZU9yZGVySW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlVwZGF0ZU9yZGVyQ3VzdG9tRmllbGRzTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uVXBkYXRlT3JkZXJDdXN0b21GaWVsZHNNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oVVBEQVRFX09SREVSX0NVU1RPTV9GSUVMRFMsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kaWZ5T3JkZXIoaW5wdXQ6IENvZGVnZW4uTW9kaWZ5T3JkZXJJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q29kZWdlbi5Nb2RpZnlPcmRlck11dGF0aW9uLCBDb2RlZ2VuLk1vZGlmeU9yZGVyTXV0YXRpb25WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBNT0RJRllfT1JERVIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkTWFudWFsUGF5bWVudFRvT3JkZXIoaW5wdXQ6IENvZGVnZW4uTWFudWFsUGF5bWVudElucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGRNYW51YWxQYXltZW50TXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uQWRkTWFudWFsUGF5bWVudE11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihBRERfTUFOVUFMX1BBWU1FTlRfVE9fT1JERVIsIHsgaW5wdXQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRHJhZnRPcmRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENvZGVnZW4uQ3JlYXRlRHJhZnRPcmRlck11dGF0aW9uPihDUkVBVEVfRFJBRlRfT1JERVIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZURyYWZ0T3JkZXIob3JkZXJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5EZWxldGVEcmFmdE9yZGVyTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uRGVsZXRlRHJhZnRPcmRlck11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihERUxFVEVfRFJBRlRfT1JERVIsIHsgb3JkZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtVG9EcmFmdE9yZGVyKG9yZGVySWQ6IHN0cmluZywgaW5wdXQ6IENvZGVnZW4uQWRkSXRlbVRvRHJhZnRPcmRlcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5BZGRJdGVtVG9EcmFmdE9yZGVyTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uQWRkSXRlbVRvRHJhZnRPcmRlck11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihBRERfSVRFTV9UT19EUkFGVF9PUkRFUiwgeyBvcmRlcklkLCBpbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGp1c3REcmFmdE9yZGVyTGluZShvcmRlcklkOiBzdHJpbmcsIGlucHV0OiBDb2RlZ2VuLkFkanVzdERyYWZ0T3JkZXJMaW5lSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkFkanVzdERyYWZ0T3JkZXJMaW5lTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uQWRqdXN0RHJhZnRPcmRlckxpbmVNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oQURKVVNUX0RSQUZUX09SREVSX0xJTkUsIHsgb3JkZXJJZCwgaW5wdXQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlRHJhZnRPcmRlckxpbmUob3JkZXJJZDogc3RyaW5nLCBvcmRlckxpbmVJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5SZW1vdmVEcmFmdE9yZGVyTGluZU11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlJlbW92ZURyYWZ0T3JkZXJMaW5lTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFJFTU9WRV9EUkFGVF9PUkRFUl9MSU5FLCB7IG9yZGVySWQsIG9yZGVyTGluZUlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEN1c3RvbWVyRm9yRHJhZnRPcmRlcihcclxuICAgICAgICBvcmRlcklkOiBzdHJpbmcsXHJcbiAgICAgICAgeyBjdXN0b21lcklkLCBpbnB1dCB9OiB7IGN1c3RvbWVySWQ/OiBzdHJpbmc7IGlucHV0PzogQ29kZWdlbi5DcmVhdGVDdXN0b21lcklucHV0IH0sXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldEN1c3RvbWVyRm9yRHJhZnRPcmRlck11dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldEN1c3RvbWVyRm9yRHJhZnRPcmRlck11dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihTRVRfQ1VTVE9NRVJfRk9SX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGN1c3RvbWVySWQsIGlucHV0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3Mob3JkZXJJZDogc3RyaW5nLCBpbnB1dDogQ29kZWdlbi5DcmVhdGVBZGRyZXNzSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3NNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXREcmFmdE9yZGVyU2hpcHBpbmdBZGRyZXNzTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KFNFVF9TSElQUElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUiwgeyBvcmRlcklkLCBpbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXREcmFmdE9yZGVyQmlsbGluZ0FkZHJlc3Mob3JkZXJJZDogc3RyaW5nLCBpbnB1dDogQ29kZWdlbi5DcmVhdGVBZGRyZXNzSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldERyYWZ0T3JkZXJCaWxsaW5nQWRkcmVzc011dGF0aW9uLFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlNldERyYWZ0T3JkZXJCaWxsaW5nQWRkcmVzc011dGF0aW9uVmFyaWFibGVzXHJcbiAgICAgICAgPihTRVRfQklMTElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUiwgeyBvcmRlcklkLCBpbnB1dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1bnNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3Mob3JkZXJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5VbnNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3NNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5VbnNldERyYWZ0T3JkZXJTaGlwcGluZ0FkZHJlc3NNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oVU5TRVRfU0hJUFBJTkdfQUREUkVTU19GT1JfRFJBRlRfT1JERVIsIHsgb3JkZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1bnNldERyYWZ0T3JkZXJCaWxsaW5nQWRkcmVzcyhvcmRlcklkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFxyXG4gICAgICAgICAgICBDb2RlZ2VuLlVuc2V0RHJhZnRPcmRlckJpbGxpbmdBZGRyZXNzTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uVW5zZXREcmFmdE9yZGVyQmlsbGluZ0FkZHJlc3NNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oVU5TRVRfQklMTElOR19BRERSRVNTX0ZPUl9EUkFGVF9PUkRFUiwgeyBvcmRlcklkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFwcGx5Q291cG9uQ29kZVRvRHJhZnRPcmRlcihvcmRlcklkOiBzdHJpbmcsIGNvdXBvbkNvZGU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIENvZGVnZW4uQXBwbHlDb3Vwb25Db2RlVG9EcmFmdE9yZGVyTXV0YXRpb24sXHJcbiAgICAgICAgICAgIENvZGVnZW4uQXBwbHlDb3Vwb25Db2RlVG9EcmFmdE9yZGVyTXV0YXRpb25WYXJpYWJsZXNcclxuICAgICAgICA+KEFQUExZX0NPVVBPTl9DT0RFX1RPX0RSQUZUX09SREVSLCB7IG9yZGVySWQsIGNvdXBvbkNvZGUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ291cG9uQ29kZUZyb21EcmFmdE9yZGVyKG9yZGVySWQ6IHN0cmluZywgY291cG9uQ29kZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5SZW1vdmVDb3Vwb25Db2RlRnJvbURyYWZ0T3JkZXJNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5SZW1vdmVDb3Vwb25Db2RlRnJvbURyYWZ0T3JkZXJNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oUkVNT1ZFX0NPVVBPTl9DT0RFX0ZST01fRFJBRlRfT1JERVIsIHsgb3JkZXJJZCwgY291cG9uQ29kZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXREcmFmdE9yZGVyRWxpZ2libGVTaGlwcGluZ01ldGhvZHMob3JkZXJJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkRyYWZ0T3JkZXJFbGlnaWJsZVNoaXBwaW5nTWV0aG9kc1F1ZXJ5LFxyXG4gICAgICAgICAgICBDb2RlZ2VuLkRyYWZ0T3JkZXJFbGlnaWJsZVNoaXBwaW5nTWV0aG9kc1F1ZXJ5VmFyaWFibGVzXHJcbiAgICAgICAgPihEUkFGVF9PUkRFUl9FTElHSUJMRV9TSElQUElOR19NRVRIT0RTLCB7IG9yZGVySWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RHJhZnRPcmRlclNoaXBwaW5nTWV0aG9kKG9yZGVySWQ6IHN0cmluZywgc2hpcHBpbmdNZXRob2RJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXREcmFmdE9yZGVyU2hpcHBpbmdNZXRob2RNdXRhdGlvbixcclxuICAgICAgICAgICAgQ29kZWdlbi5TZXREcmFmdE9yZGVyU2hpcHBpbmdNZXRob2RNdXRhdGlvblZhcmlhYmxlc1xyXG4gICAgICAgID4oU0VUX0RSQUZUX09SREVSX1NISVBQSU5HX01FVEhPRCwgeyBvcmRlcklkLCBzaGlwcGluZ01ldGhvZElkIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==