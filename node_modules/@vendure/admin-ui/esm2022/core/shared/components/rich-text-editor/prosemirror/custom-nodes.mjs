import { DOMSerializer } from 'prosemirror-model';
export const iframeNode = {
    group: 'block',
    attrs: {
        allow: {},
        allowfullscreeen: {},
        frameborder: {},
        height: { default: undefined },
        name: { default: '' },
        referrerpolicy: {},
        sandbox: { default: undefined },
        src: {},
        srcdoc: { default: undefined },
        title: { default: undefined },
        width: { default: undefined },
    },
    parseDOM: [
        {
            tag: 'iframe',
            getAttrs: node => {
                if (node instanceof HTMLIFrameElement) {
                    const attrs = {
                        allow: node.allow,
                        allowfullscreeen: node.allowFullscreen ?? true,
                        frameborder: node.getAttribute('frameborder'),
                        height: node.height,
                        name: node.name,
                        referrerpolicy: node.referrerPolicy,
                        src: node.src,
                        title: node.title ?? '',
                        width: node.width,
                        // Note: we do not allow the `srcdoc` attribute to be
                        // set as it presents an XSS attack vector
                    };
                    if (node.sandbox.length) {
                        attrs.sandbox = node.sandbox;
                    }
                    return attrs;
                }
                return null;
            },
        },
    ],
    toDOM(node) {
        return ['iframe', { ...node.attrs, sandbox: 'allow-scripts allow-same-origin' }];
    },
};
export const iframeNodeView = (node, view, getPos, decorations) => {
    const domSerializer = DOMSerializer.fromSchema(view.state.schema);
    const wrapper = document.createElement('div');
    wrapper.classList.add('iframe-wrapper');
    const iframe = domSerializer.serializeNode(node);
    wrapper.appendChild(iframe);
    return {
        dom: wrapper,
    };
};
export const linkMark = {
    attrs: {
        href: {},
        title: { default: null },
        target: { default: null },
        rel: { default: null },
        download: { default: null },
        type: { default: null },
    },
    inclusive: false,
    parseDOM: [
        {
            tag: 'a[href]',
            getAttrs(dom) {
                if (typeof dom !== 'string') {
                    return {
                        href: dom.getAttribute('href'),
                        title: dom.getAttribute('title'),
                        target: dom.getAttribute('target'),
                        rel: dom.getAttribute('rel'),
                        download: dom.getAttribute('download'),
                        type: dom.getAttribute('type'),
                    };
                }
                else {
                    return null;
                }
            },
        },
    ],
    toDOM(node) {
        const { href, title, target, rel, download, type } = node.attrs;
        const attrs = { href, title, rel, download, type };
        if (target) {
            attrs['target'] = target;
        }
        return ['a', attrs, 0];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tLW5vZGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9zaGFyZWQvY29tcG9uZW50cy9yaWNoLXRleHQtZWRpdG9yL3Byb3NlbWlycm9yL2N1c3RvbS1ub2Rlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQW9CLGFBQWEsRUFBa0MsTUFBTSxtQkFBbUIsQ0FBQztBQUdwRyxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWE7SUFDaEMsS0FBSyxFQUFFLE9BQU87SUFDZCxLQUFLLEVBQUU7UUFDSCxLQUFLLEVBQUUsRUFBRTtRQUNULGdCQUFnQixFQUFFLEVBQUU7UUFDcEIsV0FBVyxFQUFFLEVBQUU7UUFDZixNQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFO1FBQzlCLElBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUU7UUFDckIsY0FBYyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTtRQUMvQixHQUFHLEVBQUUsRUFBRTtRQUNQLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUU7UUFDOUIsS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTtRQUM3QixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFO0tBQ2hDO0lBQ0QsUUFBUSxFQUFFO1FBQ047WUFDSSxHQUFHLEVBQUUsUUFBUTtZQUNiLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDYixJQUFJLElBQUksWUFBWSxpQkFBaUIsRUFBRSxDQUFDO29CQUNwQyxNQUFNLEtBQUssR0FBd0I7d0JBQy9CLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSzt3QkFDakIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJO3dCQUM5QyxXQUFXLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FB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QUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2hFLE1BQU0sS0FBSyxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ25ELElBQUksTUFBTSxFQUFFLENBQUM7WUFDVCxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsTUFBTSxDQUFDO1FBQzdCLENBQUM7UUFDRCxPQUFPLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzQixDQUFDO0NBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF0dHJzLCBET01QYXJzZXIsIERPTVNlcmlhbGl6ZXIsIE5vZGUsIE5vZGVTcGVjLCBNYXJrLCBNYXJrU3BlYyB9IGZyb20gJ3Byb3NlbWlycm9yLW1vZGVsJztcclxuaW1wb3J0IHsgTm9kZVZpZXdDb25zdHJ1Y3RvciB9IGZyb20gJ3Byb3NlbWlycm9yLXZpZXcnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlmcmFtZU5vZGU6IE5vZGVTcGVjID0ge1xyXG4gICAgZ3JvdXA6ICdibG9jaycsXHJcbiAgICBhdHRyczoge1xyXG4gICAgICAgIGFsbG93OiB7fSxcclxuICAgICAgICBhbGxvd2Z1bGxzY3JlZWVuOiB7fSxcclxuICAgICAgICBmcmFtZWJvcmRlcjoge30sXHJcbiAgICAgICAgaGVpZ2h0OiB7IGRlZmF1bHQ6IHVuZGVmaW5lZCB9LFxyXG4gICAgICAgIG5hbWU6IHsgZGVmYXVsdDogJycgfSxcclxuICAgICAgICByZWZlcnJlcnBvbGljeToge30sXHJcbiAgICAgICAgc2FuZGJveDogeyBkZWZhdWx0OiB1bmRlZmluZWQgfSxcclxuICAgICAgICBzcmM6IHt9LFxyXG4gICAgICAgIHNyY2RvYzogeyBkZWZhdWx0OiB1bmRlZmluZWQgfSxcclxuICAgICAgICB0aXRsZTogeyBkZWZhdWx0OiB1bmRlZmluZWQgfSxcclxuICAgICAgICB3aWR0aDogeyBkZWZhdWx0OiB1bmRlZmluZWQgfSxcclxuICAgIH0sXHJcbiAgICBwYXJzZURPTTogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGFnOiAnaWZyYW1lJyxcclxuICAgICAgICAgICAgZ2V0QXR0cnM6IG5vZGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MSUZyYW1lRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvdzogbm9kZS5hbGxvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dmdWxsc2NyZWVlbjogbm9kZS5hbGxvd0Z1bGxzY3JlZW4gPz8gdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVib3JkZXI6IG5vZGUuZ2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG5vZGUuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBub2RlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVycmVycG9saWN5OiBub2RlLnJlZmVycmVyUG9saWN5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM6IG5vZGUuc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbm9kZS50aXRsZSA/PyAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG5vZGUud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGU6IHdlIGRvIG5vdCBhbGxvdyB0aGUgYHNyY2RvY2AgYXR0cmlidXRlIHRvIGJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBhcyBpdCBwcmVzZW50cyBhbiBYU1MgYXR0YWNrIHZlY3RvclxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuc2FuZGJveC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnMuc2FuZGJveCA9IG5vZGUuc2FuZGJveDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIF0sXHJcbiAgICB0b0RPTShub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFsnaWZyYW1lJywgeyAuLi5ub2RlLmF0dHJzLCBzYW5kYm94OiAnYWxsb3ctc2NyaXB0cyBhbGxvdy1zYW1lLW9yaWdpbicgfV07XHJcbiAgICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGlmcmFtZU5vZGVWaWV3OiBOb2RlVmlld0NvbnN0cnVjdG9yID0gKG5vZGUsIHZpZXcsIGdldFBvcywgZGVjb3JhdGlvbnMpID0+IHtcclxuICAgIGNvbnN0IGRvbVNlcmlhbGl6ZXIgPSBET01TZXJpYWxpemVyLmZyb21TY2hlbWEodmlldy5zdGF0ZS5zY2hlbWEpO1xyXG4gICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdpZnJhbWUtd3JhcHBlcicpO1xyXG4gICAgY29uc3QgaWZyYW1lID0gZG9tU2VyaWFsaXplci5zZXJpYWxpemVOb2RlKG5vZGUpO1xyXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChpZnJhbWUpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkb206IHdyYXBwZXIsXHJcbiAgICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGxpbmtNYXJrOiBNYXJrU3BlYyA9IHtcclxuICAgIGF0dHJzOiB7XHJcbiAgICAgICAgaHJlZjoge30sXHJcbiAgICAgICAgdGl0bGU6IHsgZGVmYXVsdDogbnVsbCB9LFxyXG4gICAgICAgIHRhcmdldDogeyBkZWZhdWx0OiBudWxsIH0sXHJcbiAgICAgICAgcmVsOiB7IGRlZmF1bHQ6IG51bGwgfSxcclxuICAgICAgICBkb3dubG9hZDogeyBkZWZhdWx0OiBudWxsIH0sXHJcbiAgICAgICAgdHlwZTogeyBkZWZhdWx0OiBudWxsIH0sXHJcbiAgICB9LFxyXG4gICAgaW5jbHVzaXZlOiBmYWxzZSxcclxuICAgIHBhcnNlRE9NOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0YWc6ICdhW2hyZWZdJyxcclxuICAgICAgICAgICAgZ2V0QXR0cnMoZG9tOiBIVE1MRWxlbWVudCB8IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkb20gIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogZG9tLmdldEF0dHJpYnV0ZSgnaHJlZicpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZG9tLmdldEF0dHJpYnV0ZSgndGl0bGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBkb20uZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVsOiBkb20uZ2V0QXR0cmlidXRlKCdyZWwnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ6IGRvbS5nZXRBdHRyaWJ1dGUoJ2Rvd25sb2FkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGRvbS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgXSxcclxuICAgIHRvRE9NKG5vZGUpIHtcclxuICAgICAgICBjb25zdCB7IGhyZWYsIHRpdGxlLCB0YXJnZXQsIHJlbCwgZG93bmxvYWQsIHR5cGUgfSA9IG5vZGUuYXR0cnM7XHJcbiAgICAgICAgY29uc3QgYXR0cnMgPSB7IGhyZWYsIHRpdGxlLCByZWwsIGRvd25sb2FkLCB0eXBlIH07XHJcbiAgICAgICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICBhdHRyc1sndGFyZ2V0J10gPSB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbJ2EnLCBhdHRycywgMF07XHJcbiAgICB9LFxyXG59O1xyXG4iXX0=